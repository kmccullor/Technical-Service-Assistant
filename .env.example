# .env.example - Template configuration for Technical Service Assistant
# Copy this file to .env and update values as needed
# SECURITY NOTE:
#  - NEVER commit your real .env file
#  - Rotate API_KEY, JWT_SECRET, and any external API keys periodically
#  - Set strong unique passwords for database in non-local deployments

# Database Configuration
DB_HOST=pgvector
DB_PORT=5432
DB_NAME=vector_db
DB_USER=postgres
DB_PASSWORD=postgres           # CHANGE for non-local environments

# Docker Postgres Environment
POSTGRES_PASSWORD=postgres     # CHANGE for non-local environments
POSTGRES_DB=vector_db
POSTGRES_USER=postgres

# Ollama Configuration
OLLAMA_URL=http://ollama-server-1:11434
EMBEDDING_MODEL=nomic-embed-text:v1.5
CHAT_MODEL=mistral:7B
RERANK_MODEL=BAAI/bge-reranker-base

# Application Configuration
UPLOADS_DIR=/app/uploads
LOG_DIR=/app/logs
POLL_INTERVAL_SECONDS=60

# SearXNG Configuration
SEARXNG_BASE_URL=http://localhost:8888/
SEARXNG_SECRET_KEY=your-secret-key-here

# API Configuration
API_HOST=0.0.0.0
API_PORT=8008
API_KEY=tsa_IV3H2rTYq5DVx5RH7gQzcAPvGHVNl6IeUi07Z8EiDuCoI3f2K99vm2lhaLyUIMRv              # Used for simple header auth (X-API-Key) – set to long random value
JWT_SECRET=tsa_IV3H2rTYq5DVx5RH7gQzcAPvGHVNl6IeUi07Z8EiDuCoI3f2K99vm2lhaLyUIMRv-jwt-secret-please-override-with-long-random

# Email / SMTP Configuration
SMTP_HOST=localhost
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USERNAME=
SMTP_PASSWORD=
VERIFICATION_EMAIL_SENDER=no-reply@technical-service-assistant.local
VERIFICATION_EMAIL_SUBJECT=Verify your Technical Service Assistant account
VERIFICATION_EMAIL_LINK_BASE=http://localhost:3000/verify-email
PASSWORD_RESET_EMAIL_SENDER=no-reply@technical-service-assistant.local
PASSWORD_RESET_EMAIL_SUBJECT=Reset your Technical Service Assistant password
PASSWORD_RESET_EMAIL_LINK_BASE=http://localhost:3000/reset-password

# Admin bootstrap (only used when running scripts/setup_rbac_data.py)
# After first login CHANGE the password via /api/auth/change-password and then remove these from runtime env.
DEFAULT_ADMIN_EMAIL=admin@technical-service.local
DEFAULT_ADMIN_PASSWORD=admin123!   # CHANGE IMMEDIATELY after first login

# Optional: If you want to disable automatic default admin creation, comment DEFAULT_ADMIN_* or modify the script.

# Feature Flags
ENABLE_TABLE_EXTRACTION=true
ENABLE_IMAGE_EXTRACTION=true
ENABLE_FAST_REASONING=true

# Performance Settings
MAX_REASONING_TIME_SECONDS=15
MAX_SYNTHESIS_TIME_SECONDS=12
MAX_CONTEXT_TIME_SECONDS=3
MAX_MEMORY_SIZE=1000
MAX_CONTEXT_TOKENS=4000
RETRIEVAL_CANDIDATES=50
RERANK_TOP_K=5

# Chunking Strategy (sent_overlap | paragraph | tokens)
CHUNK_STRATEGY=sent_overlap

# Logging
LOG_LEVEL=INFO

# Security
ALLOWED_ORIGINS=*              # Restrict to explicit domains in production (e.g. https://yourdomain.com)

# Web Cache Settings
WEB_CACHE_TTL_SECONDS=900
WEB_CACHE_ENABLED=true
WEB_CACHE_MAX_ROWS=5000
ENABLE_FEEDBACK=true

# Optional: External API Keys (if needed) – keep commented unless in use
# OPENROUTER_API_KEY=your_api_key_here
# SEARXNG_API_KEY=your_search_key_here
# OTHER_VENDOR_KEY=...

# Key Rotation Guidance:
# 1. Generate new API key: head -c 48 /dev/urandom | base64
# 2. Update API_KEY here (or secret store) and redeploy
# 3. Invalidate old keys (if stored/managed internally)

# Password Policy Recommendations (documented):
# - Min length 12
# - At least 1 upper, 1 lower, 1 digit, 1 symbol
# - Avoid reuse of last N passwords (enforce in future)

# End of file
