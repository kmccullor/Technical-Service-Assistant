"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/chat/chat-interface.tsx":
/*!********************************************!*\
  !*** ./components/chat/chat-interface.tsx ***!
  \********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatInterface: function() { return /* binding */ ChatInterface; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _src_context_AuthContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/context/AuthContext */ \"(app-pages-browser)/./src/context/AuthContext.tsx\");\n/* harmony import */ var _barrel_optimize_names_Copy_lucide_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=Copy!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/copy.js\");\n/* harmony import */ var _radix_ui_react_toast__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @radix-ui/react-toast */ \"(app-pages-browser)/./node_modules/@radix-ui/react-toast/dist/index.mjs\");\n/* harmony import */ var _message_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./message-renderer */ \"(app-pages-browser)/./components/chat/message-renderer.tsx\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/file-text.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/globe.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/search.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/upload.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/circle-alert.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/circle-check-big.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/minimize-2.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/maximize-2.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/paperclip.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/send.js\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./components/ui/button.tsx\");\n/* harmony import */ var _components_ui_textarea__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ui/textarea */ \"(app-pages-browser)/./components/ui/textarea.tsx\");\n/* harmony import */ var _components_ui_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/ui/card */ \"(app-pages-browser)/./components/ui/card.tsx\");\n/* harmony import */ var _components_ui_badge__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/ui/badge */ \"(app-pages-browser)/./components/ui/badge.tsx\");\n/* harmony import */ var _components_ui_collapsible__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/ui/collapsible */ \"(app-pages-browser)/./components/ui/collapsible.tsx\");\n/* __next_internal_client_entry_do_not_use__ ChatInterface auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n// Helper to format message for copying (plain text + optional metadata)\nfunction formatMessageForCopy(message) {\n    let text = message.content;\n    if (message.citations && message.citations.length > 0) {\n        text += \"\\n\\nSources:\";\n        for (const c of message.citations){\n            text += \"\\n- \".concat(c.title, \" (\").concat(c.source, \")\").concat(c.score ? \" [\".concat((c.score * 100).toFixed(0), \"% match]\") : \"\");\n        }\n    }\n    text += \"\\n\\nTimestamp: \".concat(message.timestamp.toLocaleString());\n    return text;\n}\n// Copy to clipboard with fallback\nasync function copyToClipboard(text) {\n    if (navigator.clipboard) {\n        await navigator.clipboard.writeText(text);\n    } else {\n        // Fallback for older browsers\n        const textarea = document.createElement(\"textarea\");\n        textarea.value = text;\n        document.body.appendChild(textarea);\n        textarea.select();\n        document.execCommand(\"copy\");\n        document.body.removeChild(textarea);\n    }\n}\n\n\n\n\n\n\nconst ALLOWED_EXTENSIONS = [\n    \".txt\",\n    \".log\",\n    \".csv\",\n    \".json\",\n    \".sql\",\n    \".pdf\",\n    \".xml\",\n    \".conf\",\n    \".config\",\n    \".ini\",\n    \".properties\",\n    \".out\",\n    \".err\",\n    \".trace\",\n    \".dump\",\n    \".png\",\n    \".jpg\",\n    \".jpeg\",\n    \".gif\",\n    \".bmp\",\n    \".tiff\",\n    \".webp\"\n];\nconst MAX_FILE_SIZE = 10 * 1024 * 1024 // 10MB\n;\nfunction ChatInterface(param) {\n    let { conversationId, onConversationCreated, onConversationActivity } = param;\n    _s();\n    const { accessToken } = (0,_src_context_AuthContext__WEBPACK_IMPORTED_MODULE_2__.useAuth)();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [uploadedFile, setUploadedFile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isUploading, setIsUploading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [uploadError, setUploadError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isDragOver, setIsDragOver] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [inputExpanded, setInputExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const chatContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messagesContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const isInitialScrollRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n    const scrollToBottom = function() {\n        let behavior = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : \"auto\";\n        const el = messagesContainerRef.current;\n        if (el) {\n            el.scrollTo({\n                top: el.scrollHeight,\n                behavior\n            });\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        scrollToBottom(isInitialScrollRef.current ? \"auto\" : \"smooth\");\n        isInitialScrollRef.current = false;\n    }, [\n        messages\n    ]);\n    const [historyLoading, setHistoryLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [historyError, setHistoryError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Handle conversation changes - load history for existing conversations\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let cancelled = false;\n        const loadHistory = async (id)=>{\n            if (!accessToken) {\n                setHistoryError(\"Authentication required to load conversation.\");\n                setMessages([]);\n                return;\n            }\n            try {\n                setHistoryLoading(true);\n                setHistoryError(null);\n                const response = await fetch(\"/api/conversations/\".concat(id), {\n                    headers: {\n                        Authorization: \"Bearer \".concat(accessToken)\n                    },\n                    cache: \"no-store\"\n                });\n                if (!response.ok) {\n                    if (response.status === 404) {\n                        setHistoryError(\"Conversation not found.\");\n                        setMessages([]);\n                        return;\n                    }\n                    const detail = await response.text().catch(()=>\"\");\n                    throw new Error(detail || \"Failed to load conversation (status \".concat(response.status, \")\"));\n                }\n                const data = await response.json();\n                if (cancelled) return;\n                const mapped = Array.isArray(data === null || data === void 0 ? void 0 : data.messages) ? data.messages.map((msg)=>{\n                    var _msg_content, _msg_searchType, _msg_createdAt, _ref;\n                    return {\n                        id: String(msg.id),\n                        role: msg.role === \"assistant\" ? \"assistant\" : \"user\",\n                        content: (_msg_content = msg.content) !== null && _msg_content !== void 0 ? _msg_content : \"\",\n                        citations: Array.isArray(msg.citations) ? msg.citations : undefined,\n                        searchType: (_msg_searchType = msg.searchType) !== null && _msg_searchType !== void 0 ? _msg_searchType : msg.method,\n                        timestamp: new Date((_ref = (_msg_createdAt = msg.createdAt) !== null && _msg_createdAt !== void 0 ? _msg_createdAt : msg.created_at) !== null && _ref !== void 0 ? _ref : new Date().toISOString())\n                    };\n                }) : [];\n                setMessages(mapped);\n                setUploadedFile(null);\n                setUploadError(null);\n            } catch (error) {\n                if (!cancelled) {\n                    console.error(\"Failed to load conversation history:\", error);\n                    setHistoryError(\"Unable to load conversation history.\");\n                    setMessages([]);\n                }\n            } finally{\n                if (!cancelled) {\n                    setHistoryLoading(false);\n                }\n            }\n        };\n        if (conversationId === undefined) {\n            setMessages([]);\n            setInput(\"\");\n            setUploadedFile(null);\n            setUploadError(null);\n            setHistoryError(null);\n            setHistoryLoading(false);\n        } else {\n            loadHistory(conversationId);\n        }\n        isInitialScrollRef.current = true;\n        return ()=>{\n            cancelled = true;\n        };\n    }, [\n        conversationId,\n        accessToken\n    ]);\n    const validateFile = (file)=>{\n        if (file.size > MAX_FILE_SIZE) {\n            return \"File size exceeds \".concat(MAX_FILE_SIZE / 1024 / 1024, \"MB limit\");\n        }\n        const extension = file.name.toLowerCase().substring(file.name.lastIndexOf(\".\"));\n        if (!ALLOWED_EXTENSIONS.includes(extension)) {\n            return \"File type not supported. Allowed: \".concat(ALLOWED_EXTENSIONS.join(\", \"));\n        }\n        return null;\n    };\n    const handleFileUpload = async (file)=>{\n        const validationError = validateFile(file);\n        if (validationError) {\n            setUploadError(validationError);\n            return;\n        }\n        setIsUploading(true);\n        setUploadError(null);\n        try {\n            const formData = new FormData();\n            formData.append(\"file\", file);\n            const response = await fetch(\"/api/temp-upload\", {\n                method: \"POST\",\n                body: formData,\n                headers: accessToken ? {\n                    Authorization: \"Bearer \".concat(accessToken)\n                } : undefined\n            });\n            const result = await response.json();\n            if (!result.success) {\n                throw new Error(result.error || \"Upload failed\");\n            }\n            const uploadedFile = {\n                sessionId: result.sessionId,\n                fileName: result.fileName,\n                fileSize: result.fileSize,\n                uploadTime: new Date().toISOString()\n            };\n            setUploadedFile(uploadedFile);\n            // Add a system message about the upload\n            const systemMessage = {\n                id: Date.now().toString(),\n                role: \"assistant\",\n                content: \"✅ **File uploaded successfully:** \".concat(file.name, \" (\").concat(formatFileSize(file.size), \")\\n\\nYou can now ask questions about this document. I'll analyze its content to provide specific insights and troubleshooting assistance.\"),\n                searchType: \"temp-doc\",\n                uploadedFile: uploadedFile,\n                timestamp: new Date()\n            };\n            setMessages((prev)=>[\n                    ...prev,\n                    systemMessage\n                ]);\n        } catch (error) {\n            console.error(\"Upload error:\", error);\n            setUploadError(error instanceof Error ? error.message : \"Upload failed\");\n        } finally{\n            setIsUploading(false);\n        }\n    };\n    const handleFileSelect = (event)=>{\n        const files = event.target.files;\n        if (files && files.length > 0) {\n            handleFileUpload(files[0]);\n        }\n    };\n    const clearUploadedFile = ()=>{\n        setUploadedFile(null);\n        setUploadError(null);\n        if (fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n    };\n    const formatFileSize = (bytes)=>{\n        if (bytes === 0) return \"0 Bytes\";\n        const k = 1024;\n        const sizes = [\n            \"Bytes\",\n            \"KB\",\n            \"MB\"\n        ];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + \" \" + sizes[i];\n    };\n    // Drag and drop handlers\n    const handleDragEnter = (e)=>{\n        e.preventDefault();\n        e.stopPropagation();\n        setIsDragOver(true);\n    };\n    const handleDragLeave = (e)=>{\n        var _chatContainerRef_current;\n        e.preventDefault();\n        e.stopPropagation();\n        // Only set isDragOver to false if we're leaving the chat container\n        if (!((_chatContainerRef_current = chatContainerRef.current) === null || _chatContainerRef_current === void 0 ? void 0 : _chatContainerRef_current.contains(e.relatedTarget))) {\n            setIsDragOver(false);\n        }\n    };\n    const handleDragOver = (e)=>{\n        e.preventDefault();\n        e.stopPropagation();\n    };\n    const handleDrop = (e)=>{\n        e.preventDefault();\n        e.stopPropagation();\n        setIsDragOver(false);\n        const files = e.dataTransfer.files;\n        if (files && files.length > 0) {\n            handleFileUpload(files[0]);\n        }\n    };\n    // Toast state for copy feedback\n    const [toastOpen, setToastOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [toastMsg, setToastMsg] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    // Add global drag event listeners to detect drag enter/leave\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handleGlobalDragEnter = (e)=>{\n            var _e_dataTransfer;\n            if ((_e_dataTransfer = e.dataTransfer) === null || _e_dataTransfer === void 0 ? void 0 : _e_dataTransfer.types.includes(\"Files\")) {\n                setIsDragOver(true);\n            }\n        };\n        const handleGlobalDragLeave = (e)=>{\n            // Only hide drag overlay if we're leaving the window\n            if (e.clientX === 0 && e.clientY === 0) {\n                setIsDragOver(false);\n            }\n        };\n        document.addEventListener(\"dragenter\", handleGlobalDragEnter);\n        document.addEventListener(\"dragleave\", handleGlobalDragLeave);\n        return ()=>{\n            document.removeEventListener(\"dragenter\", handleGlobalDragEnter);\n            document.removeEventListener(\"dragleave\", handleGlobalDragLeave);\n        };\n    }, []);\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        const rawInput = input.trim();\n        if (!rawInput || isLoading) return;\n        if (!accessToken) {\n            setToastMsg(\"Please sign in to chat.\");\n            setToastOpen(true);\n            return;\n        }\n        const commandMatch = rawInput.match(/^\\/(new|update|close)\\s+case\\s+(.+)$/i);\n        let displayContent = rawInput;\n        let outboundContent = rawInput;\n        if (commandMatch) {\n            const action = commandMatch[1].toLowerCase();\n            const caseNumber = commandMatch[2].trim();\n            if (!caseNumber) {\n                setToastMsg(\"Please provide a case number, e.g. /new case 01125052\");\n                setToastOpen(true);\n                return;\n            }\n            if (action === \"new\") {\n                displayContent = \"\\uD83D\\uDCC4 Initiating Salesforce case \".concat(caseNumber);\n                outboundContent = \"You are assisting with Salesforce case \".concat(caseNumber, \". Using the conversation context, define the case for analysis and recommendation by providing:\\n- A concise case overview with important facts known so far.\\n- Immediate diagnostic or triage steps to perform.\\n- Clarifying questions that should be asked of the customer.\\n- Recommended next actions for engineering/support teams.\\nReturn the response with headings: Case Overview, Immediate Actions, Clarifying Questions, Recommended Next Steps.\");\n            } else if (action === \"update\") {\n                displayContent = \"\\uD83D\\uDEE0️ Updating Salesforce case \".concat(caseNumber);\n                outboundContent = \"You are providing an update on Salesforce case \".concat(caseNumber, \". Review the conversation context and produce:\\n- The current status/progress of the case.\\n- Outstanding issues or blockers.\\n- Recommended next steps for the support engineer.\\n- Suggested customer communication points.\\nReturn the response with headings: Case Status, Outstanding Items, Recommended Actions, Customer Communication.\");\n            } else if (action === \"close\") {\n                displayContent = \"✅ Closing Salesforce case \".concat(caseNumber);\n                outboundContent = \"You are preparing to close Salesforce case \".concat(caseNumber, \". Based on the conversation context, provide:\\n- A brief incident summary.\\n- Actions taken and resolutions applied.\\n- Verification steps or final checks completed/needed.\\n- Final closing comments for the customer.\\nReturn the response with headings: Summary, Actions Taken, Verification, Closing Comments.\");\n            }\n        }\n        const userMessage = {\n            id: Date.now().toString(),\n            role: \"user\",\n            content: displayContent,\n            uploadedFile: uploadedFile || undefined,\n            timestamp: new Date()\n        };\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        const currentInput = outboundContent;\n        setInput(\"\");\n        setIsLoading(true);\n        try {\n            var _response_body;\n            // If there's an uploaded file, analyze it using temp-analyze endpoint\n            if (uploadedFile) {\n                var _result_results;\n                const response = await fetch(\"/api/temp-analyze\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        ...accessToken ? {\n                            Authorization: \"Bearer \".concat(accessToken)\n                        } : {}\n                    },\n                    body: JSON.stringify({\n                        sessionId: uploadedFile.sessionId,\n                        query: currentInput,\n                        maxResults: 5\n                    })\n                });\n                if (!response.ok) {\n                    throw new Error(\"HTTP error! status: \".concat(response.status));\n                }\n                const result = await response.json();\n                const assistantMessage = {\n                    id: (Date.now() + 1).toString(),\n                    role: \"assistant\",\n                    content: result.response,\n                    citations: (_result_results = result.results) === null || _result_results === void 0 ? void 0 : _result_results.map((r, idx)=>({\n                            id: \"temp-\".concat(idx),\n                            title: \"Section \".concat(r.rank),\n                            content: r.content,\n                            source: uploadedFile.fileName,\n                            score: r.similarity\n                        })),\n                    searchType: \"temp-doc\",\n                    timestamp: new Date()\n                };\n                setMessages((prev)=>[\n                        ...prev,\n                        assistantMessage\n                    ]);\n                return;\n            }\n            // Regular chat without uploaded file\n            const response = await fetch(\"/api/chat\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: \"Bearer \".concat(accessToken)\n                },\n                body: JSON.stringify({\n                    conversationId,\n                    message: currentInput,\n                    displayMessage: userMessage.content\n                })\n            });\n            if (!response.ok) {\n                throw new Error(\"HTTP error! status: \".concat(response.status));\n            }\n            const reader = (_response_body = response.body) === null || _response_body === void 0 ? void 0 : _response_body.getReader();\n            if (!reader) throw new Error(\"No response body\");\n            let assistantMessage = {\n                id: (Date.now() + 1).toString(),\n                role: \"assistant\",\n                content: \"\",\n                timestamp: new Date()\n            };\n            let resolvedConversationId = conversationId;\n            setMessages((prev)=>[\n                    ...prev,\n                    assistantMessage\n                ]);\n            while(true){\n                const { done, value } = await reader.read();\n                if (done) break;\n                const chunk = new TextDecoder().decode(value);\n                const lines = chunk.split(\"\\n\");\n                for (const line of lines){\n                    if (line.startsWith(\"data: \")) {\n                        try {\n                            const data = JSON.parse(line.slice(6));\n                            if (data.type === \"token\") {\n                                // Handle streaming tokens from the backend\n                                setMessages((prev)=>prev.map((m)=>m.id === assistantMessage.id ? {\n                                            ...m,\n                                            content: m.content + data.token\n                                        } : m));\n                            } else if (data.type === \"sources\") {\n                                // Handle sources/citations\n                                setMessages((prev)=>prev.map((m)=>m.id === assistantMessage.id ? {\n                                            ...m,\n                                            citations: data.sources,\n                                            searchType: data.method\n                                        } : m));\n                            } else if (data.type === \"conversation_id\") {\n                                if (typeof data.conversationId === \"number\") {\n                                    resolvedConversationId = data.conversationId;\n                                    if (conversationId === undefined) {\n                                        onConversationCreated === null || onConversationCreated === void 0 ? void 0 : onConversationCreated(data.conversationId);\n                                    }\n                                }\n                            } else if (data.type === \"done\") {\n                                // Streaming completed\n                                console.log(\"Streaming completed\");\n                            } else if (data.type === \"error\") {\n                                console.error(\"Streaming error:\", data.error);\n                            }\n                        } catch (e) {\n                            // Ignore malformed JSON\n                            console.warn(\"Failed to parse streaming data:\", line);\n                        }\n                    }\n                }\n            }\n            if (resolvedConversationId !== undefined) {\n                onConversationActivity === null || onConversationActivity === void 0 ? void 0 : onConversationActivity(resolvedConversationId);\n            }\n        } catch (error) {\n            console.error(\"Chat error:\", error);\n            const errorMessage = {\n                id: (Date.now() + 1).toString(),\n                role: \"assistant\",\n                content: \"Sorry, I encountered an error. Please try again.\",\n                timestamp: new Date()\n            };\n            setMessages((prev)=>[\n                    ...prev,\n                    errorMessage\n                ]);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const getSearchIcon = (searchType)=>{\n        switch(searchType){\n            case \"documents\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                    className: \"h-3 w-3\"\n                }, void 0, false, {\n                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                    lineNumber: 522,\n                    columnNumber: 32\n                }, this);\n            case \"web\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                    className: \"h-3 w-3\"\n                }, void 0, false, {\n                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                    lineNumber: 523,\n                    columnNumber: 26\n                }, this);\n            case \"hybrid\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                    className: \"h-3 w-3\"\n                }, void 0, false, {\n                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                    lineNumber: 524,\n                    columnNumber: 29\n                }, this);\n            case \"temp-doc\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                    className: \"h-3 w-3\"\n                }, void 0, false, {\n                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                    lineNumber: 525,\n                    columnNumber: 31\n                }, this);\n            default:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                    className: \"h-3 w-3\"\n                }, void 0, false, {\n                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                    lineNumber: 526,\n                    columnNumber: 23\n                }, this);\n        }\n    };\n    const getSearchLabel = (searchType)=>{\n        switch(searchType){\n            case \"documents\":\n                return \"Document Search\";\n            case \"web\":\n                return \"Web Search\";\n            case \"hybrid\":\n                return \"Hybrid Search\";\n            case \"temp-doc\":\n                return \"Uploaded Document\";\n            default:\n                return \"Search\";\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: chatContainerRef,\n        className: \"flex h-full min-h-0 flex-col relative\",\n        onDragEnter: handleDragEnter,\n        onDragLeave: handleDragLeave,\n        onDragOver: handleDragOver,\n        onDrop: handleDrop,\n        children: [\n            isDragOver && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 z-50 bg-blue-500/10 backdrop-blur-sm flex items-center justify-center border-2 border-dashed border-blue-500\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center p-8 bg-white/90 rounded-lg shadow-lg\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                            className: \"h-12 w-12 mx-auto text-blue-500 mb-4\"\n                        }, void 0, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 553,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-xl font-semibold text-blue-900 mb-2\",\n                            children: \"Drop file to analyze\"\n                        }, void 0, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 554,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-blue-700\",\n                            children: \"Supports logs, configs, PDFs, images, and more\"\n                        }, void 0, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 555,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-blue-600 mt-2\",\n                            children: \"AI will analyze your document with Technical Service Assistant expertise\"\n                        }, void 0, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 558,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                    lineNumber: 552,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                lineNumber: 551,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 min-h-0 overflow-y-auto p-4 space-y-4\",\n                children: [\n                    historyLoading && messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center text-muted-foreground py-8\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                className: \"h-10 w-10 mx-auto mb-4 animate-spin\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 569,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Loading conversation...\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 570,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 568,\n                        columnNumber: 11\n                    }, this) : historyError && messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center text-red-500 py-8\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                                className: \"h-10 w-10 mx-auto mb-4\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 574,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: historyError\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 575,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 573,\n                        columnNumber: 11\n                    }, this) : messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center text-muted-foreground py-8\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                className: \"h-12 w-12 mx-auto mb-4 opacity-50\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 579,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"text-lg font-medium mb-2\",\n                                children: \"Start a conversation\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 580,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Ask questions about your documents or any topic.\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 581,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 578,\n                        columnNumber: 11\n                    }, this) : null,\n                    messages.map((message)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex \".concat(message.role === \"user\" ? \"justify-end\" : \"justify-start\"),\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"max-w-[80%] \".concat(message.role === \"user\" ? \"bg-primary text-primary-foreground\" : \"bg-muted\", \" rounded-lg p-4 relative\"),\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_message_renderer__WEBPACK_IMPORTED_MODULE_3__.MessageRenderer, {\n                                        content: message.content\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 588,\n                                        columnNumber: 16\n                                    }, this),\n                                    message.role === \"assistant\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"absolute top-2 right-2 p-1 rounded hover:bg-accent focus:outline-none focus:ring\",\n                                        title: \"Copy response\",\n                                        \"aria-label\": \"Copy response\",\n                                        \"data-testid\": \"copy-btn\",\n                                        onClick: async ()=>{\n                                            try {\n                                                await copyToClipboard(formatMessageForCopy(message));\n                                                setToastMsg(\"Copied to clipboard!\");\n                                                setToastOpen(true);\n                                            } catch (e) {\n                                                setToastMsg(\"Copy failed\");\n                                                setToastOpen(true);\n                                            }\n                                        },\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Copy_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                                            className: \"h-4 w-4 text-muted-foreground\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                            lineNumber: 607,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 591,\n                                        columnNumber: 17\n                                    }, this),\n                                    message.citations && message.citations.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-3 pt-3 border-t border-border/20\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-2 mb-2\",\n                                                children: [\n                                                    getSearchIcon(message.searchType),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs font-medium\",\n                                                        children: getSearchLabel(message.searchType)\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                        lineNumber: 614,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_badge__WEBPACK_IMPORTED_MODULE_7__.Badge, {\n                                                        variant: \"secondary\",\n                                                        className: \"text-xs\",\n                                                        children: [\n                                                            message.citations.length,\n                                                            \" source\",\n                                                            message.citations.length !== 1 ? \"s\" : \"\"\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                        lineNumber: 615,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 612,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_collapsible__WEBPACK_IMPORTED_MODULE_8__.Collapsible, {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_collapsible__WEBPACK_IMPORTED_MODULE_8__.CollapsibleTrigger, {\n                                                        className: \"text-xs text-muted-foreground hover:text-foreground transition-colors\",\n                                                        children: \"Show sources ↓\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                        lineNumber: 620,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_collapsible__WEBPACK_IMPORTED_MODULE_8__.CollapsibleContent, {\n                                                        className: \"mt-2 space-y-2\",\n                                                        children: message.citations.map((citation, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_6__.Card, {\n                                                                className: \"text-xs\",\n                                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_6__.CardContent, {\n                                                                    className: \"p-3\",\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"font-medium mb-1\",\n                                                                            children: citation.title\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                            lineNumber: 627,\n                                                                            columnNumber: 29\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"text-muted-foreground mb-2 line-clamp-2\",\n                                                                            children: citation.content\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                            lineNumber: 628,\n                                                                            columnNumber: 29\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"flex justify-between items-center\",\n                                                                            children: [\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                    className: \"text-muted-foreground\",\n                                                                                    children: citation.source\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                                    lineNumber: 632,\n                                                                                    columnNumber: 31\n                                                                                }, this),\n                                                                                citation.score && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_badge__WEBPACK_IMPORTED_MODULE_7__.Badge, {\n                                                                                    variant: \"outline\",\n                                                                                    children: [\n                                                                                        (citation.score * 100).toFixed(0),\n                                                                                        \"% match\"\n                                                                                    ]\n                                                                                }, void 0, true, {\n                                                                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                                    lineNumber: 634,\n                                                                                    columnNumber: 33\n                                                                                }, this)\n                                                                            ]\n                                                                        }, void 0, true, {\n                                                                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                            lineNumber: 631,\n                                                                            columnNumber: 29\n                                                                        }, this)\n                                                                    ]\n                                                                }, void 0, true, {\n                                                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                    lineNumber: 626,\n                                                                    columnNumber: 27\n                                                                }, this)\n                                                            }, idx, false, {\n                                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                lineNumber: 625,\n                                                                columnNumber: 25\n                                                            }, this))\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                        lineNumber: 623,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 619,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 611,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 587,\n                                columnNumber: 14\n                            }, this)\n                        }, message.id, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 586,\n                            columnNumber: 11\n                        }, this)),\n                    historyLoading && messages.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center text-xs text-muted-foreground\",\n                        children: \"Updating conversation…\"\n                    }, void 0, false, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 650,\n                        columnNumber: 11\n                    }, this),\n                    isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex justify-start\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-muted rounded-lg p-4\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                className: \"h-4 w-4 animate-spin\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 656,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 655,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 654,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        ref: messagesEndRef\n                    }, void 0, false, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 661,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                lineNumber: 566,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"border-t bg-background p-4\",\n                children: [\n                    uploadedFile && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mb-3 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                                        className: \"h-4 w-4 text-green-500\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 670,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"font-medium text-green-900\",\n                                                children: uploadedFile.fileName\n                                            }, void 0, false, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 672,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-sm text-green-600 ml-2\",\n                                                children: [\n                                                    \"(\",\n                                                    formatFileSize(uploadedFile.fileSize),\n                                                    \")\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 673,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 671,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 669,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                variant: \"ghost\",\n                                size: \"sm\",\n                                onClick: clearUploadedFile,\n                                className: \"text-green-700 hover:text-green-800\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n                                    className: \"h-4 w-4\"\n                                }, void 0, false, {\n                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                    lineNumber: 682,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 676,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 668,\n                        columnNumber: 11\n                    }, this),\n                    uploadError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                                className: \"h-4 w-4 text-red-500 mt-0.5\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 689,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"font-medium text-red-900\",\n                                        children: \"Upload Error\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 691,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-sm text-red-600\",\n                                        children: uploadError\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 692,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 690,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                variant: \"ghost\",\n                                size: \"sm\",\n                                onClick: ()=>setUploadError(null),\n                                className: \"text-red-700 hover:text-red-800 ml-auto\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n                                    className: \"h-4 w-4\"\n                                }, void 0, false, {\n                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                    lineNumber: 700,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 694,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 688,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                        onSubmit: handleSubmit,\n                        className: \"space-y-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center justify-between text-xs text-muted-foreground\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: \"Press Enter to send, Shift+Enter for a new line.\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 707,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex items-center gap-2\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                            type: \"button\",\n                                            variant: \"ghost\",\n                                            size: \"icon\",\n                                            onClick: ()=>setInputExpanded((prev)=>!prev),\n                                            className: \"text-muted-foreground hover:text-foreground\",\n                                            title: inputExpanded ? \"Collapse input\" : \"Expand input\",\n                                            children: inputExpanded ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                                                className: \"h-4 w-4\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 717,\n                                                columnNumber: 34\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n                                                className: \"h-4 w-4\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 717,\n                                                columnNumber: 70\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                            lineNumber: 709,\n                                            columnNumber: 15\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 708,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 706,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"relative\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_5__.Textarea, {\n                                        value: input,\n                                        onChange: (e)=>setInput(e.target.value),\n                                        placeholder: uploadedFile ? uploadedFile.fileName.match(/\\.(png|jpg|jpeg|gif|bmp|tiff|webp)$/i) ? \"Describe what you see in the image or ask questions about it...\" : \"Ask questions about the uploaded document...\" : \"Ask a question about your documents...\",\n                                        className: \"w-full pr-12 resize-y \".concat(inputExpanded ? \"min-h-[180px]\" : \"min-h-[80px]\", \" max-h-[320px]\"),\n                                        onKeyDown: (e)=>{\n                                            if (e.key === \"Enter\" && !e.shiftKey) {\n                                                e.preventDefault();\n                                                handleSubmit(e);\n                                            }\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 723,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute right-3 bottom-3 flex items-center gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"file\",\n                                                ref: fileInputRef,\n                                                onChange: handleFileSelect,\n                                                accept: ALLOWED_EXTENSIONS.join(\",\"),\n                                                className: \"hidden\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 740,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                                type: \"button\",\n                                                variant: \"ghost\",\n                                                size: \"icon\",\n                                                onClick: ()=>{\n                                                    var _fileInputRef_current;\n                                                    return (_fileInputRef_current = fileInputRef.current) === null || _fileInputRef_current === void 0 ? void 0 : _fileInputRef_current.click();\n                                                },\n                                                disabled: isUploading,\n                                                className: \"h-7 w-7\",\n                                                title: \"Upload document for analysis\",\n                                                children: isUploading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                                    className: \"h-4 w-4 animate-spin\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                    lineNumber: 757,\n                                                    columnNumber: 19\n                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                                                    className: \"h-4 w-4\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                    lineNumber: 759,\n                                                    columnNumber: 19\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 747,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 739,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 722,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center justify-between\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-muted-foreground\",\n                                        children: !uploadedFile && \"\\uD83D\\uDCA1 Tip: Click the clip icon or drag & drop files to upload logs, configs, images, or other documents.\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 766,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                        type: \"submit\",\n                                        disabled: !input.trim() || isLoading,\n                                        children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                            className: \"h-4 w-4 animate-spin\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                            lineNumber: 770,\n                                            columnNumber: 28\n                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_21__[\"default\"], {\n                                                    className: \"h-4 w-4 mr-1\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                    lineNumber: 770,\n                                                    columnNumber: 77\n                                                }, this),\n                                                \" Send\"\n                                            ]\n                                        }, void 0, true)\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 769,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 765,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 705,\n                        columnNumber: 9\n                    }, this),\n                    !uploadedFile && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-2 text-xs text-muted-foreground\",\n                        children: \"Need to describe a longer issue? Expand the input or attach files for deeper analysis.\"\n                    }, void 0, false, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 776,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                lineNumber: 665,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_radix_ui_react_toast__WEBPACK_IMPORTED_MODULE_22__.Provider, {\n                swipeDirection: \"right\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_radix_ui_react_toast__WEBPACK_IMPORTED_MODULE_22__.Root, {\n                        open: toastOpen,\n                        onOpenChange: setToastOpen,\n                        duration: 2000,\n                        className: \"bg-black text-white px-4 py-2 rounded shadow-lg\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_radix_ui_react_toast__WEBPACK_IMPORTED_MODULE_22__.Title, {\n                            children: toastMsg\n                        }, void 0, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 784,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 783,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_radix_ui_react_toast__WEBPACK_IMPORTED_MODULE_22__.Viewport, {\n                        className: \"fixed bottom-4 right-4 z-50\"\n                    }, void 0, false, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 786,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                lineNumber: 782,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n        lineNumber: 541,\n        columnNumber: 5\n    }, this);\n}\n_s(ChatInterface, \"ZB9QxitkGmSzEB3jkS3JvqOX3VI=\", false, function() {\n    return [\n        _src_context_AuthContext__WEBPACK_IMPORTED_MODULE_2__.useAuth\n    ];\n});\n_c = ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvY2hhdC9jaGF0LWludGVyZmFjZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRXlCO0FBRTBCO0FBQ0E7QUFDaEI7QUFDVztBQUNNO0FBQ3BELHdFQUF3RTtBQUN4RSxTQUFTUSxxQkFBcUJDLE9BQWdCO0lBQzVDLElBQUlDLE9BQU9ELFFBQVFFLE9BQU87SUFDMUIsSUFBSUYsUUFBUUcsU0FBUyxJQUFJSCxRQUFRRyxTQUFTLENBQUNDLE1BQU0sR0FBRyxHQUFHO1FBQ3JESCxRQUFRO1FBQ1IsS0FBSyxNQUFNSSxLQUFLTCxRQUFRRyxTQUFTLENBQUU7WUFDakNGLFFBQVEsT0FBbUJJLE9BQVpBLEVBQUVDLEtBQUssRUFBQyxNQUFnQkQsT0FBWkEsRUFBRUUsTUFBTSxFQUFDLEtBQTRELE9BQXpERixFQUFFRyxLQUFLLEdBQUcsS0FBZ0MsT0FBM0IsQ0FBQ0gsRUFBRUcsS0FBSyxHQUFHLEdBQUUsRUFBR0MsT0FBTyxDQUFDLElBQUcsY0FBWTtRQUMvRjtJQUNGO0lBQ0FSLFFBQVEsa0JBQXFELE9BQW5DRCxRQUFRVSxTQUFTLENBQUNDLGNBQWM7SUFDMUQsT0FBT1Y7QUFDVDtBQUNBLGtDQUFrQztBQUNsQyxlQUFlVyxnQkFBZ0JYLElBQVk7SUFDekMsSUFBSVksVUFBVUMsU0FBUyxFQUFFO1FBQ3ZCLE1BQU1ELFVBQVVDLFNBQVMsQ0FBQ0MsU0FBUyxDQUFDZDtJQUN0QyxPQUFPO1FBQ0wsOEJBQThCO1FBQzlCLE1BQU1lLFdBQVdDLFNBQVNDLGFBQWEsQ0FBQztRQUN4Q0YsU0FBU0csS0FBSyxHQUFHbEI7UUFDakJnQixTQUFTRyxJQUFJLENBQUNDLFdBQVcsQ0FBQ0w7UUFDMUJBLFNBQVNNLE1BQU07UUFDZkwsU0FBU00sV0FBVyxDQUFDO1FBQ3JCTixTQUFTRyxJQUFJLENBQUNJLFdBQVcsQ0FBQ1I7SUFDNUI7QUFDRjtBQUMySTtBQUM1RjtBQUNJO0FB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Ozs7Ozs7Ozs7Ozs7MENBTTdCLDhEQUFDRTtnQ0FBSUYsV0FBVTs7a0RBQ2IsOERBQUNFO3dDQUFJRixXQUFVO2tEQUNaLENBQUNoSyxnQkFBZ0I7Ozs7OztrREFFcEIsOERBQUNyQix5REFBTUE7d0NBQUM4SyxNQUFLO3dDQUFTa0MsVUFBVSxDQUFDL0wsTUFBTTJILElBQUksTUFBTXpIO2tEQUM5Q0EsMEJBQVksOERBQUM5Qiw4S0FBT0E7NENBQUNnTSxXQUFVOzs7OztpRUFBNEI7OzhEQUFFLDhEQUFDak0sOEtBQUlBO29EQUFDaU0sV0FBVTs7Ozs7O2dEQUFpQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBS3BHLENBQUNoSyw4QkFDQSw4REFBQ2tLO3dCQUFJRixXQUFVO2tDQUFxQzs7Ozs7Ozs7Ozs7OzBCQU14RCw4REFBQzdOLDREQUFjO2dCQUFDMFAsZ0JBQWU7O2tDQUM3Qiw4REFBQzFQLHdEQUFVO3dCQUFDNFAsTUFBTXJGO3dCQUFXc0YsY0FBY3JGO3dCQUFjc0YsVUFBVTt3QkFBTWpDLFdBQVU7a0NBQ2pGLDRFQUFDN04seURBQVc7c0NBQUV5Szs7Ozs7Ozs7Ozs7a0NBRWhCLDhEQUFDekssNERBQWM7d0JBQUM2TixXQUFVOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJbEM7R0Fuc0JnQjNLOztRQUNVcEQsNkRBQU9BOzs7S0FEakJvRCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL2NoYXQvY2hhdC1pbnRlcmZhY2UudHN4PzA1MjEiXSwic291cmNlc0NvbnRlbnQiOlsiXG4ndXNlIGNsaWVudCdcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnQC9zcmMvY29udGV4dC9BdXRoQ29udGV4dCdcbmltcG9ydCB7IENvcHkgfSBmcm9tICdsdWNpZGUtcmVhY3QnXG5pbXBvcnQgKiBhcyBUb2FzdCBmcm9tICdAcmFkaXgtdWkvcmVhY3QtdG9hc3QnXG5pbXBvcnQgeyBNZXNzYWdlUmVuZGVyZXIgfSBmcm9tICcuL21lc3NhZ2UtcmVuZGVyZXInXG4vLyBIZWxwZXIgdG8gZm9ybWF0IG1lc3NhZ2UgZm9yIGNvcHlpbmcgKHBsYWluIHRleHQgKyBvcHRpb25hbCBtZXRhZGF0YSlcbmZ1bmN0aW9uIGZvcm1hdE1lc3NhZ2VGb3JDb3B5KG1lc3NhZ2U6IE1lc3NhZ2UpOiBzdHJpbmcge1xuICBsZXQgdGV4dCA9IG1lc3NhZ2UuY29udGVudFxuICBpZiAobWVzc2FnZS5jaXRhdGlvbnMgJiYgbWVzc2FnZS5jaXRhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgIHRleHQgKz0gJ1xcblxcblNvdXJjZXM6J1xuICAgIGZvciAoY29uc3QgYyBvZiBtZXNzYWdlLmNpdGF0aW9ucykge1xuICAgICAgdGV4dCArPSBgXFxuLSAke2MudGl0bGV9ICgke2Muc291cmNlfSkke2Muc2NvcmUgPyBgIFskeyhjLnNjb3JlICogMTAwKS50b0ZpeGVkKDApfSUgbWF0Y2hdYCA6ICcnfWBcbiAgICB9XG4gIH1cbiAgdGV4dCArPSBgXFxuXFxuVGltZXN0YW1wOiAke21lc3NhZ2UudGltZXN0YW1wLnRvTG9jYWxlU3RyaW5nKCl9YFxuICByZXR1cm4gdGV4dFxufVxuLy8gQ29weSB0byBjbGlwYm9hcmQgd2l0aCBmYWxsYmFja1xuYXN5bmMgZnVuY3Rpb24gY29weVRvQ2xpcGJvYXJkKHRleHQ6IHN0cmluZykge1xuICBpZiAobmF2aWdhdG9yLmNsaXBib2FyZCkge1xuICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2sgZm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpXG4gICAgdGV4dGFyZWEudmFsdWUgPSB0ZXh0XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0YXJlYSlcbiAgICB0ZXh0YXJlYS5zZWxlY3QoKVxuICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5JylcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRleHRhcmVhKVxuICB9XG59XG5pbXBvcnQgeyBTZW5kLCBMb2FkZXIyLCBGaWxlVGV4dCwgU2VhcmNoLCBHbG9iZSwgUGFwZXJjbGlwLCBYLCBVcGxvYWQsIENoZWNrQ2lyY2xlLCBBbGVydENpcmNsZSwgTWF4aW1pemUyLCBNaW5pbWl6ZTIgfSBmcm9tICdsdWNpZGUtcmVhY3QnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJ1xuaW1wb3J0IHsgVGV4dGFyZWEgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvdGV4dGFyZWEnXG5pbXBvcnQgeyBDYXJkLCBDYXJkQ29udGVudCB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jYXJkJ1xuaW1wb3J0IHsgQmFkZ2UgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYmFkZ2UnXG5pbXBvcnQgeyBDb2xsYXBzaWJsZSwgQ29sbGFwc2libGVDb250ZW50LCBDb2xsYXBzaWJsZVRyaWdnZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvY29sbGFwc2libGUnXG5cbmludGVyZmFjZSBDaXRhdGlvbiB7XG4gIGlkOiBzdHJpbmdcbiAgdGl0bGU6IHN0cmluZ1xuICBjb250ZW50OiBzdHJpbmdcbiAgc291cmNlOiBzdHJpbmdcbiAgc2NvcmU/OiBudW1iZXJcbiAgcGFnZT86IG51bWJlclxufVxuXG5pbnRlcmZhY2UgVXBsb2FkZWRGaWxlIHtcbiAgc2Vzc2lvbklkOiBzdHJpbmdcbiAgZmlsZU5hbWU6IHN0cmluZ1xuICBmaWxlU2l6ZTogbnVtYmVyXG4gIHVwbG9hZFRpbWU6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgTWVzc2FnZSB7XG4gIGlkOiBzdHJpbmdcbiAgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCdcbiAgY29udGVudDogc3RyaW5nXG4gIGNpdGF0aW9ucz86IENpdGF0aW9uW11cbiAgc2VhcmNoVHlwZT86ICdkb2N1bWVudHMnIHwgJ3dlYicgfCAnaHlicmlkJyB8ICd0ZW1wLWRvYydcbiAgdXBsb2FkZWRGaWxlPzogVXBsb2FkZWRGaWxlXG4gIHRpbWVzdGFtcDogRGF0ZVxufVxuXG5pbnRlcmZhY2UgQ2hhdEludGVyZmFjZVByb3BzIHtcbiAgY29udmVyc2F0aW9uSWQ/OiBudW1iZXJcbiAgb25Db252ZXJzYXRpb25DcmVhdGVkPzogKGNvbnZlcnNhdGlvbklkOiBudW1iZXIpID0+IHZvaWRcbiAgb25Db252ZXJzYXRpb25BY3Rpdml0eT86IChjb252ZXJzYXRpb25JZDogbnVtYmVyKSA9PiB2b2lkXG59XG5cbmNvbnN0IEFMTE9XRURfRVhURU5TSU9OUyA9IFtcbiAgJy50eHQnLCAnLmxvZycsICcuY3N2JywgJy5qc29uJywgJy5zcWwnLCAnLnBkZicsXG4gICcueG1sJywgJy5jb25mJywgJy5jb25maWcnLCAnLmluaScsICcucHJvcGVydGllcycsXG4gICcub3V0JywgJy5lcnInLCAnLnRyYWNlJywgJy5kdW1wJywgJy5wbmcnLCAnLmpwZycsXG4gICcuanBlZycsICcuZ2lmJywgJy5ibXAnLCAnLnRpZmYnLCAnLndlYnAnXG5dXG5jb25zdCBNQVhfRklMRV9TSVpFID0gMTAgKiAxMDI0ICogMTAyNCAvLyAxME1CXG5cbmV4cG9ydCBmdW5jdGlvbiBDaGF0SW50ZXJmYWNlKHsgY29udmVyc2F0aW9uSWQsIG9uQ29udmVyc2F0aW9uQ3JlYXRlZCwgb25Db252ZXJzYXRpb25BY3Rpdml0eSB9OiBDaGF0SW50ZXJmYWNlUHJvcHMpIHtcbiAgY29uc3QgeyBhY2Nlc3NUb2tlbiB9ID0gdXNlQXV0aCgpXG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TWVzc2FnZVtdPihbXSlcbiAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSB1c2VTdGF0ZSgnJylcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbdXBsb2FkZWRGaWxlLCBzZXRVcGxvYWRlZEZpbGVdID0gdXNlU3RhdGU8VXBsb2FkZWRGaWxlIHwgbnVsbD4obnVsbClcbiAgY29uc3QgW2lzVXBsb2FkaW5nLCBzZXRJc1VwbG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW3VwbG9hZEVycm9yLCBzZXRVcGxvYWRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxuICBjb25zdCBbaXNEcmFnT3Zlciwgc2V0SXNEcmFnT3Zlcl0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW2lucHV0RXhwYW5kZWQsIHNldElucHV0RXhwYW5kZWRdID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IGZpbGVJbnB1dFJlZiA9IHVzZVJlZjxIVE1MSW5wdXRFbGVtZW50PihudWxsKVxuICBjb25zdCBjaGF0Q29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuICBjb25zdCBtZXNzYWdlc0NvbnRhaW5lclJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcbiAgY29uc3QgaXNJbml0aWFsU2Nyb2xsUmVmID0gdXNlUmVmKHRydWUpXG5cbiAgY29uc3Qgc2Nyb2xsVG9Cb3R0b20gPSAoYmVoYXZpb3I6IFNjcm9sbEJlaGF2aW9yID0gJ2F1dG8nKSA9PiB7XG4gICAgY29uc3QgZWwgPSBtZXNzYWdlc0NvbnRhaW5lclJlZi5jdXJyZW50XG4gICAgaWYgKGVsKSB7XG4gICAgICBlbC5zY3JvbGxUbyh7IHRvcDogZWwuc2Nyb2xsSGVpZ2h0LCBiZWhhdmlvciB9KVxuICAgIH1cbiAgfVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2Nyb2xsVG9Cb3R0b20oaXNJbml0aWFsU2Nyb2xsUmVmLmN1cnJlbnQgPyAnYXV0bycgOiAnc21vb3RoJylcbiAgICBpc0luaXRpYWxTY3JvbGxSZWYuY3VycmVudCA9IGZhbHNlXG4gIH0sIFttZXNzYWdlc10pXG5cbiAgY29uc3QgW2hpc3RvcnlMb2FkaW5nLCBzZXRIaXN0b3J5TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW2hpc3RvcnlFcnJvciwgc2V0SGlzdG9yeUVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpXG5cbiAgLy8gSGFuZGxlIGNvbnZlcnNhdGlvbiBjaGFuZ2VzIC0gbG9hZCBoaXN0b3J5IGZvciBleGlzdGluZyBjb252ZXJzYXRpb25zXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IGNhbmNlbGxlZCA9IGZhbHNlXG5cbiAgICBjb25zdCBsb2FkSGlzdG9yeSA9IGFzeW5jIChpZDogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoIWFjY2Vzc1Rva2VuKSB7XG4gICAgICAgIHNldEhpc3RvcnlFcnJvcignQXV0aGVudGljYXRpb24gcmVxdWlyZWQgdG8gbG9hZCBjb252ZXJzYXRpb24uJylcbiAgICAgICAgc2V0TWVzc2FnZXMoW10pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0SGlzdG9yeUxvYWRpbmcodHJ1ZSlcbiAgICAgICAgc2V0SGlzdG9yeUVycm9yKG51bGwpXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvY29udmVyc2F0aW9ucy8ke2lkfWAsIHtcbiAgICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gIH0sXG4gICAgICAgICAgY2FjaGU6ICduby1zdG9yZScsXG4gICAgICAgIH0pXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICAgIHNldEhpc3RvcnlFcnJvcignQ29udmVyc2F0aW9uIG5vdCBmb3VuZC4nKVxuICAgICAgICAgICAgc2V0TWVzc2FnZXMoW10pXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZGV0YWlsID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpLmNhdGNoKCgpID0+ICcnKVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkZXRhaWwgfHwgYEZhaWxlZCB0byBsb2FkIGNvbnZlcnNhdGlvbiAoc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfSlgKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgICAgaWYgKGNhbmNlbGxlZCkgcmV0dXJuXG4gICAgICAgIGNvbnN0IG1hcHBlZDogTWVzc2FnZVtdID0gQXJyYXkuaXNBcnJheShkYXRhPy5tZXNzYWdlcylcbiAgICAgICAgICA/IGRhdGEubWVzc2FnZXMubWFwKChtc2c6IGFueSkgPT4gKHtcbiAgICAgICAgICAgICAgaWQ6IFN0cmluZyhtc2cuaWQpLFxuICAgICAgICAgICAgICByb2xlOiBtc2cucm9sZSA9PT0gJ2Fzc2lzdGFudCcgPyAnYXNzaXN0YW50JyA6ICd1c2VyJyxcbiAgICAgICAgICAgICAgY29udGVudDogbXNnLmNvbnRlbnQgPz8gJycsXG4gICAgICAgICAgICAgIGNpdGF0aW9uczogQXJyYXkuaXNBcnJheShtc2cuY2l0YXRpb25zKSA/IG1zZy5jaXRhdGlvbnMgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIHNlYXJjaFR5cGU6IG1zZy5zZWFyY2hUeXBlID8/IG1zZy5tZXRob2QsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUobXNnLmNyZWF0ZWRBdCA/PyBtc2cuY3JlYXRlZF9hdCA/PyBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkpLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgOiBbXVxuICAgICAgICBzZXRNZXNzYWdlcyhtYXBwZWQpXG4gICAgICAgIHNldFVwbG9hZGVkRmlsZShudWxsKVxuICAgICAgICBzZXRVcGxvYWRFcnJvcihudWxsKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKCFjYW5jZWxsZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBjb252ZXJzYXRpb24gaGlzdG9yeTonLCBlcnJvcilcbiAgICAgICAgICBzZXRIaXN0b3J5RXJyb3IoJ1VuYWJsZSB0byBsb2FkIGNvbnZlcnNhdGlvbiBoaXN0b3J5LicpXG4gICAgICAgICAgc2V0TWVzc2FnZXMoW10pXG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmICghY2FuY2VsbGVkKSB7XG4gICAgICAgICAgc2V0SGlzdG9yeUxvYWRpbmcoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29udmVyc2F0aW9uSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgc2V0TWVzc2FnZXMoW10pXG4gICAgICBzZXRJbnB1dCgnJylcbiAgICAgIHNldFVwbG9hZGVkRmlsZShudWxsKVxuICAgICAgc2V0VXBsb2FkRXJyb3IobnVsbClcbiAgICAgIHNldEhpc3RvcnlFcnJvcihudWxsKVxuICAgICAgc2V0SGlzdG9yeUxvYWRpbmcoZmFsc2UpXG4gICAgfSBlbHNlIHtcbiAgICAgIGxvYWRIaXN0b3J5KGNvbnZlcnNhdGlvbklkKVxuICAgIH1cblxuICAgIGlzSW5pdGlhbFNjcm9sbFJlZi5jdXJyZW50ID0gdHJ1ZVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNhbmNlbGxlZCA9IHRydWVcbiAgICB9XG4gIH0sIFtjb252ZXJzYXRpb25JZCwgYWNjZXNzVG9rZW5dKVxuXG4gIGNvbnN0IHZhbGlkYXRlRmlsZSA9IChmaWxlOiBGaWxlKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gICAgaWYgKGZpbGUuc2l6ZSA+IE1BWF9GSUxFX1NJWkUpIHtcbiAgICAgIHJldHVybiBgRmlsZSBzaXplIGV4Y2VlZHMgJHtNQVhfRklMRV9TSVpFIC8gMTAyNCAvIDEwMjR9TUIgbGltaXRgXG4gICAgfVxuXG4gICAgY29uc3QgZXh0ZW5zaW9uID0gZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyaW5nKGZpbGUubmFtZS5sYXN0SW5kZXhPZignLicpKVxuICAgIGlmICghQUxMT1dFRF9FWFRFTlNJT05TLmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcbiAgICAgIHJldHVybiBgRmlsZSB0eXBlIG5vdCBzdXBwb3J0ZWQuIEFsbG93ZWQ6ICR7QUxMT1dFRF9FWFRFTlNJT05TLmpvaW4oJywgJyl9YFxuICAgIH1cblxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBjb25zdCBoYW5kbGVGaWxlVXBsb2FkID0gYXN5bmMgKGZpbGU6IEZpbGUpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3IgPSB2YWxpZGF0ZUZpbGUoZmlsZSlcbiAgICBpZiAodmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICBzZXRVcGxvYWRFcnJvcih2YWxpZGF0aW9uRXJyb3IpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBzZXRJc1VwbG9hZGluZyh0cnVlKVxuICAgIHNldFVwbG9hZEVycm9yKG51bGwpXG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKVxuICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSlcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS90ZW1wLXVwbG9hZCcsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgICAgICBoZWFkZXJzOiBhY2Nlc3NUb2tlbiA/IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAgfSA6IHVuZGVmaW5lZFxuICAgICAgfSlcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG5cbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5lcnJvciB8fCAnVXBsb2FkIGZhaWxlZCcpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVwbG9hZGVkRmlsZTogVXBsb2FkZWRGaWxlID0ge1xuICAgICAgICBzZXNzaW9uSWQ6IHJlc3VsdC5zZXNzaW9uSWQsXG4gICAgICAgIGZpbGVOYW1lOiByZXN1bHQuZmlsZU5hbWUsXG4gICAgICAgIGZpbGVTaXplOiByZXN1bHQuZmlsZVNpemUsXG4gICAgICAgIHVwbG9hZFRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfVxuXG4gICAgICBzZXRVcGxvYWRlZEZpbGUodXBsb2FkZWRGaWxlKVxuXG4gICAgICAvLyBBZGQgYSBzeXN0ZW0gbWVzc2FnZSBhYm91dCB0aGUgdXBsb2FkXG4gICAgICBjb25zdCBzeXN0ZW1NZXNzYWdlOiBNZXNzYWdlID0ge1xuICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgY29udGVudDogYOKchSAqKkZpbGUgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5OioqICR7ZmlsZS5uYW1lfSAoJHtmb3JtYXRGaWxlU2l6ZShmaWxlLnNpemUpfSlcXG5cXG5Zb3UgY2FuIG5vdyBhc2sgcXVlc3Rpb25zIGFib3V0IHRoaXMgZG9jdW1lbnQuIEknbGwgYW5hbHl6ZSBpdHMgY29udGVudCB0byBwcm92aWRlIHNwZWNpZmljIGluc2lnaHRzIGFuZCB0cm91Ymxlc2hvb3RpbmcgYXNzaXN0YW5jZS5gLFxuICAgICAgICBzZWFyY2hUeXBlOiAndGVtcC1kb2MnLFxuICAgICAgICB1cGxvYWRlZEZpbGU6IHVwbG9hZGVkRmlsZSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICB9XG5cbiAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIHN5c3RlbU1lc3NhZ2VdKVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1VwbG9hZCBlcnJvcjonLCBlcnJvcilcbiAgICAgIHNldFVwbG9hZEVycm9yKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1VwbG9hZCBmYWlsZWQnKVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc1VwbG9hZGluZyhmYWxzZSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYW5kbGVGaWxlU2VsZWN0ID0gKGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IGZpbGVzID0gZXZlbnQudGFyZ2V0LmZpbGVzXG4gICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGhhbmRsZUZpbGVVcGxvYWQoZmlsZXNbMF0pXG4gICAgfVxuICB9XG5cbiAgY29uc3QgY2xlYXJVcGxvYWRlZEZpbGUgPSAoKSA9PiB7XG4gICAgc2V0VXBsb2FkZWRGaWxlKG51bGwpXG4gICAgc2V0VXBsb2FkRXJyb3IobnVsbClcbiAgICBpZiAoZmlsZUlucHV0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGZpbGVJbnB1dFJlZi5jdXJyZW50LnZhbHVlID0gJydcbiAgICB9XG4gIH1cblxuICBjb25zdCBmb3JtYXRGaWxlU2l6ZSA9IChieXRlczogbnVtYmVyKSA9PiB7XG4gICAgaWYgKGJ5dGVzID09PSAwKSByZXR1cm4gJzAgQnl0ZXMnXG4gICAgY29uc3QgayA9IDEwMjRcbiAgICBjb25zdCBzaXplcyA9IFsnQnl0ZXMnLCAnS0InLCAnTUInXVxuICAgIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ5dGVzKSAvIE1hdGgubG9nKGspKVxuICAgIHJldHVybiBwYXJzZUZsb2F0KChieXRlcyAvIE1hdGgucG93KGssIGkpKS50b0ZpeGVkKDEpKSArICcgJyArIHNpemVzW2ldXG4gIH1cblxuICAvLyBEcmFnIGFuZCBkcm9wIGhhbmRsZXJzXG4gIGNvbnN0IGhhbmRsZURyYWdFbnRlciA9IChlOiBSZWFjdC5EcmFnRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgc2V0SXNEcmFnT3Zlcih0cnVlKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlRHJhZ0xlYXZlID0gKGU6IFJlYWN0LkRyYWdFdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAvLyBPbmx5IHNldCBpc0RyYWdPdmVyIHRvIGZhbHNlIGlmIHdlJ3JlIGxlYXZpbmcgdGhlIGNoYXQgY29udGFpbmVyXG4gICAgaWYgKCFjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQ/LmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCBhcyBOb2RlKSkge1xuICAgICAgc2V0SXNEcmFnT3ZlcihmYWxzZSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYW5kbGVEcmFnT3ZlciA9IChlOiBSZWFjdC5EcmFnRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gIH1cblxuICBjb25zdCBoYW5kbGVEcm9wID0gKGU6IFJlYWN0LkRyYWdFdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBzZXRJc0RyYWdPdmVyKGZhbHNlKVxuXG4gICAgY29uc3QgZmlsZXMgPSBlLmRhdGFUcmFuc2Zlci5maWxlc1xuICAgIGlmIChmaWxlcyAmJiBmaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICBoYW5kbGVGaWxlVXBsb2FkKGZpbGVzWzBdKVxuICAgIH1cbiAgfVxuXG4gIC8vIFRvYXN0IHN0YXRlIGZvciBjb3B5IGZlZWRiYWNrXG4gIGNvbnN0IFt0b2FzdE9wZW4sIHNldFRvYXN0T3Blbl0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW3RvYXN0TXNnLCBzZXRUb2FzdE1zZ10gPSB1c2VTdGF0ZSgnJylcblxuICAvLyBBZGQgZ2xvYmFsIGRyYWcgZXZlbnQgbGlzdGVuZXJzIHRvIGRldGVjdCBkcmFnIGVudGVyL2xlYXZlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlR2xvYmFsRHJhZ0VudGVyID0gKGU6IERyYWdFdmVudCkgPT4ge1xuICAgICAgaWYgKGUuZGF0YVRyYW5zZmVyPy50eXBlcy5pbmNsdWRlcygnRmlsZXMnKSkge1xuICAgICAgICBzZXRJc0RyYWdPdmVyKHRydWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlR2xvYmFsRHJhZ0xlYXZlID0gKGU6IERyYWdFdmVudCkgPT4ge1xuICAgICAgLy8gT25seSBoaWRlIGRyYWcgb3ZlcmxheSBpZiB3ZSdyZSBsZWF2aW5nIHRoZSB3aW5kb3dcbiAgICAgIGlmIChlLmNsaWVudFggPT09IDAgJiYgZS5jbGllbnRZID09PSAwKSB7XG4gICAgICAgIHNldElzRHJhZ092ZXIoZmFsc2UpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgaGFuZGxlR2xvYmFsRHJhZ0VudGVyKVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIGhhbmRsZUdsb2JhbERyYWdMZWF2ZSlcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCBoYW5kbGVHbG9iYWxEcmFnRW50ZXIpXG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBoYW5kbGVHbG9iYWxEcmFnTGVhdmUpXG4gICAgfVxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcmF3SW5wdXQgPSBpbnB1dC50cmltKClcbiAgICBpZiAoIXJhd0lucHV0IHx8IGlzTG9hZGluZykgcmV0dXJuXG4gICAgaWYgKCFhY2Nlc3NUb2tlbikge1xuICAgICAgc2V0VG9hc3RNc2coJ1BsZWFzZSBzaWduIGluIHRvIGNoYXQuJylcbiAgICAgIHNldFRvYXN0T3Blbih0cnVlKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgY29tbWFuZE1hdGNoID0gcmF3SW5wdXQubWF0Y2goL15cXC8obmV3fHVwZGF0ZXxjbG9zZSlcXHMrY2FzZVxccysoLispJC9pKVxuICAgIGxldCBkaXNwbGF5Q29udGVudCA9IHJhd0lucHV0XG4gICAgbGV0IG91dGJvdW5kQ29udGVudCA9IHJhd0lucHV0XG5cbiAgICBpZiAoY29tbWFuZE1hdGNoKSB7XG4gICAgICBjb25zdCBhY3Rpb24gPSBjb21tYW5kTWF0Y2hbMV0udG9Mb3dlckNhc2UoKVxuICAgICAgY29uc3QgY2FzZU51bWJlciA9IGNvbW1hbmRNYXRjaFsyXS50cmltKClcbiAgICAgIGlmICghY2FzZU51bWJlcikge1xuICAgICAgICBzZXRUb2FzdE1zZygnUGxlYXNlIHByb3ZpZGUgYSBjYXNlIG51bWJlciwgZS5nLiAvbmV3IGNhc2UgMDExMjUwNTInKVxuICAgICAgICBzZXRUb2FzdE9wZW4odHJ1ZSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmIChhY3Rpb24gPT09ICduZXcnKSB7XG4gICAgICAgIGRpc3BsYXlDb250ZW50ID0gYPCfk4QgSW5pdGlhdGluZyBTYWxlc2ZvcmNlIGNhc2UgJHtjYXNlTnVtYmVyfWBcbiAgICAgICAgb3V0Ym91bmRDb250ZW50ID0gYFlvdSBhcmUgYXNzaXN0aW5nIHdpdGggU2FsZXNmb3JjZSBjYXNlICR7Y2FzZU51bWJlcn0uIFVzaW5nIHRoZSBjb252ZXJzYXRpb24gY29udGV4dCwgZGVmaW5lIHRoZSBjYXNlIGZvciBhbmFseXNpcyBhbmQgcmVjb21tZW5kYXRpb24gYnkgcHJvdmlkaW5nOlxcbi0gQSBjb25jaXNlIGNhc2Ugb3ZlcnZpZXcgd2l0aCBpbXBvcnRhbnQgZmFjdHMga25vd24gc28gZmFyLlxcbi0gSW1tZWRpYXRlIGRpYWdub3N0aWMgb3IgdHJpYWdlIHN0ZXBzIHRvIHBlcmZvcm0uXFxuLSBDbGFyaWZ5aW5nIHF1ZXN0aW9ucyB0aGF0IHNob3VsZCBiZSBhc2tlZCBvZiB0aGUgY3VzdG9tZXIuXFxuLSBSZWNvbW1lbmRlZCBuZXh0IGFjdGlvbnMgZm9yIGVuZ2luZWVyaW5nL3N1cHBvcnQgdGVhbXMuXFxuUmV0dXJuIHRoZSByZXNwb25zZSB3aXRoIGhlYWRpbmdzOiBDYXNlIE92ZXJ2aWV3LCBJbW1lZGlhdGUgQWN0aW9ucywgQ2xhcmlmeWluZyBRdWVzdGlvbnMsIFJlY29tbWVuZGVkIE5leHQgU3RlcHMuYFxuICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICd1cGRhdGUnKSB7XG4gICAgICAgIGRpc3BsYXlDb250ZW50ID0gYPCfm6DvuI8gVXBkYXRpbmcgU2FsZXNmb3JjZSBjYXNlICR7Y2FzZU51bWJlcn1gXG4gICAgICAgIG91dGJvdW5kQ29udGVudCA9IGBZb3UgYXJlIHByb3ZpZGluZyBhbiB1cGRhdGUgb24gU2FsZXNmb3JjZSBjYXNlICR7Y2FzZU51bWJlcn0uIFJldmlldyB0aGUgY29udmVyc2F0aW9uIGNvbnRleHQgYW5kIHByb2R1Y2U6XFxuLSBUaGUgY3VycmVudCBzdGF0dXMvcHJvZ3Jlc3Mgb2YgdGhlIGNhc2UuXFxuLSBPdXRzdGFuZGluZyBpc3N1ZXMgb3IgYmxvY2tlcnMuXFxuLSBSZWNvbW1lbmRlZCBuZXh0IHN0ZXBzIGZvciB0aGUgc3VwcG9ydCBlbmdpbmVlci5cXG4tIFN1Z2dlc3RlZCBjdXN0b21lciBjb21tdW5pY2F0aW9uIHBvaW50cy5cXG5SZXR1cm4gdGhlIHJlc3BvbnNlIHdpdGggaGVhZGluZ3M6IENhc2UgU3RhdHVzLCBPdXRzdGFuZGluZyBJdGVtcywgUmVjb21tZW5kZWQgQWN0aW9ucywgQ3VzdG9tZXIgQ29tbXVuaWNhdGlvbi5gXG4gICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2Nsb3NlJykge1xuICAgICAgICBkaXNwbGF5Q29udGVudCA9IGDinIUgQ2xvc2luZyBTYWxlc2ZvcmNlIGNhc2UgJHtjYXNlTnVtYmVyfWBcbiAgICAgICAgb3V0Ym91bmRDb250ZW50ID0gYFlvdSBhcmUgcHJlcGFyaW5nIHRvIGNsb3NlIFNhbGVzZm9yY2UgY2FzZSAke2Nhc2VOdW1iZXJ9LiBCYXNlZCBvbiB0aGUgY29udmVyc2F0aW9uIGNvbnRleHQsIHByb3ZpZGU6XFxuLSBBIGJyaWVmIGluY2lkZW50IHN1bW1hcnkuXFxuLSBBY3Rpb25zIHRha2VuIGFuZCByZXNvbHV0aW9ucyBhcHBsaWVkLlxcbi0gVmVyaWZpY2F0aW9uIHN0ZXBzIG9yIGZpbmFsIGNoZWNrcyBjb21wbGV0ZWQvbmVlZGVkLlxcbi0gRmluYWwgY2xvc2luZyBjb21tZW50cyBmb3IgdGhlIGN1c3RvbWVyLlxcblJldHVybiB0aGUgcmVzcG9uc2Ugd2l0aCBoZWFkaW5nczogU3VtbWFyeSwgQWN0aW9ucyBUYWtlbiwgVmVyaWZpY2F0aW9uLCBDbG9zaW5nIENvbW1lbnRzLmBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB1c2VyTWVzc2FnZTogTWVzc2FnZSA9IHtcbiAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICByb2xlOiAndXNlcicsXG4gICAgICBjb250ZW50OiBkaXNwbGF5Q29udGVudCxcbiAgICAgIHVwbG9hZGVkRmlsZTogdXBsb2FkZWRGaWxlIHx8IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgIH1cblxuICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIHVzZXJNZXNzYWdlXSlcbiAgICBjb25zdCBjdXJyZW50SW5wdXQgPSBvdXRib3VuZENvbnRlbnRcbiAgICBzZXRJbnB1dCgnJylcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSlcblxuICAgIHRyeSB7XG4gICAgICAvLyBJZiB0aGVyZSdzIGFuIHVwbG9hZGVkIGZpbGUsIGFuYWx5emUgaXQgdXNpbmcgdGVtcC1hbmFseXplIGVuZHBvaW50XG4gICAgICBpZiAodXBsb2FkZWRGaWxlKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvdGVtcC1hbmFseXplJywge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAuLi4oYWNjZXNzVG9rZW4gPyB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gIH0gOiB7fSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHNlc3Npb25JZDogdXBsb2FkZWRGaWxlLnNlc3Npb25JZCxcbiAgICAgICAgICAgIHF1ZXJ5OiBjdXJyZW50SW5wdXQsXG4gICAgICAgICAgICBtYXhSZXN1bHRzOiA1XG4gICAgICAgICAgfSksXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCBlcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG5cbiAgICAgICAgY29uc3QgYXNzaXN0YW50TWVzc2FnZTogTWVzc2FnZSA9IHtcbiAgICAgICAgICBpZDogKERhdGUubm93KCkgKyAxKS50b1N0cmluZygpLFxuICAgICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICAgIGNvbnRlbnQ6IHJlc3VsdC5yZXNwb25zZSxcbiAgICAgICAgICBjaXRhdGlvbnM6IHJlc3VsdC5yZXN1bHRzPy5tYXAoKHI6IGFueSwgaWR4OiBudW1iZXIpID0+ICh7XG4gICAgICAgICAgICBpZDogYHRlbXAtJHtpZHh9YCxcbiAgICAgICAgICAgIHRpdGxlOiBgU2VjdGlvbiAke3IucmFua31gLFxuICAgICAgICAgICAgY29udGVudDogci5jb250ZW50LFxuICAgICAgICAgICAgc291cmNlOiB1cGxvYWRlZEZpbGUuZmlsZU5hbWUsXG4gICAgICAgICAgICBzY29yZTogci5zaW1pbGFyaXR5XG4gICAgICAgICAgfSkpLFxuICAgICAgICAgIHNlYXJjaFR5cGU6ICd0ZW1wLWRvYycsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICAgIH1cblxuICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBhc3Npc3RhbnRNZXNzYWdlXSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIFJlZ3VsYXIgY2hhdCB3aXRob3V0IHVwbG9hZGVkIGZpbGVcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvY2hhdCcsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgICBtZXNzYWdlOiBjdXJyZW50SW5wdXQsXG4gICAgICAgICAgZGlzcGxheU1lc3NhZ2U6IHVzZXJNZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgIH0pLFxuICAgICAgfSlcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YClcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keT8uZ2V0UmVhZGVyKClcbiAgICAgIGlmICghcmVhZGVyKSB0aHJvdyBuZXcgRXJyb3IoJ05vIHJlc3BvbnNlIGJvZHknKVxuXG4gICAgICBsZXQgYXNzaXN0YW50TWVzc2FnZTogTWVzc2FnZSA9IHtcbiAgICAgICAgaWQ6IChEYXRlLm5vdygpICsgMSkudG9TdHJpbmcoKSxcbiAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgIGNvbnRlbnQ6ICcnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICAgIH1cbiAgICAgIGxldCByZXNvbHZlZENvbnZlcnNhdGlvbklkOiBudW1iZXIgfCB1bmRlZmluZWQgPSBjb252ZXJzYXRpb25JZFxuXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBhc3Npc3RhbnRNZXNzYWdlXSlcblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKVxuICAgICAgICBpZiAoZG9uZSkgYnJlYWtcblxuICAgICAgICBjb25zdCBjaHVuayA9IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZSh2YWx1ZSlcbiAgICAgICAgY29uc3QgbGluZXMgPSBjaHVuay5zcGxpdCgnXFxuJylcblxuICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgICAgICBpZiAobGluZS5zdGFydHNXaXRoKCdkYXRhOiAnKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UobGluZS5zbGljZSg2KSlcblxuICAgICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSAndG9rZW4nKSB7XG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIHN0cmVhbWluZyB0b2tlbnMgZnJvbSB0aGUgYmFja2VuZFxuICAgICAgICAgICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gcHJldi5tYXAobSA9PlxuICAgICAgICAgICAgICAgICAgbS5pZCA9PT0gYXNzaXN0YW50TWVzc2FnZS5pZFxuICAgICAgICAgICAgICAgICAgICA/IHsgLi4ubSwgY29udGVudDogbS5jb250ZW50ICsgZGF0YS50b2tlbiB9XG4gICAgICAgICAgICAgICAgICAgIDogbVxuICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc291cmNlcycpIHtcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgc291cmNlcy9jaXRhdGlvbnNcbiAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG0gPT5cbiAgICAgICAgICAgICAgICAgIG0uaWQgPT09IGFzc2lzdGFudE1lc3NhZ2UuaWRcbiAgICAgICAgICAgICAgICAgICAgPyB7IC4uLm0sIGNpdGF0aW9uczogZGF0YS5zb3VyY2VzLCBzZWFyY2hUeXBlOiBkYXRhLm1ldGhvZCB9XG4gICAgICAgICAgICAgICAgICAgIDogbVxuICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY29udmVyc2F0aW9uX2lkJykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YS5jb252ZXJzYXRpb25JZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgIHJlc29sdmVkQ29udmVyc2F0aW9uSWQgPSBkYXRhLmNvbnZlcnNhdGlvbklkXG4gICAgICAgICAgICAgICAgICBpZiAoY29udmVyc2F0aW9uSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBvbkNvbnZlcnNhdGlvbkNyZWF0ZWQ/LihkYXRhLmNvbnZlcnNhdGlvbklkKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdkb25lJykge1xuICAgICAgICAgICAgICAgIC8vIFN0cmVhbWluZyBjb21wbGV0ZWRcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3RyZWFtaW5nIGNvbXBsZXRlZCcpXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignU3RyZWFtaW5nIGVycm9yOicsIGRhdGEuZXJyb3IpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgLy8gSWdub3JlIG1hbGZvcm1lZCBKU09OXG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHBhcnNlIHN0cmVhbWluZyBkYXRhOicsIGxpbmUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXNvbHZlZENvbnZlcnNhdGlvbklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb25Db252ZXJzYXRpb25BY3Rpdml0eT8uKHJlc29sdmVkQ29udmVyc2F0aW9uSWQpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NoYXQgZXJyb3I6JywgZXJyb3IpXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICAgIGlkOiAoRGF0ZS5ub3coKSArIDEpLnRvU3RyaW5nKCksXG4gICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICBjb250ZW50OiAnU29ycnksIEkgZW5jb3VudGVyZWQgYW4gZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4uJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICB9XG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBlcnJvck1lc3NhZ2VdKVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZ2V0U2VhcmNoSWNvbiA9IChzZWFyY2hUeXBlPzogc3RyaW5nKSA9PiB7XG4gICAgc3dpdGNoIChzZWFyY2hUeXBlKSB7XG4gICAgICBjYXNlICdkb2N1bWVudHMnOiByZXR1cm4gPEZpbGVUZXh0IGNsYXNzTmFtZT1cImgtMyB3LTNcIiAvPlxuICAgICAgY2FzZSAnd2ViJzogcmV0dXJuIDxHbG9iZSBjbGFzc05hbWU9XCJoLTMgdy0zXCIgLz5cbiAgICAgIGNhc2UgJ2h5YnJpZCc6IHJldHVybiA8U2VhcmNoIGNsYXNzTmFtZT1cImgtMyB3LTNcIiAvPlxuICAgICAgY2FzZSAndGVtcC1kb2MnOiByZXR1cm4gPFVwbG9hZCBjbGFzc05hbWU9XCJoLTMgdy0zXCIgLz5cbiAgICAgIGRlZmF1bHQ6IHJldHVybiA8U2VhcmNoIGNsYXNzTmFtZT1cImgtMyB3LTNcIiAvPlxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGdldFNlYXJjaExhYmVsID0gKHNlYXJjaFR5cGU/OiBzdHJpbmcpID0+IHtcbiAgICBzd2l0Y2ggKHNlYXJjaFR5cGUpIHtcbiAgICAgIGNhc2UgJ2RvY3VtZW50cyc6IHJldHVybiAnRG9jdW1lbnQgU2VhcmNoJ1xuICAgICAgY2FzZSAnd2ViJzogcmV0dXJuICdXZWIgU2VhcmNoJ1xuICAgICAgY2FzZSAnaHlicmlkJzogcmV0dXJuICdIeWJyaWQgU2VhcmNoJ1xuICAgICAgY2FzZSAndGVtcC1kb2MnOiByZXR1cm4gJ1VwbG9hZGVkIERvY3VtZW50J1xuICAgICAgZGVmYXVsdDogcmV0dXJuICdTZWFyY2gnXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICByZWY9e2NoYXRDb250YWluZXJSZWZ9XG4gICAgICBjbGFzc05hbWU9XCJmbGV4IGgtZnVsbCBtaW4taC0wIGZsZXgtY29sIHJlbGF0aXZlXCJcbiAgICAgIG9uRHJhZ0VudGVyPXtoYW5kbGVEcmFnRW50ZXJ9XG4gICAgICBvbkRyYWdMZWF2ZT17aGFuZGxlRHJhZ0xlYXZlfVxuICAgICAgb25EcmFnT3Zlcj17aGFuZGxlRHJhZ092ZXJ9XG4gICAgICBvbkRyb3A9e2hhbmRsZURyb3B9XG4gICAgPlxuICAgICAgey8qIERyYWcgT3ZlcmxheSAqL31cbiAgICAgIHtpc0RyYWdPdmVyICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIHotNTAgYmctYmx1ZS01MDAvMTAgYmFja2Ryb3AtYmx1ci1zbSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBib3JkZXItMiBib3JkZXItZGFzaGVkIGJvcmRlci1ibHVlLTUwMFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgcC04IGJnLXdoaXRlLzkwIHJvdW5kZWQtbGcgc2hhZG93LWxnXCI+XG4gICAgICAgICAgICA8VXBsb2FkIGNsYXNzTmFtZT1cImgtMTIgdy0xMiBteC1hdXRvIHRleHQtYmx1ZS01MDAgbWItNFwiIC8+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkIHRleHQtYmx1ZS05MDAgbWItMlwiPkRyb3AgZmlsZSB0byBhbmFseXplPC9oMz5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtYmx1ZS03MDBcIj5cbiAgICAgICAgICAgICAgU3VwcG9ydHMgbG9ncywgY29uZmlncywgUERGcywgaW1hZ2VzLCBhbmQgbW9yZVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWJsdWUtNjAwIG10LTJcIj5cbiAgICAgICAgICAgICAgQUkgd2lsbCBhbmFseXplIHlvdXIgZG9jdW1lbnQgd2l0aCBUZWNobmljYWwgU2VydmljZSBBc3Npc3RhbnQgZXhwZXJ0aXNlXG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIE1lc3NhZ2VzICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbWluLWgtMCBvdmVyZmxvdy15LWF1dG8gcC00IHNwYWNlLXktNFwiPlxuICAgICAgICB7aGlzdG9yeUxvYWRpbmcgJiYgbWVzc2FnZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIHB5LThcIj5cbiAgICAgICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtMTAgdy0xMCBteC1hdXRvIG1iLTQgYW5pbWF0ZS1zcGluXCIgLz5cbiAgICAgICAgICAgIDxwPkxvYWRpbmcgY29udmVyc2F0aW9uLi4uPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogaGlzdG9yeUVycm9yICYmIG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtcmVkLTUwMCBweS04XCI+XG4gICAgICAgICAgICA8QWxlcnRDaXJjbGUgY2xhc3NOYW1lPVwiaC0xMCB3LTEwIG14LWF1dG8gbWItNFwiIC8+XG4gICAgICAgICAgICA8cD57aGlzdG9yeUVycm9yfTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCBweS04XCI+XG4gICAgICAgICAgICA8U2VhcmNoIGNsYXNzTmFtZT1cImgtMTIgdy0xMiBteC1hdXRvIG1iLTQgb3BhY2l0eS01MFwiIC8+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LW1lZGl1bSBtYi0yXCI+U3RhcnQgYSBjb252ZXJzYXRpb248L2gzPlxuICAgICAgICAgICAgPHA+QXNrIHF1ZXN0aW9ucyBhYm91dCB5b3VyIGRvY3VtZW50cyBvciBhbnkgdG9waWMuPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogbnVsbH1cblxuICAgICAgICB7bWVzc2FnZXMubWFwKChtZXNzYWdlKSA9PiAoXG4gICAgICAgICAgPGRpdiBrZXk9e21lc3NhZ2UuaWR9IGNsYXNzTmFtZT17YGZsZXggJHttZXNzYWdlLnJvbGUgPT09ICd1c2VyJyA/ICdqdXN0aWZ5LWVuZCcgOiAnanVzdGlmeS1zdGFydCd9YH0+XG4gICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BtYXgtdy1bODAlXSAke21lc3NhZ2Uucm9sZSA9PT0gJ3VzZXInID8gJ2JnLXByaW1hcnkgdGV4dC1wcmltYXJ5LWZvcmVncm91bmQnIDogJ2JnLW11dGVkJ30gcm91bmRlZC1sZyBwLTQgcmVsYXRpdmVgfT5cbiAgICAgICAgICAgICAgIDxNZXNzYWdlUmVuZGVyZXIgY29udGVudD17bWVzc2FnZS5jb250ZW50fSAvPlxuICAgICAgICAgICAgICB7LyogQ29weSBidXR0b24gZm9yIGFzc2lzdGFudCBtZXNzYWdlcyAqL31cbiAgICAgICAgICAgICAge21lc3NhZ2Uucm9sZSA9PT0gJ2Fzc2lzdGFudCcgJiYgKFxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0yIHJpZ2h0LTIgcC0xIHJvdW5kZWQgaG92ZXI6YmctYWNjZW50IGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nXCJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPVwiQ29weSByZXNwb25zZVwiXG4gICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiQ29weSByZXNwb25zZVwiXG4gICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImNvcHktYnRuXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb3B5VG9DbGlwYm9hcmQoZm9ybWF0TWVzc2FnZUZvckNvcHkobWVzc2FnZSkpXG4gICAgICAgICAgICAgICAgICAgICAgc2V0VG9hc3RNc2coJ0NvcGllZCB0byBjbGlwYm9hcmQhJylcbiAgICAgICAgICAgICAgICAgICAgICBzZXRUb2FzdE9wZW4odHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgIHNldFRvYXN0TXNnKCdDb3B5IGZhaWxlZCcpXG4gICAgICAgICAgICAgICAgICAgICAgc2V0VG9hc3RPcGVuKHRydWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPENvcHkgY2xhc3NOYW1lPVwiaC00IHctNCB0ZXh0LW11dGVkLWZvcmVncm91bmRcIiAvPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7bWVzc2FnZS5jaXRhdGlvbnMgJiYgbWVzc2FnZS5jaXRhdGlvbnMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zIHB0LTMgYm9yZGVyLXQgYm9yZGVyLWJvcmRlci8yMFwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgIHtnZXRTZWFyY2hJY29uKG1lc3NhZ2Uuc2VhcmNoVHlwZSl9XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgZm9udC1tZWRpdW1cIj57Z2V0U2VhcmNoTGFiZWwobWVzc2FnZS5zZWFyY2hUeXBlKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxCYWRnZSB2YXJpYW50PVwic2Vjb25kYXJ5XCIgY2xhc3NOYW1lPVwidGV4dC14c1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLmNpdGF0aW9ucy5sZW5ndGh9IHNvdXJjZXttZXNzYWdlLmNpdGF0aW9ucy5sZW5ndGggIT09IDEgPyAncycgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPENvbGxhcHNpYmxlPlxuICAgICAgICAgICAgICAgICAgICA8Q29sbGFwc2libGVUcmlnZ2VyIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIGhvdmVyOnRleHQtZm9yZWdyb3VuZCB0cmFuc2l0aW9uLWNvbG9yc1wiPlxuICAgICAgICAgICAgICAgICAgICAgIFNob3cgc291cmNlcyDihpNcbiAgICAgICAgICAgICAgICAgICAgPC9Db2xsYXBzaWJsZVRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgIDxDb2xsYXBzaWJsZUNvbnRlbnQgY2xhc3NOYW1lPVwibXQtMiBzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5jaXRhdGlvbnMubWFwKChjaXRhdGlvbiwgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2FyZCBrZXk9e2lkeH0gY2xhc3NOYW1lPVwidGV4dC14c1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPVwicC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LW1lZGl1bSBtYi0xXCI+e2NpdGF0aW9uLnRpdGxlfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1tdXRlZC1mb3JlZ3JvdW5kIG1iLTIgbGluZS1jbGFtcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2l0YXRpb24uY29udGVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+e2NpdGF0aW9uLnNvdXJjZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2l0YXRpb24uc2NvcmUgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD1cIm91dGxpbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KGNpdGF0aW9uLnNjb3JlICogMTAwKS50b0ZpeGVkKDApfSUgbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CYWRnZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgIDwvQ29sbGFwc2libGVDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9Db2xsYXBzaWJsZT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgICAge2hpc3RvcnlMb2FkaW5nICYmIG1lc3NhZ2VzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC14cyB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5VcGRhdGluZyBjb252ZXJzYXRpb27igKY8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7aXNMb2FkaW5nICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1zdGFydFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1tdXRlZCByb3VuZGVkLWxnIHAtNFwiPlxuICAgICAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJoLTQgdy00IGFuaW1hdGUtc3BpblwiIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICA8ZGl2IHJlZj17bWVzc2FnZXNFbmRSZWZ9IC8+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIElucHV0ICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItdCBiZy1iYWNrZ3JvdW5kIHAtNFwiPlxuICAgICAgICB7LyogRmlsZSBVcGxvYWQgQXJlYSAqL31cbiAgICAgICAge3VwbG9hZGVkRmlsZSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi0zIHAtMyBiZy1ncmVlbi01MCBib3JkZXIgYm9yZGVyLWdyZWVuLTIwMCByb3VuZGVkLWxnIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8Q2hlY2tDaXJjbGUgY2xhc3NOYW1lPVwiaC00IHctNCB0ZXh0LWdyZWVuLTUwMFwiIC8+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1ncmVlbi05MDBcIj57dXBsb2FkZWRGaWxlLmZpbGVOYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JlZW4tNjAwIG1sLTJcIj4oe2Zvcm1hdEZpbGVTaXplKHVwbG9hZGVkRmlsZS5maWxlU2l6ZSl9KTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgb25DbGljaz17Y2xlYXJVcGxvYWRlZEZpbGV9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtZ3JlZW4tNzAwIGhvdmVyOnRleHQtZ3JlZW4tODAwXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFggY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7dXBsb2FkRXJyb3IgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItMyBwLTMgYmctcmVkLTUwIGJvcmRlciBib3JkZXItcmVkLTIwMCByb3VuZGVkLWxnIGZsZXggaXRlbXMtc3RhcnQgZ2FwLTJcIj5cbiAgICAgICAgICAgIDxBbGVydENpcmNsZSBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQtcmVkLTUwMCBtdC0wLjVcIiAvPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LXJlZC05MDBcIj5VcGxvYWQgRXJyb3I8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtcmVkLTYwMFwiPnt1cGxvYWRFcnJvcn08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRVcGxvYWRFcnJvcihudWxsKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1yZWQtNzAwIGhvdmVyOnRleHQtcmVkLTgwMCBtbC1hdXRvXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFggY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fSBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxuICAgICAgICAgICAgPHNwYW4+UHJlc3MgRW50ZXIgdG8gc2VuZCwgU2hpZnQrRW50ZXIgZm9yIGEgbmV3IGxpbmUuPC9zcGFuPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgICAgICBzaXplPVwiaWNvblwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0SW5wdXRFeHBhbmRlZChwcmV2ID0+ICFwcmV2KX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWZvcmVncm91bmQgaG92ZXI6dGV4dC1mb3JlZ3JvdW5kXCJcbiAgICAgICAgICAgICAgICB0aXRsZT17aW5wdXRFeHBhbmRlZCA/ICdDb2xsYXBzZSBpbnB1dCcgOiAnRXhwYW5kIGlucHV0J31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtpbnB1dEV4cGFuZGVkID8gPE1pbmltaXplMiBjbGFzc05hbWU9XCJoLTQgdy00XCIgLz4gOiA8TWF4aW1pemUyIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPn1cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgIDxUZXh0YXJlYVxuICAgICAgICAgICAgICB2YWx1ZT17aW5wdXR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFRleHRBcmVhRWxlbWVudD4pID0+IHNldElucHV0KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3VwbG9hZGVkRmlsZSA/XG4gICAgICAgICAgICAgICAgKHVwbG9hZGVkRmlsZS5maWxlTmFtZS5tYXRjaCgvXFwuKHBuZ3xqcGd8anBlZ3xnaWZ8Ym1wfHRpZmZ8d2VicCkkL2kpID9cbiAgICAgICAgICAgICAgICAgIFwiRGVzY3JpYmUgd2hhdCB5b3Ugc2VlIGluIHRoZSBpbWFnZSBvciBhc2sgcXVlc3Rpb25zIGFib3V0IGl0Li4uXCIgOlxuICAgICAgICAgICAgICAgICAgXCJBc2sgcXVlc3Rpb25zIGFib3V0IHRoZSB1cGxvYWRlZCBkb2N1bWVudC4uLlwiKSA6XG4gICAgICAgICAgICAgICAgXCJBc2sgYSBxdWVzdGlvbiBhYm91dCB5b3VyIGRvY3VtZW50cy4uLlwifVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LWZ1bGwgcHItMTIgcmVzaXplLXkgJHtpbnB1dEV4cGFuZGVkID8gJ21pbi1oLVsxODBweF0nIDogJ21pbi1oLVs4MHB4XSd9IG1heC1oLVszMjBweF1gfVxuICAgICAgICAgICAgICBvbktleURvd249eyhlOiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxUZXh0QXJlYUVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgIGhhbmRsZVN1Ym1pdChlIGFzIGFueSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSByaWdodC0zIGJvdHRvbS0zIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgICAgICAgICByZWY9e2ZpbGVJbnB1dFJlZn1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlRmlsZVNlbGVjdH1cbiAgICAgICAgICAgICAgICBhY2NlcHQ9e0FMTE9XRURfRVhURU5TSU9OUy5qb2luKCcsJyl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJnaG9zdFwiXG4gICAgICAgICAgICAgICAgc2l6ZT1cImljb25cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGZpbGVJbnB1dFJlZi5jdXJyZW50Py5jbGljaygpfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1VwbG9hZGluZ31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTcgdy03XCJcbiAgICAgICAgICAgICAgICB0aXRsZT1cIlVwbG9hZCBkb2N1bWVudCBmb3IgYW5hbHlzaXNcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2lzVXBsb2FkaW5nID8gKFxuICAgICAgICAgICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwiaC00IHctNCBhbmltYXRlLXNwaW5cIiAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8UGFwZXJjbGlwIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxuICAgICAgICAgICAgICB7IXVwbG9hZGVkRmlsZSAmJiAn8J+SoSBUaXA6IENsaWNrIHRoZSBjbGlwIGljb24gb3IgZHJhZyAmIGRyb3AgZmlsZXMgdG8gdXBsb2FkIGxvZ3MsIGNvbmZpZ3MsIGltYWdlcywgb3Igb3RoZXIgZG9jdW1lbnRzLid9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cInN1Ym1pdFwiIGRpc2FibGVkPXshaW5wdXQudHJpbSgpIHx8IGlzTG9hZGluZ30+XG4gICAgICAgICAgICAgIHtpc0xvYWRpbmcgPyA8TG9hZGVyMiBjbGFzc05hbWU9XCJoLTQgdy00IGFuaW1hdGUtc3BpblwiIC8+IDogPD48U2VuZCBjbGFzc05hbWU9XCJoLTQgdy00IG1yLTFcIiAvPiBTZW5kPC8+fVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZm9ybT5cblxuICAgICAgICB7IXVwbG9hZGVkRmlsZSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHRleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+XG4gICAgICAgICAgICBOZWVkIHRvIGRlc2NyaWJlIGEgbG9uZ2VyIGlzc3VlPyBFeHBhbmQgdGhlIGlucHV0IG9yIGF0dGFjaCBmaWxlcyBmb3IgZGVlcGVyIGFuYWx5c2lzLlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICB7LyogVG9hc3Qgbm90aWZpY2F0aW9uIGZvciBjb3B5IGZlZWRiYWNrICovfVxuICAgICAgPFRvYXN0LlByb3ZpZGVyIHN3aXBlRGlyZWN0aW9uPVwicmlnaHRcIj5cbiAgICAgICAgPFRvYXN0LlJvb3Qgb3Blbj17dG9hc3RPcGVufSBvbk9wZW5DaGFuZ2U9e3NldFRvYXN0T3Blbn0gZHVyYXRpb249ezIwMDB9IGNsYXNzTmFtZT1cImJnLWJsYWNrIHRleHQtd2hpdGUgcHgtNCBweS0yIHJvdW5kZWQgc2hhZG93LWxnXCI+XG4gICAgICAgICAgPFRvYXN0LlRpdGxlPnt0b2FzdE1zZ308L1RvYXN0LlRpdGxlPlxuICAgICAgICA8L1RvYXN0LlJvb3Q+XG4gICAgICAgIDxUb2FzdC5WaWV3cG9ydCBjbGFzc05hbWU9XCJmaXhlZCBib3R0b20tNCByaWdodC00IHotNTBcIiAvPlxuICAgICAgPC9Ub2FzdC5Qcm92aWRlcj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJ1c2VBdXRoIiwiQ29weSIsIlRvYXN0IiwiTWVzc2FnZVJlbmRlcmVyIiwiZm9ybWF0TWVzc2FnZUZvckNvcHkiLCJtZXNzYWdlIiwidGV4dCIsImNvbnRlbnQiLCJjaXRhdGlvbnMiLCJsZW5ndGgiLCJjIiwidGl0bGUiLCJzb3VyY2UiLCJzY29yZSIsInRvRml4ZWQiLCJ0aW1lc3RhbXAiLCJ0b0xvY2FsZVN0cmluZyIsImNvcHlUb0NsaXBib2FyZCIsIm5hdmlnYXRvciIsImNsaXBib2FyZCIsIndyaXRlVGV4dCIsInRleHRhcmVhIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidmFsdWUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJzZWxlY3QiLCJleGVjQ29tbWFuZCIsInJlbW92ZUNoaWxkIiwiU2VuZCIsIkxvYWRlcjIiLCJGaWxlVGV4dCIsIlNlYXJjaCIsIkdsb2JlIiwiUGFwZXJjbGlwIiwiWCIsIlVwbG9hZCIsIkNoZWNrQ2lyY2xlIiwiQWxlcnRDaXJjbGUiLCJNYXhpbWl6ZTIiLCJNaW5pbWl6ZTIiLCJCdXR0b24iLCJUZXh0YXJlYSIsIkNhcmQiLCJDYXJkQ29udGVudCIsIkJhZGdlIiwiQ29sbGFwc2libGUiLCJDb2xsYXBzaWJsZUNvbnRlbnQiLCJDb2xsYXBzaWJsZVRyaWdnZXIiLCJBTExPV0VEX0VYVEVOU0lPTlMiLCJNQVhfRklMRV9TSVpFIiwiQ2hhdEludGVyZmFjZSIsImNvbnZlcnNhdGlvbklkIiwib25Db252ZXJzYXRpb25DcmVhdGVkIiwib25Db252ZXJzYXRpb25BY3Rpdml0eSIsImFjY2Vzc1Rva2VuIiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsImlucHV0Iiwic2V0SW5wdXQiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJ1cGxvYWRlZEZpbGUiLCJzZXRVcGxvYWRlZEZpbGUiLCJpc1VwbG9hZGluZyIsInNldElzVXBsb2FkaW5nIiwidXBsb2FkRXJyb3IiLCJzZXRVcGxvYWRFcnJvciIsImlzRHJhZ092ZXIiLCJzZXRJc0RyYWdPdmVyIiwiaW5wdXRFeHBhbmRlZCIsInNldElucHV0RXhwYW5kZWQiLCJmaWxlSW5wdXRSZWYiLCJjaGF0Q29udGFpbmVyUmVmIiwibWVzc2FnZXNDb250YWluZXJSZWYiLCJpc0luaXRpYWxTY3JvbGxSZWYiLCJzY3JvbGxUb0JvdHRvbSIsImJlaGF2aW9yIiwiZWwiLCJjdXJyZW50Iiwic2Nyb2xsVG8iLCJ0b3AiLCJzY3JvbGxIZWlnaHQiLCJoaXN0b3J5TG9hZGluZyIsInNldEhpc3RvcnlMb2FkaW5nIiwiaGlzdG9yeUVycm9yIiwic2V0SGlzdG9yeUVycm9yIiwiY2FuY2VsbGVkIiwibG9hZEhpc3RvcnkiLCJpZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImNhY2hlIiwib2siLCJzdGF0dXMiLCJkZXRhaWwiLCJjYXRjaCIsIkVycm9yIiwiZGF0YSIsImpzb24iLCJtYXBwZWQiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJtc2ciLCJTdHJpbmciLCJyb2xlIiwidW5kZWZpbmVkIiwic2VhcmNoVHlwZSIsIm1ldGhvZCIsIkRhdGUiLCJjcmVhdGVkQXQiLCJjcmVhdGVkX2F0IiwidG9JU09TdHJpbmciLCJlcnJvciIsImNvbnNvbGUiLCJ2YWxpZGF0ZUZpbGUiLCJmaWxlIiwic2l6ZSIsImV4dGVuc2lvbiIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsInN1YnN0cmluZyIsImxhc3RJbmRleE9mIiwiaW5jbHVkZXMiLCJqb2luIiwiaGFuZGxlRmlsZVVwbG9hZCIsInZhbGlkYXRpb25FcnJvciIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJyZXN1bHQiLCJzdWNjZXNzIiwic2Vzc2lvbklkIiwiZmlsZU5hbWUiLCJmaWxlU2l6ZSIsInVwbG9hZFRpbWUiLCJzeXN0ZW1NZXNzYWdlIiwibm93IiwidG9TdHJpbmciLCJmb3JtYXRGaWxlU2l6ZSIsInByZXYiLCJoYW5kbGVGaWxlU2VsZWN0IiwiZXZlbnQiLCJmaWxlcyIsInRhcmdldCIsImNsZWFyVXBsb2FkZWRGaWxlIiwiYnl0ZXMiLCJrIiwic2l6ZXMiLCJpIiwiTWF0aCIsImZsb29yIiwibG9nIiwicGFyc2VGbG9hdCIsInBvdyIsImhhbmRsZURyYWdFbnRlciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImhhbmRsZURyYWdMZWF2ZSIsImNvbnRhaW5zIiwicmVsYXRlZFRhcmdldCIsImhhbmRsZURyYWdPdmVyIiwiaGFuZGxlRHJvcCIsImRhdGFUcmFuc2ZlciIsInRvYXN0T3BlbiIsInNldFRvYXN0T3BlbiIsInRvYXN0TXNnIiwic2V0VG9hc3RNc2ciLCJoYW5kbGVHbG9iYWxEcmFnRW50ZXIiLCJ0eXBlcyIsImhhbmRsZUdsb2JhbERyYWdMZWF2ZSIsImNsaWVudFgiLCJjbGllbnRZIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVTdWJtaXQiLCJyYXdJbnB1dCIsInRyaW0iLCJjb21tYW5kTWF0Y2giLCJtYXRjaCIsImRpc3BsYXlDb250ZW50Iiwib3V0Ym91bmRDb250ZW50IiwiYWN0aW9uIiwiY2FzZU51bWJlciIsInVzZXJNZXNzYWdlIiwiY3VycmVudElucHV0IiwiSlNPTiIsInN0cmluZ2lmeSIsInF1ZXJ5IiwibWF4UmVzdWx0cyIsImFzc2lzdGFudE1lc3NhZ2UiLCJyZXN1bHRzIiwiciIsImlkeCIsInJhbmsiLCJzaW1pbGFyaXR5IiwiZGlzcGxheU1lc3NhZ2UiLCJyZWFkZXIiLCJnZXRSZWFkZXIiLCJyZXNvbHZlZENvbnZlcnNhdGlvbklkIiwiZG9uZSIsInJlYWQiLCJjaHVuayIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwibGluZXMiLCJzcGxpdCIsImxpbmUiLCJzdGFydHNXaXRoIiwicGFyc2UiLCJzbGljZSIsInR5cGUiLCJtIiwidG9rZW4iLCJzb3VyY2VzIiwid2FybiIsImVycm9yTWVzc2FnZSIsImdldFNlYXJjaEljb24iLCJjbGFzc05hbWUiLCJnZXRTZWFyY2hMYWJlbCIsImRpdiIsInJlZiIsIm9uRHJhZ0VudGVyIiwib25EcmFnTGVhdmUiLCJvbkRyYWdPdmVyIiwib25Ecm9wIiwiaDMiLCJwIiwiYnV0dG9uIiwiYXJpYS1sYWJlbCIsImRhdGEtdGVzdGlkIiwib25DbGljayIsInNwYW4iLCJ2YXJpYW50IiwiY2l0YXRpb24iLCJtZXNzYWdlc0VuZFJlZiIsImZvcm0iLCJvblN1Ym1pdCIsIm9uQ2hhbmdlIiwicGxhY2Vob2xkZXIiLCJvbktleURvd24iLCJrZXkiLCJzaGlmdEtleSIsImFjY2VwdCIsImNsaWNrIiwiZGlzYWJsZWQiLCJQcm92aWRlciIsInN3aXBlRGlyZWN0aW9uIiwiUm9vdCIsIm9wZW4iLCJvbk9wZW5DaGFuZ2UiLCJkdXJhdGlvbiIsIlRpdGxlIiwiVmlld3BvcnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/chat/chat-interface.tsx\n"));

/***/ })

});