"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/chat/chat-interface.tsx":
/*!********************************************!*\
  !*** ./components/chat/chat-interface.tsx ***!
  \********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatInterface: function() { return /* binding */ ChatInterface; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _src_context_AuthContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/context/AuthContext */ \"(app-pages-browser)/./src/context/AuthContext.tsx\");\n/* harmony import */ var _barrel_optimize_names_Copy_lucide_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=Copy!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/copy.js\");\n/* harmony import */ var _radix_ui_react_toast__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @radix-ui/react-toast */ \"(app-pages-browser)/./node_modules/@radix-ui/react-toast/dist/index.mjs\");\n/* harmony import */ var _message_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./message-renderer */ \"(app-pages-browser)/./components/chat/message-renderer.tsx\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/file-text.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/globe.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/search.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/upload.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/circle-alert.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/circle-check-big.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/minimize-2.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/maximize-2.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/paperclip.js\");\n/* harmony import */ var _barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! __barrel_optimize__?names=AlertCircle,CheckCircle,FileText,Globe,Loader2,Maximize2,Minimize2,Paperclip,Search,Send,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/send.js\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./components/ui/button.tsx\");\n/* harmony import */ var _components_ui_textarea__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ui/textarea */ \"(app-pages-browser)/./components/ui/textarea.tsx\");\n/* harmony import */ var _components_ui_card__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/ui/card */ \"(app-pages-browser)/./components/ui/card.tsx\");\n/* harmony import */ var _components_ui_badge__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/ui/badge */ \"(app-pages-browser)/./components/ui/badge.tsx\");\n/* harmony import */ var _components_ui_collapsible__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/ui/collapsible */ \"(app-pages-browser)/./components/ui/collapsible.tsx\");\n/* __next_internal_client_entry_do_not_use__ ChatInterface auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n// Helper to format message for copying (plain text + optional metadata)\nfunction formatMessageForCopy(message) {\n    let text = message.content;\n    if (message.citations && message.citations.length > 0) {\n        text += \"\\n\\nSources:\";\n        for (const c of message.citations){\n            text += \"\\n- \".concat(c.title, \" (\").concat(c.source, \")\").concat(c.score ? \" [\".concat((c.score * 100).toFixed(0), \"% match]\") : \"\");\n        }\n    }\n    text += \"\\n\\nTimestamp: \".concat(message.timestamp.toLocaleString());\n    return text;\n}\n// Copy to clipboard with fallback\nasync function copyToClipboard(text) {\n    if (navigator.clipboard) {\n        await navigator.clipboard.writeText(text);\n    } else {\n        // Fallback for older browsers\n        const textarea = document.createElement(\"textarea\");\n        textarea.value = text;\n        document.body.appendChild(textarea);\n        textarea.select();\n        document.execCommand(\"copy\");\n        document.body.removeChild(textarea);\n    }\n}\n\n\n\n\n\n\nconst ALLOWED_EXTENSIONS = [\n    \".txt\",\n    \".log\",\n    \".csv\",\n    \".json\",\n    \".sql\",\n    \".pdf\",\n    \".xml\",\n    \".conf\",\n    \".config\",\n    \".ini\",\n    \".properties\",\n    \".out\",\n    \".err\",\n    \".trace\",\n    \".dump\",\n    \".png\",\n    \".jpg\",\n    \".jpeg\",\n    \".gif\",\n    \".bmp\",\n    \".tiff\",\n    \".webp\"\n];\nconst MAX_FILE_SIZE = 10 * 1024 * 1024 // 10MB\n;\nfunction ChatInterface(param) {\n    let { conversationId, onConversationCreated, onConversationActivity } = param;\n    _s();\n    const { accessToken } = (0,_src_context_AuthContext__WEBPACK_IMPORTED_MODULE_2__.useAuth)();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [uploadedFile, setUploadedFile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isUploading, setIsUploading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [uploadError, setUploadError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isDragOver, setIsDragOver] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [inputExpanded, setInputExpanded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const fileInputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const chatContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const messagesContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const isInitialScrollRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n    const scrollToBottom = function() {\n        let behavior = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : \"auto\";\n        const el = messagesContainerRef.current;\n        if (el) {\n            el.scrollTo({\n                top: el.scrollHeight,\n                behavior\n            });\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        scrollToBottom(isInitialScrollRef.current ? \"auto\" : \"smooth\");\n        isInitialScrollRef.current = false;\n    }, [\n        messages\n    ]);\n    const [historyLoading, setHistoryLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [historyError, setHistoryError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Handle conversation changes - load history for existing conversations\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let cancelled = false;\n        const loadHistory = async (id)=>{\n            if (!accessToken) {\n                setHistoryError(\"Authentication required to load conversation.\");\n                setMessages([]);\n                return;\n            }\n            try {\n                setHistoryLoading(true);\n                setHistoryError(null);\n                const response = await fetch(\"/api/conversations/\".concat(id), {\n                    headers: {\n                        Authorization: \"Bearer \".concat(accessToken)\n                    },\n                    cache: \"no-store\"\n                });\n                if (!response.ok) {\n                    if (response.status === 404) {\n                        setHistoryError(\"Conversation not found.\");\n                        setMessages([]);\n                        return;\n                    }\n                    const detail = await response.text().catch(()=>\"\");\n                    throw new Error(detail || \"Failed to load conversation (status \".concat(response.status, \")\"));\n                }\n                const data = await response.json();\n                if (cancelled) return;\n                const mapped = Array.isArray(data === null || data === void 0 ? void 0 : data.messages) ? data.messages.map((msg)=>{\n                    var _msg_content, _msg_searchType, _msg_createdAt, _ref;\n                    return {\n                        id: String(msg.id),\n                        role: msg.role === \"assistant\" ? \"assistant\" : \"user\",\n                        content: (_msg_content = msg.content) !== null && _msg_content !== void 0 ? _msg_content : \"\",\n                        citations: Array.isArray(msg.citations) ? msg.citations : undefined,\n                        searchType: (_msg_searchType = msg.searchType) !== null && _msg_searchType !== void 0 ? _msg_searchType : msg.method,\n                        timestamp: new Date((_ref = (_msg_createdAt = msg.createdAt) !== null && _msg_createdAt !== void 0 ? _msg_createdAt : msg.created_at) !== null && _ref !== void 0 ? _ref : new Date().toISOString())\n                    };\n                }) : [];\n                setMessages(mapped);\n                setUploadedFile(null);\n                setUploadError(null);\n            } catch (error) {\n                if (!cancelled) {\n                    console.error(\"Failed to load conversation history:\", error);\n                    setHistoryError(\"Unable to load conversation history.\");\n                    setMessages([]);\n                }\n            } finally{\n                if (!cancelled) {\n                    setHistoryLoading(false);\n                }\n            }\n        };\n        if (conversationId === undefined) {\n            setMessages([]);\n            setInput(\"\");\n            setUploadedFile(null);\n            setUploadError(null);\n            setHistoryError(null);\n            setHistoryLoading(false);\n        } else {\n            loadHistory(conversationId);\n        }\n        isInitialScrollRef.current = true;\n        return ()=>{\n            cancelled = true;\n        };\n    }, [\n        conversationId,\n        accessToken\n    ]);\n    const validateFile = (file)=>{\n        if (file.size > MAX_FILE_SIZE) {\n            return \"File size exceeds \".concat(MAX_FILE_SIZE / 1024 / 1024, \"MB limit\");\n        }\n        const extension = file.name.toLowerCase().substring(file.name.lastIndexOf(\".\"));\n        if (!ALLOWED_EXTENSIONS.includes(extension)) {\n            return \"File type not supported. Allowed: \".concat(ALLOWED_EXTENSIONS.join(\", \"));\n        }\n        return null;\n    };\n    const handleFileUpload = async (file)=>{\n        const validationError = validateFile(file);\n        if (validationError) {\n            setUploadError(validationError);\n            return;\n        }\n        setIsUploading(true);\n        setUploadError(null);\n        try {\n            const formData = new FormData();\n            formData.append(\"file\", file);\n            const response = await fetch(\"/api/temp-upload\", {\n                method: \"POST\",\n                body: formData,\n                headers: accessToken ? {\n                    Authorization: \"Bearer \".concat(accessToken)\n                } : undefined\n            });\n            const result = await response.json();\n            if (!result.success) {\n                throw new Error(result.error || \"Upload failed\");\n            }\n            const uploadedFile = {\n                sessionId: result.sessionId,\n                fileName: result.fileName,\n                fileSize: result.fileSize,\n                uploadTime: new Date().toISOString()\n            };\n            setUploadedFile(uploadedFile);\n            // Add a system message about the upload\n            const systemMessage = {\n                id: Date.now().toString(),\n                role: \"assistant\",\n                content: \"✅ **File uploaded successfully:** \".concat(file.name, \" (\").concat(formatFileSize(file.size), \")\\n\\nYou can now ask questions about this document. I'll analyze its content to provide specific insights and troubleshooting assistance.\"),\n                searchType: \"temp-doc\",\n                uploadedFile: uploadedFile,\n                timestamp: new Date()\n            };\n            setMessages((prev)=>[\n                    ...prev,\n                    systemMessage\n                ]);\n        } catch (error) {\n            console.error(\"Upload error:\", error);\n            setUploadError(error instanceof Error ? error.message : \"Upload failed\");\n        } finally{\n            setIsUploading(false);\n        }\n    };\n    const handleFileSelect = (event)=>{\n        const files = event.target.files;\n        if (files && files.length > 0) {\n            handleFileUpload(files[0]);\n        }\n    };\n    const clearUploadedFile = ()=>{\n        setUploadedFile(null);\n        setUploadError(null);\n        if (fileInputRef.current) {\n            fileInputRef.current.value = \"\";\n        }\n    };\n    const formatFileSize = (bytes)=>{\n        if (bytes === 0) return \"0 Bytes\";\n        const k = 1024;\n        const sizes = [\n            \"Bytes\",\n            \"KB\",\n            \"MB\"\n        ];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + \" \" + sizes[i];\n    };\n    // Drag and drop handlers\n    const handleDragEnter = (e)=>{\n        e.preventDefault();\n        e.stopPropagation();\n        setIsDragOver(true);\n    };\n    const handleDragLeave = (e)=>{\n        var _chatContainerRef_current;\n        e.preventDefault();\n        e.stopPropagation();\n        // Only set isDragOver to false if we're leaving the chat container\n        if (!((_chatContainerRef_current = chatContainerRef.current) === null || _chatContainerRef_current === void 0 ? void 0 : _chatContainerRef_current.contains(e.relatedTarget))) {\n            setIsDragOver(false);\n        }\n    };\n    const handleDragOver = (e)=>{\n        e.preventDefault();\n        e.stopPropagation();\n    };\n    const handleDrop = (e)=>{\n        e.preventDefault();\n        e.stopPropagation();\n        setIsDragOver(false);\n        const files = e.dataTransfer.files;\n        if (files && files.length > 0) {\n            handleFileUpload(files[0]);\n        }\n    };\n    // Toast state for copy feedback\n    const [toastOpen, setToastOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [toastMsg, setToastMsg] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    // Add global drag event listeners to detect drag enter/leave\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handleGlobalDragEnter = (e)=>{\n            var _e_dataTransfer;\n            if ((_e_dataTransfer = e.dataTransfer) === null || _e_dataTransfer === void 0 ? void 0 : _e_dataTransfer.types.includes(\"Files\")) {\n                setIsDragOver(true);\n            }\n        };\n        const handleGlobalDragLeave = (e)=>{\n            // Only hide drag overlay if we're leaving the window\n            if (e.clientX === 0 && e.clientY === 0) {\n                setIsDragOver(false);\n            }\n        };\n        document.addEventListener(\"dragenter\", handleGlobalDragEnter);\n        document.addEventListener(\"dragleave\", handleGlobalDragLeave);\n        return ()=>{\n            document.removeEventListener(\"dragenter\", handleGlobalDragEnter);\n            document.removeEventListener(\"dragleave\", handleGlobalDragLeave);\n        };\n    }, []);\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        const rawInput = input.trim();\n        if (!rawInput || isLoading) return;\n        if (!accessToken) {\n            setToastMsg(\"Please sign in to chat.\");\n            setToastOpen(true);\n            return;\n        }\n        const commandMatch = rawInput.match(/^\\/(new|update|close)\\s+case\\s+(.+)$/i);\n        let displayContent = rawInput;\n        let outboundContent = rawInput;\n        if (commandMatch) {\n            const action = commandMatch[1].toLowerCase();\n            const caseNumber = commandMatch[2].trim();\n            if (!caseNumber) {\n                setToastMsg(\"Please provide a case number, e.g. /new case 01125052\");\n                setToastOpen(true);\n                return;\n            }\n            if (action === \"new\") {\n                displayContent = \"\\uD83D\\uDCC4 Initiating Salesforce case \".concat(caseNumber);\n                outboundContent = \"You are assisting with Salesforce case \".concat(caseNumber, \". Using the conversation context, define the case for analysis and recommendation by providing:\\n- A concise case overview with important facts known so far.\\n- Immediate diagnostic or triage steps to perform.\\n- Clarifying questions that should be asked of the customer.\\n- Recommended next actions for engineering/support teams.\\nReturn the response with headings: Case Overview, Immediate Actions, Clarifying Questions, Recommended Next Steps.\");\n            } else if (action === \"update\") {\n                displayContent = \"\\uD83D\\uDEE0️ Updating Salesforce case \".concat(caseNumber);\n                outboundContent = \"You are providing an update on Salesforce case \".concat(caseNumber, \". Review the conversation context and produce:\\n- The current status/progress of the case.\\n- Outstanding issues or blockers.\\n- Recommended next steps for the support engineer.\\n- Suggested customer communication points.\\nReturn the response with headings: Case Status, Outstanding Items, Recommended Actions, Customer Communication.\");\n            } else if (action === \"close\") {\n                displayContent = \"✅ Closing Salesforce case \".concat(caseNumber);\n                outboundContent = \"You are preparing to close Salesforce case \".concat(caseNumber, \". Based on the conversation context, provide:\\n- A brief incident summary.\\n- Actions taken and resolutions applied.\\n- Verification steps or final checks completed/needed.\\n- Final closing comments for the customer.\\nReturn the response with headings: Summary, Actions Taken, Verification, Closing Comments.\");\n            }\n        }\n        const userMessage = {\n            id: Date.now().toString(),\n            role: \"user\",\n            content: displayContent,\n            uploadedFile: uploadedFile || undefined,\n            timestamp: new Date()\n        };\n        setMessages((prev)=>[\n                ...prev,\n                userMessage\n            ]);\n        const currentInput = outboundContent;\n        setInput(\"\");\n        setIsLoading(true);\n        try {\n            var _response_body;\n            // If there's an uploaded file, analyze it using temp-analyze endpoint\n            if (uploadedFile) {\n                var _result_results;\n                const response = await fetch(\"/api/temp-analyze\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        ...accessToken ? {\n                            Authorization: \"Bearer \".concat(accessToken)\n                        } : {}\n                    },\n                    body: JSON.stringify({\n                        sessionId: uploadedFile.sessionId,\n                        query: currentInput,\n                        maxResults: 5\n                    })\n                });\n                if (!response.ok) {\n                    throw new Error(\"HTTP error! status: \".concat(response.status));\n                }\n                const result = await response.json();\n                const assistantMessage = {\n                    id: (Date.now() + 1).toString(),\n                    role: \"assistant\",\n                    content: result.response,\n                    citations: (_result_results = result.results) === null || _result_results === void 0 ? void 0 : _result_results.map((r, idx)=>({\n                            id: \"temp-\".concat(idx),\n                            title: \"Section \".concat(r.rank),\n                            content: r.content,\n                            source: uploadedFile.fileName,\n                            score: r.similarity\n                        })),\n                    searchType: \"temp-doc\",\n                    timestamp: new Date()\n                };\n                setMessages((prev)=>[\n                        ...prev,\n                        assistantMessage\n                    ]);\n                return;\n            }\n            // Regular chat without uploaded file\n            const response = await fetch(\"/api/chat\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: \"Bearer \".concat(accessToken)\n                },\n                body: JSON.stringify({\n                    conversationId,\n                    message: currentInput,\n                    displayMessage: userMessage.content\n                })\n            });\n            if (!response.ok) {\n                throw new Error(\"HTTP error! status: \".concat(response.status));\n            }\n            const reader = (_response_body = response.body) === null || _response_body === void 0 ? void 0 : _response_body.getReader();\n            if (!reader) throw new Error(\"No response body\");\n            let assistantMessage = {\n                id: (Date.now() + 1).toString(),\n                role: \"assistant\",\n                content: \"\",\n                timestamp: new Date()\n            };\n            let resolvedConversationId = conversationId;\n            setMessages((prev)=>[\n                    ...prev,\n                    assistantMessage\n                ]);\n            while(true){\n                const { done, value } = await reader.read();\n                if (done) break;\n                const chunk = new TextDecoder().decode(value);\n                const lines = chunk.split(\"\\n\");\n                for (const line of lines){\n                    if (line.startsWith(\"data: \")) {\n                        try {\n                            const data = JSON.parse(line.slice(6));\n                            if (data.type === \"token\") {\n                                // Handle streaming tokens from the backend\n                                setMessages((prev)=>prev.map((m)=>m.id === assistantMessage.id ? {\n                                            ...m,\n                                            content: m.content + data.token\n                                        } : m));\n                            } else if (data.type === \"sources\") {\n                                // Handle sources/citations\n                                setMessages((prev)=>prev.map((m)=>m.id === assistantMessage.id ? {\n                                            ...m,\n                                            citations: data.sources,\n                                            searchType: data.method\n                                        } : m));\n                            } else if (data.type === \"conversation_id\") {\n                                if (typeof data.conversationId === \"number\") {\n                                    resolvedConversationId = data.conversationId;\n                                    if (conversationId === undefined) {\n                                        onConversationCreated === null || onConversationCreated === void 0 ? void 0 : onConversationCreated(data.conversationId);\n                                    }\n                                }\n                            } else if (data.type === \"done\") {\n                                // Streaming completed\n                                console.log(\"Streaming completed\");\n                            } else if (data.type === \"error\") {\n                                console.error(\"Streaming error:\", data.error);\n                            }\n                        } catch (e) {\n                            // Ignore malformed JSON\n                            console.warn(\"Failed to parse streaming data:\", line);\n                        }\n                    }\n                }\n            }\n            if (resolvedConversationId !== undefined) {\n                onConversationActivity === null || onConversationActivity === void 0 ? void 0 : onConversationActivity(resolvedConversationId);\n            }\n        } catch (error) {\n            console.error(\"Chat error:\", error);\n            const errorMessage = {\n                id: (Date.now() + 1).toString(),\n                role: \"assistant\",\n                content: \"Sorry, I encountered an error. Please try again.\",\n                timestamp: new Date()\n            };\n            setMessages((prev)=>[\n                    ...prev,\n                    errorMessage\n                ]);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const getSearchIcon = (searchType)=>{\n        switch(searchType){\n            case \"documents\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                    className: \"h-3 w-3\"\n                }, void 0, false, {\n                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                    lineNumber: 522,\n                    columnNumber: 32\n                }, this);\n            case \"web\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                    className: \"h-3 w-3\"\n                }, void 0, false, {\n                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                    lineNumber: 523,\n                    columnNumber: 26\n                }, this);\n            case \"hybrid\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                    className: \"h-3 w-3\"\n                }, void 0, false, {\n                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                    lineNumber: 524,\n                    columnNumber: 29\n                }, this);\n            case \"temp-doc\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                    className: \"h-3 w-3\"\n                }, void 0, false, {\n                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                    lineNumber: 525,\n                    columnNumber: 31\n                }, this);\n            default:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                    className: \"h-3 w-3\"\n                }, void 0, false, {\n                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                    lineNumber: 526,\n                    columnNumber: 23\n                }, this);\n        }\n    };\n    const getSearchLabel = (searchType)=>{\n        switch(searchType){\n            case \"documents\":\n                return \"Document Search\";\n            case \"web\":\n                return \"Web Search\";\n            case \"hybrid\":\n                return \"Hybrid Search\";\n            case \"temp-doc\":\n                return \"Uploaded Document\";\n            default:\n                return \"Search\";\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: chatContainerRef,\n        className: \"flex h-full min-h-0 flex-col relative\",\n        onDragEnter: handleDragEnter,\n        onDragLeave: handleDragLeave,\n        onDragOver: handleDragOver,\n        onDrop: handleDrop,\n        children: [\n            isDragOver && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 z-50 bg-blue-500/10 backdrop-blur-sm flex items-center justify-center border-2 border-dashed border-blue-500\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center p-8 bg-white/90 rounded-lg shadow-lg\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                            className: \"h-12 w-12 mx-auto text-blue-500 mb-4\"\n                        }, void 0, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 553,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-xl font-semibold text-blue-900 mb-2\",\n                            children: \"Drop file to analyze\"\n                        }, void 0, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 554,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-blue-700\",\n                            children: \"Supports logs, configs, PDFs, images, and more\"\n                        }, void 0, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 555,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-blue-600 mt-2\",\n                            children: \"AI will analyze your document with Technical Service Assistant expertise\"\n                        }, void 0, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 558,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                    lineNumber: 552,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                lineNumber: 551,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: messagesContainerRef,\n                className: \"flex-1 min-h-0 overflow-y-auto p-4 space-y-4\",\n                children: [\n                    historyLoading && messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center text-muted-foreground py-8\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                className: \"h-10 w-10 mx-auto mb-4 animate-spin\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 569,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Loading conversation...\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 570,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 568,\n                        columnNumber: 11\n                    }, this) : historyError && messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center text-red-500 py-8\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                                className: \"h-10 w-10 mx-auto mb-4\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 574,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: historyError\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 575,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 573,\n                        columnNumber: 11\n                    }, this) : messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center text-muted-foreground py-8\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                className: \"h-12 w-12 mx-auto mb-4 opacity-50\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 579,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"text-lg font-medium mb-2\",\n                                children: \"Start a conversation\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 580,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                children: \"Ask questions about your documents or any topic.\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 581,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 578,\n                        columnNumber: 11\n                    }, this) : null,\n                    messages.map((message)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex \".concat(message.role === \"user\" ? \"justify-end\" : \"justify-start\"),\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"max-w-[80%] \".concat(message.role === \"user\" ? \"bg-primary text-primary-foreground\" : \"bg-muted\", \" rounded-lg p-4 relative\"),\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_message_renderer__WEBPACK_IMPORTED_MODULE_3__.MessageRenderer, {\n                                        content: message.content\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 588,\n                                        columnNumber: 16\n                                    }, this),\n                                    message.role === \"assistant\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"absolute top-2 right-2 p-1 rounded hover:bg-accent focus:outline-none focus:ring\",\n                                        title: \"Copy response\",\n                                        \"aria-label\": \"Copy response\",\n                                        \"data-testid\": \"copy-btn\",\n                                        onClick: async ()=>{\n                                            try {\n                                                await copyToClipboard(formatMessageForCopy(message));\n                                                setToastMsg(\"Copied to clipboard!\");\n                                                setToastOpen(true);\n                                            } catch (e) {\n                                                setToastMsg(\"Copy failed\");\n                                                setToastOpen(true);\n                                            }\n                                        },\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Copy_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                                            className: \"h-4 w-4 text-muted-foreground\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                            lineNumber: 607,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 591,\n                                        columnNumber: 17\n                                    }, this),\n                                    message.citations && message.citations.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-3 pt-3 border-t border-border/20\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-2 mb-2\",\n                                                children: [\n                                                    getSearchIcon(message.searchType),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-xs font-medium\",\n                                                        children: getSearchLabel(message.searchType)\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                        lineNumber: 614,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_badge__WEBPACK_IMPORTED_MODULE_7__.Badge, {\n                                                        variant: \"secondary\",\n                                                        className: \"text-xs\",\n                                                        children: [\n                                                            message.citations.length,\n                                                            \" source\",\n                                                            message.citations.length !== 1 ? \"s\" : \"\"\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                        lineNumber: 615,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 612,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_collapsible__WEBPACK_IMPORTED_MODULE_8__.Collapsible, {\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_collapsible__WEBPACK_IMPORTED_MODULE_8__.CollapsibleTrigger, {\n                                                        className: \"text-xs text-muted-foreground hover:text-foreground transition-colors\",\n                                                        children: \"Show sources ↓\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                        lineNumber: 620,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_collapsible__WEBPACK_IMPORTED_MODULE_8__.CollapsibleContent, {\n                                                        className: \"mt-2 space-y-2\",\n                                                        children: message.citations.map((citation, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_6__.Card, {\n                                                                className: \"text-xs\",\n                                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_6__.CardContent, {\n                                                                    className: \"p-3\",\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"font-medium mb-1\",\n                                                                            children: citation.title\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                            lineNumber: 627,\n                                                                            columnNumber: 29\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"text-muted-foreground mb-2 line-clamp-2\",\n                                                                            children: citation.content\n                                                                        }, void 0, false, {\n                                                                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                            lineNumber: 628,\n                                                                            columnNumber: 29\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"flex justify-between items-center\",\n                                                                            children: [\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                    className: \"text-muted-foreground\",\n                                                                                    children: citation.source\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                                    lineNumber: 632,\n                                                                                    columnNumber: 31\n                                                                                }, this),\n                                                                                citation.score && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_badge__WEBPACK_IMPORTED_MODULE_7__.Badge, {\n                                                                                    variant: \"outline\",\n                                                                                    children: [\n                                                                                        (citation.score * 100).toFixed(0),\n                                                                                        \"% match\"\n                                                                                    ]\n                                                                                }, void 0, true, {\n                                                                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                                    lineNumber: 634,\n                                                                                    columnNumber: 33\n                                                                                }, this)\n                                                                            ]\n                                                                        }, void 0, true, {\n                                                                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                            lineNumber: 631,\n                                                                            columnNumber: 29\n                                                                        }, this)\n                                                                    ]\n                                                                }, void 0, true, {\n                                                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                    lineNumber: 626,\n                                                                    columnNumber: 27\n                                                                }, this)\n                                                            }, idx, false, {\n                                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                                lineNumber: 625,\n                                                                columnNumber: 25\n                                                            }, this))\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                        lineNumber: 623,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 619,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 611,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 587,\n                                columnNumber: 14\n                            }, this)\n                        }, message.id, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 586,\n                            columnNumber: 11\n                        }, this)),\n                    historyLoading && messages.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center text-xs text-muted-foreground\",\n                        children: \"Updating conversation…\"\n                    }, void 0, false, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 650,\n                        columnNumber: 11\n                    }, this),\n                    isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex justify-start\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-muted rounded-lg p-4\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                className: \"h-4 w-4 animate-spin\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 656,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 655,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 654,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                lineNumber: 566,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"border-t bg-background p-4\",\n                children: [\n                    uploadedFile && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mb-3 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                                        className: \"h-4 w-4 text-green-500\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 668,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"font-medium text-green-900\",\n                                                children: uploadedFile.fileName\n                                            }, void 0, false, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 670,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-sm text-green-600 ml-2\",\n                                                children: [\n                                                    \"(\",\n                                                    formatFileSize(uploadedFile.fileSize),\n                                                    \")\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 671,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 669,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 667,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                variant: \"ghost\",\n                                size: \"sm\",\n                                onClick: clearUploadedFile,\n                                className: \"text-green-700 hover:text-green-800\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n                                    className: \"h-4 w-4\"\n                                }, void 0, false, {\n                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                    lineNumber: 680,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 674,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 666,\n                        columnNumber: 11\n                    }, this),\n                    uploadError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                                className: \"h-4 w-4 text-red-500 mt-0.5\"\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 687,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"font-medium text-red-900\",\n                                        children: \"Upload Error\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 689,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-sm text-red-600\",\n                                        children: uploadError\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 690,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 688,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                variant: \"ghost\",\n                                size: \"sm\",\n                                onClick: ()=>setUploadError(null),\n                                className: \"text-red-700 hover:text-red-800 ml-auto\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n                                    className: \"h-4 w-4\"\n                                }, void 0, false, {\n                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                    lineNumber: 698,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 692,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 686,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                        onSubmit: handleSubmit,\n                        className: \"space-y-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center justify-between text-xs text-muted-foreground\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: \"Press Enter to send, Shift+Enter for a new line.\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 705,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex items-center gap-2\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                            type: \"button\",\n                                            variant: \"ghost\",\n                                            size: \"icon\",\n                                            onClick: ()=>setInputExpanded((prev)=>!prev),\n                                            className: \"text-muted-foreground hover:text-foreground\",\n                                            title: inputExpanded ? \"Collapse input\" : \"Expand input\",\n                                            children: inputExpanded ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                                                className: \"h-4 w-4\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 715,\n                                                columnNumber: 34\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n                                                className: \"h-4 w-4\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 715,\n                                                columnNumber: 70\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                            lineNumber: 707,\n                                            columnNumber: 15\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 706,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 704,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"relative\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_5__.Textarea, {\n                                        value: input,\n                                        onChange: (e)=>setInput(e.target.value),\n                                        placeholder: uploadedFile ? uploadedFile.fileName.match(/\\.(png|jpg|jpeg|gif|bmp|tiff|webp)$/i) ? \"Describe what you see in the image or ask questions about it...\" : \"Ask questions about the uploaded document...\" : \"Ask a question about your documents...\",\n                                        className: \"w-full pr-12 resize-y \".concat(inputExpanded ? \"min-h-[180px]\" : \"min-h-[80px]\", \" max-h-[320px]\"),\n                                        onKeyDown: (e)=>{\n                                            if (e.key === \"Enter\" && !e.shiftKey) {\n                                                e.preventDefault();\n                                                handleSubmit(e);\n                                            }\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 721,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute right-3 bottom-3 flex items-center gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"file\",\n                                                ref: fileInputRef,\n                                                onChange: handleFileSelect,\n                                                accept: ALLOWED_EXTENSIONS.join(\",\"),\n                                                className: \"hidden\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 738,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                                type: \"button\",\n                                                variant: \"ghost\",\n                                                size: \"icon\",\n                                                onClick: ()=>{\n                                                    var _fileInputRef_current;\n                                                    return (_fileInputRef_current = fileInputRef.current) === null || _fileInputRef_current === void 0 ? void 0 : _fileInputRef_current.click();\n                                                },\n                                                disabled: isUploading,\n                                                className: \"h-7 w-7\",\n                                                title: \"Upload document for analysis\",\n                                                children: isUploading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                                    className: \"h-4 w-4 animate-spin\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                    lineNumber: 755,\n                                                    columnNumber: 19\n                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                                                    className: \"h-4 w-4\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                    lineNumber: 757,\n                                                    columnNumber: 19\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                lineNumber: 745,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 737,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 720,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center justify-between\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-muted-foreground\",\n                                        children: !uploadedFile && \"\\uD83D\\uDCA1 Tip: Click the clip icon or drag & drop files to upload logs, configs, images, or other documents.\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 764,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.Button, {\n                                        type: \"submit\",\n                                        disabled: !input.trim() || isLoading,\n                                        children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                            className: \"h-4 w-4 animate-spin\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                            lineNumber: 768,\n                                            columnNumber: 28\n                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertCircle_CheckCircle_FileText_Globe_Loader2_Maximize2_Minimize2_Paperclip_Search_Send_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_21__[\"default\"], {\n                                                    className: \"h-4 w-4 mr-1\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                                    lineNumber: 768,\n                                                    columnNumber: 77\n                                                }, this),\n                                                \" Send\"\n                                            ]\n                                        }, void 0, true)\n                                    }, void 0, false, {\n                                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                        lineNumber: 767,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                                lineNumber: 763,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 703,\n                        columnNumber: 9\n                    }, this),\n                    !uploadedFile && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-2 text-xs text-muted-foreground\",\n                        children: \"Need to describe a longer issue? Expand the input or attach files for deeper analysis.\"\n                    }, void 0, false, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 774,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                lineNumber: 663,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_radix_ui_react_toast__WEBPACK_IMPORTED_MODULE_22__.Provider, {\n                swipeDirection: \"right\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_radix_ui_react_toast__WEBPACK_IMPORTED_MODULE_22__.Root, {\n                        open: toastOpen,\n                        onOpenChange: setToastOpen,\n                        duration: 2000,\n                        className: \"bg-black text-white px-4 py-2 rounded shadow-lg\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_radix_ui_react_toast__WEBPACK_IMPORTED_MODULE_22__.Title, {\n                            children: toastMsg\n                        }, void 0, false, {\n                            fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                            lineNumber: 782,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 781,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_radix_ui_react_toast__WEBPACK_IMPORTED_MODULE_22__.Viewport, {\n                        className: \"fixed bottom-4 right-4 z-50\"\n                    }, void 0, false, {\n                        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                        lineNumber: 784,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n                lineNumber: 780,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/components/chat/chat-interface.tsx\",\n        lineNumber: 541,\n        columnNumber: 5\n    }, this);\n}\n_s(ChatInterface, \"ZB9QxitkGmSzEB3jkS3JvqOX3VI=\", false, function() {\n    return [\n        _src_context_AuthContext__WEBPACK_IMPORTED_MODULE_2__.useAuth\n    ];\n});\n_c = ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvY2hhdC9jaGF0LWludGVyZmFjZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRXlCO0FBRTBCO0FBQ0E7QUFDaEI7QUFDVztBQUNNO0FBQ3BELHdFQUF3RTtBQUN4RSxTQUFTUSxxQkFBcUJDLE9BQWdCO0lBQzVDLElBQUlDLE9BQU9ELFFBQVFFLE9BQU87SUFDMUIsSUFBSUYsUUFBUUcsU0FBUyxJQUFJSCxRQUFRRyxTQUFTLENBQUNDLE1BQU0sR0FBRyxHQUFHO1FBQ3JESCxRQUFRO1FBQ1IsS0FBSyxNQUFNSSxLQUFLTCxRQUFRRyxTQUFTLENBQUU7WUFDakNGLFFBQVEsT0FBbUJJLE9BQVpBLEVBQUVDLEtBQUssRUFBQyxNQUFnQkQsT0FBWkEsRUFBRUUsTUFBTSxFQUFDLEtBQTRELE9BQXpERixFQUFFRyxLQUFLLEdBQUcsS0FBZ0MsT0FBM0IsQ0FBQ0gsRUFBRUcsS0FBSyxHQUFHLEdBQUUsRUFBR0MsT0FBTyxDQUFDLElBQUcsY0FBWTtRQUMvRjtJQUNGO0lBQ0FSLFFBQVEsa0JBQXFELE9BQW5DRCxRQUFRVSxTQUFTLENBQUNDLGNBQWM7SUFDMUQsT0FBT1Y7QUFDVDtBQUNBLGtDQUFrQztBQUNsQyxlQUFlVyxnQkFBZ0JYLElBQVk7SUFDekMsSUFBSVksVUFBVUMsU0FBUyxFQUFFO1FBQ3ZCLE1BQU1ELFVBQVVDLFNBQVMsQ0FBQ0MsU0FBUyxDQUFDZDtJQUN0QyxPQUFPO1FBQ0wsOEJBQThCO1FBQzlCLE1BQU1lLFdBQVdDLFNBQVNDLGFBQWEsQ0FBQztRQUN4Q0YsU0FBU0csS0FBSyxHQUFHbEI7UUFDakJnQixTQUFTRyxJQUFJLENBQUNDLFdBQVcsQ0FBQ0w7UUFDMUJBLFNBQVNNLE1BQU07UUFDZkwsU0FBU00sV0FBVyxDQUFDO1FBQ3JCTixTQUFTRyxJQUFJLENBQUNJLFdBQVcsQ0FBQ1I7SUFDNUI7QUFDRjtBQUMySTtBQUM1RjtBQUNJO0FB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QU03Qiw4REFBQ0U7Z0NBQUlGLFdBQVU7O2tEQUNiLDhEQUFDRTt3Q0FBSUYsV0FBVTtrREFDWixDQUFDaEssZ0JBQWdCOzs7Ozs7a0RBRXBCLDhEQUFDckIseURBQU1BO3dDQUFDOEssTUFBSzt3Q0FBU2lDLFVBQVUsQ0FBQzlMLE1BQU0ySCxJQUFJLE1BQU16SDtrREFDOUNBLDBCQUFZLDhEQUFDOUIsOEtBQU9BOzRDQUFDZ00sV0FBVTs7Ozs7aUVBQTRCOzs4REFBRSw4REFBQ2pNLDhLQUFJQTtvREFBQ2lNLFdBQVU7Ozs7OztnREFBaUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUtwRyxDQUFDaEssOEJBQ0EsOERBQUNrSzt3QkFBSUYsV0FBVTtrQ0FBcUM7Ozs7Ozs7Ozs7OzswQkFNeEQsOERBQUM3Tiw0REFBYztnQkFBQ3lQLGdCQUFlOztrQ0FDN0IsOERBQUN6UCx3REFBVTt3QkFBQzJQLE1BQU1wRjt3QkFBV3FGLGNBQWNwRjt3QkFBY3FGLFVBQVU7d0JBQU1oQyxXQUFVO2tDQUNqRiw0RUFBQzdOLHlEQUFXO3NDQUFFeUs7Ozs7Ozs7Ozs7O2tDQUVoQiw4REFBQ3pLLDREQUFjO3dCQUFDNk4sV0FBVTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSWxDO0dBanNCZ0IzSzs7UUFDVXBELDZEQUFPQTs7O0tBRGpCb0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy9jaGF0L2NoYXQtaW50ZXJmYWNlLnRzeD8wNTIxIl0sInNvdXJjZXNDb250ZW50IjpbIlxuJ3VzZSBjbGllbnQnXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0Avc3JjL2NvbnRleHQvQXV0aENvbnRleHQnXG5pbXBvcnQgeyBDb3B5IH0gZnJvbSAnbHVjaWRlLXJlYWN0J1xuaW1wb3J0ICogYXMgVG9hc3QgZnJvbSAnQHJhZGl4LXVpL3JlYWN0LXRvYXN0J1xuaW1wb3J0IHsgTWVzc2FnZVJlbmRlcmVyIH0gZnJvbSAnLi9tZXNzYWdlLXJlbmRlcmVyJ1xuLy8gSGVscGVyIHRvIGZvcm1hdCBtZXNzYWdlIGZvciBjb3B5aW5nIChwbGFpbiB0ZXh0ICsgb3B0aW9uYWwgbWV0YWRhdGEpXG5mdW5jdGlvbiBmb3JtYXRNZXNzYWdlRm9yQ29weShtZXNzYWdlOiBNZXNzYWdlKTogc3RyaW5nIHtcbiAgbGV0IHRleHQgPSBtZXNzYWdlLmNvbnRlbnRcbiAgaWYgKG1lc3NhZ2UuY2l0YXRpb25zICYmIG1lc3NhZ2UuY2l0YXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICB0ZXh0ICs9ICdcXG5cXG5Tb3VyY2VzOidcbiAgICBmb3IgKGNvbnN0IGMgb2YgbWVzc2FnZS5jaXRhdGlvbnMpIHtcbiAgICAgIHRleHQgKz0gYFxcbi0gJHtjLnRpdGxlfSAoJHtjLnNvdXJjZX0pJHtjLnNjb3JlID8gYCBbJHsoYy5zY29yZSAqIDEwMCkudG9GaXhlZCgwKX0lIG1hdGNoXWAgOiAnJ31gXG4gICAgfVxuICB9XG4gIHRleHQgKz0gYFxcblxcblRpbWVzdGFtcDogJHttZXNzYWdlLnRpbWVzdGFtcC50b0xvY2FsZVN0cmluZygpfWBcbiAgcmV0dXJuIHRleHRcbn1cbi8vIENvcHkgdG8gY2xpcGJvYXJkIHdpdGggZmFsbGJhY2tcbmFzeW5jIGZ1bmN0aW9uIGNvcHlUb0NsaXBib2FyZCh0ZXh0OiBzdHJpbmcpIHtcbiAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQpIHtcbiAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrIGZvciBvbGRlciBicm93c2Vyc1xuICAgIGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKVxuICAgIHRleHRhcmVhLnZhbHVlID0gdGV4dFxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpXG4gICAgdGV4dGFyZWEuc2VsZWN0KClcbiAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0YXJlYSlcbiAgfVxufVxuaW1wb3J0IHsgU2VuZCwgTG9hZGVyMiwgRmlsZVRleHQsIFNlYXJjaCwgR2xvYmUsIFBhcGVyY2xpcCwgWCwgVXBsb2FkLCBDaGVja0NpcmNsZSwgQWxlcnRDaXJjbGUsIE1heGltaXplMiwgTWluaW1pemUyIH0gZnJvbSAnbHVjaWRlLXJlYWN0J1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2J1dHRvbidcbmltcG9ydCB7IFRleHRhcmVhIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3RleHRhcmVhJ1xuaW1wb3J0IHsgQ2FyZCwgQ2FyZENvbnRlbnQgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvY2FyZCdcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2JhZGdlJ1xuaW1wb3J0IHsgQ29sbGFwc2libGUsIENvbGxhcHNpYmxlQ29udGVudCwgQ29sbGFwc2libGVUcmlnZ2VyIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2NvbGxhcHNpYmxlJ1xuXG5pbnRlcmZhY2UgQ2l0YXRpb24ge1xuICBpZDogc3RyaW5nXG4gIHRpdGxlOiBzdHJpbmdcbiAgY29udGVudDogc3RyaW5nXG4gIHNvdXJjZTogc3RyaW5nXG4gIHNjb3JlPzogbnVtYmVyXG4gIHBhZ2U/OiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIFVwbG9hZGVkRmlsZSB7XG4gIHNlc3Npb25JZDogc3RyaW5nXG4gIGZpbGVOYW1lOiBzdHJpbmdcbiAgZmlsZVNpemU6IG51bWJlclxuICB1cGxvYWRUaW1lOiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIE1lc3NhZ2Uge1xuICBpZDogc3RyaW5nXG4gIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnXG4gIGNvbnRlbnQ6IHN0cmluZ1xuICBjaXRhdGlvbnM/OiBDaXRhdGlvbltdXG4gIHNlYXJjaFR5cGU/OiAnZG9jdW1lbnRzJyB8ICd3ZWInIHwgJ2h5YnJpZCcgfCAndGVtcC1kb2MnXG4gIHVwbG9hZGVkRmlsZT86IFVwbG9hZGVkRmlsZVxuICB0aW1lc3RhbXA6IERhdGVcbn1cblxuaW50ZXJmYWNlIENoYXRJbnRlcmZhY2VQcm9wcyB7XG4gIGNvbnZlcnNhdGlvbklkPzogbnVtYmVyXG4gIG9uQ29udmVyc2F0aW9uQ3JlYXRlZD86IChjb252ZXJzYXRpb25JZDogbnVtYmVyKSA9PiB2b2lkXG4gIG9uQ29udmVyc2F0aW9uQWN0aXZpdHk/OiAoY29udmVyc2F0aW9uSWQ6IG51bWJlcikgPT4gdm9pZFxufVxuXG5jb25zdCBBTExPV0VEX0VYVEVOU0lPTlMgPSBbXG4gICcudHh0JywgJy5sb2cnLCAnLmNzdicsICcuanNvbicsICcuc3FsJywgJy5wZGYnLFxuICAnLnhtbCcsICcuY29uZicsICcuY29uZmlnJywgJy5pbmknLCAnLnByb3BlcnRpZXMnLFxuICAnLm91dCcsICcuZXJyJywgJy50cmFjZScsICcuZHVtcCcsICcucG5nJywgJy5qcGcnLFxuICAnLmpwZWcnLCAnLmdpZicsICcuYm1wJywgJy50aWZmJywgJy53ZWJwJ1xuXVxuY29uc3QgTUFYX0ZJTEVfU0laRSA9IDEwICogMTAyNCAqIDEwMjQgLy8gMTBNQlxuXG5leHBvcnQgZnVuY3Rpb24gQ2hhdEludGVyZmFjZSh7IGNvbnZlcnNhdGlvbklkLCBvbkNvbnZlcnNhdGlvbkNyZWF0ZWQsIG9uQ29udmVyc2F0aW9uQWN0aXZpdHkgfTogQ2hhdEludGVyZmFjZVByb3BzKSB7XG4gIGNvbnN0IHsgYWNjZXNzVG9rZW4gfSA9IHVzZUF1dGgoKVxuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlPE1lc3NhZ2VbXT4oW10pXG4gIGNvbnN0IFtpbnB1dCwgc2V0SW5wdXRdID0gdXNlU3RhdGUoJycpXG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW3VwbG9hZGVkRmlsZSwgc2V0VXBsb2FkZWRGaWxlXSA9IHVzZVN0YXRlPFVwbG9hZGVkRmlsZSB8IG51bGw+KG51bGwpXG4gIGNvbnN0IFtpc1VwbG9hZGluZywgc2V0SXNVcGxvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFt1cGxvYWRFcnJvciwgc2V0VXBsb2FkRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbClcbiAgY29uc3QgW2lzRHJhZ092ZXIsIHNldElzRHJhZ092ZXJdID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtpbnB1dEV4cGFuZGVkLCBzZXRJbnB1dEV4cGFuZGVkXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBmaWxlSW5wdXRSZWYgPSB1c2VSZWY8SFRNTElucHV0RWxlbWVudD4obnVsbClcbiAgY29uc3QgY2hhdENvbnRhaW5lclJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcbiAgY29uc3QgbWVzc2FnZXNDb250YWluZXJSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IGlzSW5pdGlhbFNjcm9sbFJlZiA9IHVzZVJlZih0cnVlKVxuXG4gIGNvbnN0IHNjcm9sbFRvQm90dG9tID0gKGJlaGF2aW9yOiBTY3JvbGxCZWhhdmlvciA9ICdhdXRvJykgPT4ge1xuICAgIGNvbnN0IGVsID0gbWVzc2FnZXNDb250YWluZXJSZWYuY3VycmVudFxuICAgIGlmIChlbCkge1xuICAgICAgZWwuc2Nyb2xsVG8oeyB0b3A6IGVsLnNjcm9sbEhlaWdodCwgYmVoYXZpb3IgfSlcbiAgICB9XG4gIH1cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNjcm9sbFRvQm90dG9tKGlzSW5pdGlhbFNjcm9sbFJlZi5jdXJyZW50ID8gJ2F1dG8nIDogJ3Ntb290aCcpXG4gICAgaXNJbml0aWFsU2Nyb2xsUmVmLmN1cnJlbnQgPSBmYWxzZVxuICB9LCBbbWVzc2FnZXNdKVxuXG4gIGNvbnN0IFtoaXN0b3J5TG9hZGluZywgc2V0SGlzdG9yeUxvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtoaXN0b3J5RXJyb3IsIHNldEhpc3RvcnlFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxuXG4gIC8vIEhhbmRsZSBjb252ZXJzYXRpb24gY2hhbmdlcyAtIGxvYWQgaGlzdG9yeSBmb3IgZXhpc3RpbmcgY29udmVyc2F0aW9uc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBjYW5jZWxsZWQgPSBmYWxzZVxuXG4gICAgY29uc3QgbG9hZEhpc3RvcnkgPSBhc3luYyAoaWQ6IG51bWJlcikgPT4ge1xuICAgICAgaWYgKCFhY2Nlc3NUb2tlbikge1xuICAgICAgICBzZXRIaXN0b3J5RXJyb3IoJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkIHRvIGxvYWQgY29udmVyc2F0aW9uLicpXG4gICAgICAgIHNldE1lc3NhZ2VzKFtdKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIHNldEhpc3RvcnlMb2FkaW5nKHRydWUpXG4gICAgICAgIHNldEhpc3RvcnlFcnJvcihudWxsKVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2NvbnZlcnNhdGlvbnMvJHtpZH1gLCB7XG4gICAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCB9LFxuICAgICAgICAgIGNhY2hlOiAnbm8tc3RvcmUnLFxuICAgICAgICB9KVxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgICAgICBzZXRIaXN0b3J5RXJyb3IoJ0NvbnZlcnNhdGlvbiBub3QgZm91bmQuJylcbiAgICAgICAgICAgIHNldE1lc3NhZ2VzKFtdKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGRldGFpbCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnJylcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGV0YWlsIHx8IGBGYWlsZWQgdG8gbG9hZCBjb252ZXJzYXRpb24gKHN0YXR1cyAke3Jlc3BvbnNlLnN0YXR1c30pYClcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICAgIGlmIChjYW5jZWxsZWQpIHJldHVyblxuICAgICAgICBjb25zdCBtYXBwZWQ6IE1lc3NhZ2VbXSA9IEFycmF5LmlzQXJyYXkoZGF0YT8ubWVzc2FnZXMpXG4gICAgICAgICAgPyBkYXRhLm1lc3NhZ2VzLm1hcCgobXNnOiBhbnkpID0+ICh7XG4gICAgICAgICAgICAgIGlkOiBTdHJpbmcobXNnLmlkKSxcbiAgICAgICAgICAgICAgcm9sZTogbXNnLnJvbGUgPT09ICdhc3Npc3RhbnQnID8gJ2Fzc2lzdGFudCcgOiAndXNlcicsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IG1zZy5jb250ZW50ID8/ICcnLFxuICAgICAgICAgICAgICBjaXRhdGlvbnM6IEFycmF5LmlzQXJyYXkobXNnLmNpdGF0aW9ucykgPyBtc2cuY2l0YXRpb25zIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICBzZWFyY2hUeXBlOiBtc2cuc2VhcmNoVHlwZSA/PyBtc2cubWV0aG9kLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKG1zZy5jcmVhdGVkQXQgPz8gbXNnLmNyZWF0ZWRfYXQgPz8gbmV3IERhdGUoKS50b0lTT1N0cmluZygpKSxcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgIDogW11cbiAgICAgICAgc2V0TWVzc2FnZXMobWFwcGVkKVxuICAgICAgICBzZXRVcGxvYWRlZEZpbGUobnVsbClcbiAgICAgICAgc2V0VXBsb2FkRXJyb3IobnVsbClcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmICghY2FuY2VsbGVkKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgY29udmVyc2F0aW9uIGhpc3Rvcnk6JywgZXJyb3IpXG4gICAgICAgICAgc2V0SGlzdG9yeUVycm9yKCdVbmFibGUgdG8gbG9hZCBjb252ZXJzYXRpb24gaGlzdG9yeS4nKVxuICAgICAgICAgIHNldE1lc3NhZ2VzKFtdKVxuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoIWNhbmNlbGxlZCkge1xuICAgICAgICAgIHNldEhpc3RvcnlMb2FkaW5nKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHNldE1lc3NhZ2VzKFtdKVxuICAgICAgc2V0SW5wdXQoJycpXG4gICAgICBzZXRVcGxvYWRlZEZpbGUobnVsbClcbiAgICAgIHNldFVwbG9hZEVycm9yKG51bGwpXG4gICAgICBzZXRIaXN0b3J5RXJyb3IobnVsbClcbiAgICAgIHNldEhpc3RvcnlMb2FkaW5nKGZhbHNlKVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2FkSGlzdG9yeShjb252ZXJzYXRpb25JZClcbiAgICB9XG5cbiAgICBpc0luaXRpYWxTY3JvbGxSZWYuY3VycmVudCA9IHRydWVcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjYW5jZWxsZWQgPSB0cnVlXG4gICAgfVxuICB9LCBbY29udmVyc2F0aW9uSWQsIGFjY2Vzc1Rva2VuXSlcblxuICBjb25zdCB2YWxpZGF0ZUZpbGUgPSAoZmlsZTogRmlsZSk6IHN0cmluZyB8IG51bGwgPT4ge1xuICAgIGlmIChmaWxlLnNpemUgPiBNQVhfRklMRV9TSVpFKSB7XG4gICAgICByZXR1cm4gYEZpbGUgc2l6ZSBleGNlZWRzICR7TUFYX0ZJTEVfU0laRSAvIDEwMjQgLyAxMDI0fU1CIGxpbWl0YFxuICAgIH1cblxuICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGUubmFtZS50b0xvd2VyQ2FzZSgpLnN1YnN0cmluZyhmaWxlLm5hbWUubGFzdEluZGV4T2YoJy4nKSlcbiAgICBpZiAoIUFMTE9XRURfRVhURU5TSU9OUy5pbmNsdWRlcyhleHRlbnNpb24pKSB7XG4gICAgICByZXR1cm4gYEZpbGUgdHlwZSBub3Qgc3VwcG9ydGVkLiBBbGxvd2VkOiAke0FMTE9XRURfRVhURU5TSU9OUy5qb2luKCcsICcpfWBcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgY29uc3QgaGFuZGxlRmlsZVVwbG9hZCA9IGFzeW5jIChmaWxlOiBGaWxlKSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdGlvbkVycm9yID0gdmFsaWRhdGVGaWxlKGZpbGUpXG4gICAgaWYgKHZhbGlkYXRpb25FcnJvcikge1xuICAgICAgc2V0VXBsb2FkRXJyb3IodmFsaWRhdGlvbkVycm9yKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgc2V0SXNVcGxvYWRpbmcodHJ1ZSlcbiAgICBzZXRVcGxvYWRFcnJvcihudWxsKVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKClcbiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpXG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvdGVtcC11cGxvYWQnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBmb3JtRGF0YSxcbiAgICAgICAgaGVhZGVyczogYWNjZXNzVG9rZW4gPyB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gIH0gOiB1bmRlZmluZWRcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IgfHwgJ1VwbG9hZCBmYWlsZWQnKVxuICAgICAgfVxuXG4gICAgICBjb25zdCB1cGxvYWRlZEZpbGU6IFVwbG9hZGVkRmlsZSA9IHtcbiAgICAgICAgc2Vzc2lvbklkOiByZXN1bHQuc2Vzc2lvbklkLFxuICAgICAgICBmaWxlTmFtZTogcmVzdWx0LmZpbGVOYW1lLFxuICAgICAgICBmaWxlU2l6ZTogcmVzdWx0LmZpbGVTaXplLFxuICAgICAgICB1cGxvYWRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH1cblxuICAgICAgc2V0VXBsb2FkZWRGaWxlKHVwbG9hZGVkRmlsZSlcblxuICAgICAgLy8gQWRkIGEgc3lzdGVtIG1lc3NhZ2UgYWJvdXQgdGhlIHVwbG9hZFxuICAgICAgY29uc3Qgc3lzdGVtTWVzc2FnZTogTWVzc2FnZSA9IHtcbiAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgIGNvbnRlbnQ6IGDinIUgKipGaWxlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseToqKiAke2ZpbGUubmFtZX0gKCR7Zm9ybWF0RmlsZVNpemUoZmlsZS5zaXplKX0pXFxuXFxuWW91IGNhbiBub3cgYXNrIHF1ZXN0aW9ucyBhYm91dCB0aGlzIGRvY3VtZW50LiBJJ2xsIGFuYWx5emUgaXRzIGNvbnRlbnQgdG8gcHJvdmlkZSBzcGVjaWZpYyBpbnNpZ2h0cyBhbmQgdHJvdWJsZXNob290aW5nIGFzc2lzdGFuY2UuYCxcbiAgICAgICAgc2VhcmNoVHlwZTogJ3RlbXAtZG9jJyxcbiAgICAgICAgdXBsb2FkZWRGaWxlOiB1cGxvYWRlZEZpbGUsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgICAgfVxuXG4gICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBzeXN0ZW1NZXNzYWdlXSlcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdVcGxvYWQgZXJyb3I6JywgZXJyb3IpXG4gICAgICBzZXRVcGxvYWRFcnJvcihlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVcGxvYWQgZmFpbGVkJylcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNVcGxvYWRpbmcoZmFsc2UpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFuZGxlRmlsZVNlbGVjdCA9IChldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmaWxlcyA9IGV2ZW50LnRhcmdldC5maWxlc1xuICAgIGlmIChmaWxlcyAmJiBmaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICBoYW5kbGVGaWxlVXBsb2FkKGZpbGVzWzBdKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGNsZWFyVXBsb2FkZWRGaWxlID0gKCkgPT4ge1xuICAgIHNldFVwbG9hZGVkRmlsZShudWxsKVxuICAgIHNldFVwbG9hZEVycm9yKG51bGwpXG4gICAgaWYgKGZpbGVJbnB1dFJlZi5jdXJyZW50KSB7XG4gICAgICBmaWxlSW5wdXRSZWYuY3VycmVudC52YWx1ZSA9ICcnXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZm9ybWF0RmlsZVNpemUgPSAoYnl0ZXM6IG51bWJlcikgPT4ge1xuICAgIGlmIChieXRlcyA9PT0gMCkgcmV0dXJuICcwIEJ5dGVzJ1xuICAgIGNvbnN0IGsgPSAxMDI0XG4gICAgY29uc3Qgc2l6ZXMgPSBbJ0J5dGVzJywgJ0tCJywgJ01CJ11cbiAgICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSlcbiAgICByZXR1cm4gcGFyc2VGbG9hdCgoYnl0ZXMgLyBNYXRoLnBvdyhrLCBpKSkudG9GaXhlZCgxKSkgKyAnICcgKyBzaXplc1tpXVxuICB9XG5cbiAgLy8gRHJhZyBhbmQgZHJvcCBoYW5kbGVyc1xuICBjb25zdCBoYW5kbGVEcmFnRW50ZXIgPSAoZTogUmVhY3QuRHJhZ0V2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIHNldElzRHJhZ092ZXIodHJ1ZSlcbiAgfVxuXG4gIGNvbnN0IGhhbmRsZURyYWdMZWF2ZSA9IChlOiBSZWFjdC5EcmFnRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgLy8gT25seSBzZXQgaXNEcmFnT3ZlciB0byBmYWxzZSBpZiB3ZSdyZSBsZWF2aW5nIHRoZSBjaGF0IGNvbnRhaW5lclxuICAgIGlmICghY2hhdENvbnRhaW5lclJlZi5jdXJyZW50Py5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgIHNldElzRHJhZ092ZXIoZmFsc2UpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFuZGxlRHJhZ092ZXIgPSAoZTogUmVhY3QuRHJhZ0V2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICB9XG5cbiAgY29uc3QgaGFuZGxlRHJvcCA9IChlOiBSZWFjdC5EcmFnRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgc2V0SXNEcmFnT3ZlcihmYWxzZSlcblxuICAgIGNvbnN0IGZpbGVzID0gZS5kYXRhVHJhbnNmZXIuZmlsZXNcbiAgICBpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgaGFuZGxlRmlsZVVwbG9hZChmaWxlc1swXSlcbiAgICB9XG4gIH1cblxuICAvLyBUb2FzdCBzdGF0ZSBmb3IgY29weSBmZWVkYmFja1xuICBjb25zdCBbdG9hc3RPcGVuLCBzZXRUb2FzdE9wZW5dID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFt0b2FzdE1zZywgc2V0VG9hc3RNc2ddID0gdXNlU3RhdGUoJycpXG5cbiAgLy8gQWRkIGdsb2JhbCBkcmFnIGV2ZW50IGxpc3RlbmVycyB0byBkZXRlY3QgZHJhZyBlbnRlci9sZWF2ZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZUdsb2JhbERyYWdFbnRlciA9IChlOiBEcmFnRXZlbnQpID0+IHtcbiAgICAgIGlmIChlLmRhdGFUcmFuc2Zlcj8udHlwZXMuaW5jbHVkZXMoJ0ZpbGVzJykpIHtcbiAgICAgICAgc2V0SXNEcmFnT3Zlcih0cnVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZUdsb2JhbERyYWdMZWF2ZSA9IChlOiBEcmFnRXZlbnQpID0+IHtcbiAgICAgIC8vIE9ubHkgaGlkZSBkcmFnIG92ZXJsYXkgaWYgd2UncmUgbGVhdmluZyB0aGUgd2luZG93XG4gICAgICBpZiAoZS5jbGllbnRYID09PSAwICYmIGUuY2xpZW50WSA9PT0gMCkge1xuICAgICAgICBzZXRJc0RyYWdPdmVyKGZhbHNlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIGhhbmRsZUdsb2JhbERyYWdFbnRlcilcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCBoYW5kbGVHbG9iYWxEcmFnTGVhdmUpXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgaGFuZGxlR2xvYmFsRHJhZ0VudGVyKVxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2xlYXZlJywgaGFuZGxlR2xvYmFsRHJhZ0xlYXZlKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHJhd0lucHV0ID0gaW5wdXQudHJpbSgpXG4gICAgaWYgKCFyYXdJbnB1dCB8fCBpc0xvYWRpbmcpIHJldHVyblxuICAgIGlmICghYWNjZXNzVG9rZW4pIHtcbiAgICAgIHNldFRvYXN0TXNnKCdQbGVhc2Ugc2lnbiBpbiB0byBjaGF0LicpXG4gICAgICBzZXRUb2FzdE9wZW4odHJ1ZSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGNvbW1hbmRNYXRjaCA9IHJhd0lucHV0Lm1hdGNoKC9eXFwvKG5ld3x1cGRhdGV8Y2xvc2UpXFxzK2Nhc2VcXHMrKC4rKSQvaSlcbiAgICBsZXQgZGlzcGxheUNvbnRlbnQgPSByYXdJbnB1dFxuICAgIGxldCBvdXRib3VuZENvbnRlbnQgPSByYXdJbnB1dFxuXG4gICAgaWYgKGNvbW1hbmRNYXRjaCkge1xuICAgICAgY29uc3QgYWN0aW9uID0gY29tbWFuZE1hdGNoWzFdLnRvTG93ZXJDYXNlKClcbiAgICAgIGNvbnN0IGNhc2VOdW1iZXIgPSBjb21tYW5kTWF0Y2hbMl0udHJpbSgpXG4gICAgICBpZiAoIWNhc2VOdW1iZXIpIHtcbiAgICAgICAgc2V0VG9hc3RNc2coJ1BsZWFzZSBwcm92aWRlIGEgY2FzZSBudW1iZXIsIGUuZy4gL25ldyBjYXNlIDAxMTI1MDUyJylcbiAgICAgICAgc2V0VG9hc3RPcGVuKHRydWUpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAoYWN0aW9uID09PSAnbmV3Jykge1xuICAgICAgICBkaXNwbGF5Q29udGVudCA9IGDwn5OEIEluaXRpYXRpbmcgU2FsZXNmb3JjZSBjYXNlICR7Y2FzZU51bWJlcn1gXG4gICAgICAgIG91dGJvdW5kQ29udGVudCA9IGBZb3UgYXJlIGFzc2lzdGluZyB3aXRoIFNhbGVzZm9yY2UgY2FzZSAke2Nhc2VOdW1iZXJ9LiBVc2luZyB0aGUgY29udmVyc2F0aW9uIGNvbnRleHQsIGRlZmluZSB0aGUgY2FzZSBmb3IgYW5hbHlzaXMgYW5kIHJlY29tbWVuZGF0aW9uIGJ5IHByb3ZpZGluZzpcXG4tIEEgY29uY2lzZSBjYXNlIG92ZXJ2aWV3IHdpdGggaW1wb3J0YW50IGZhY3RzIGtub3duIHNvIGZhci5cXG4tIEltbWVkaWF0ZSBkaWFnbm9zdGljIG9yIHRyaWFnZSBzdGVwcyB0byBwZXJmb3JtLlxcbi0gQ2xhcmlmeWluZyBxdWVzdGlvbnMgdGhhdCBzaG91bGQgYmUgYXNrZWQgb2YgdGhlIGN1c3RvbWVyLlxcbi0gUmVjb21tZW5kZWQgbmV4dCBhY3Rpb25zIGZvciBlbmdpbmVlcmluZy9zdXBwb3J0IHRlYW1zLlxcblJldHVybiB0aGUgcmVzcG9uc2Ugd2l0aCBoZWFkaW5nczogQ2FzZSBPdmVydmlldywgSW1tZWRpYXRlIEFjdGlvbnMsIENsYXJpZnlpbmcgUXVlc3Rpb25zLCBSZWNvbW1lbmRlZCBOZXh0IFN0ZXBzLmBcbiAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAndXBkYXRlJykge1xuICAgICAgICBkaXNwbGF5Q29udGVudCA9IGDwn5ug77iPIFVwZGF0aW5nIFNhbGVzZm9yY2UgY2FzZSAke2Nhc2VOdW1iZXJ9YFxuICAgICAgICBvdXRib3VuZENvbnRlbnQgPSBgWW91IGFyZSBwcm92aWRpbmcgYW4gdXBkYXRlIG9uIFNhbGVzZm9yY2UgY2FzZSAke2Nhc2VOdW1iZXJ9LiBSZXZpZXcgdGhlIGNvbnZlcnNhdGlvbiBjb250ZXh0IGFuZCBwcm9kdWNlOlxcbi0gVGhlIGN1cnJlbnQgc3RhdHVzL3Byb2dyZXNzIG9mIHRoZSBjYXNlLlxcbi0gT3V0c3RhbmRpbmcgaXNzdWVzIG9yIGJsb2NrZXJzLlxcbi0gUmVjb21tZW5kZWQgbmV4dCBzdGVwcyBmb3IgdGhlIHN1cHBvcnQgZW5naW5lZXIuXFxuLSBTdWdnZXN0ZWQgY3VzdG9tZXIgY29tbXVuaWNhdGlvbiBwb2ludHMuXFxuUmV0dXJuIHRoZSByZXNwb25zZSB3aXRoIGhlYWRpbmdzOiBDYXNlIFN0YXR1cywgT3V0c3RhbmRpbmcgSXRlbXMsIFJlY29tbWVuZGVkIEFjdGlvbnMsIEN1c3RvbWVyIENvbW11bmljYXRpb24uYFxuICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICdjbG9zZScpIHtcbiAgICAgICAgZGlzcGxheUNvbnRlbnQgPSBg4pyFIENsb3NpbmcgU2FsZXNmb3JjZSBjYXNlICR7Y2FzZU51bWJlcn1gXG4gICAgICAgIG91dGJvdW5kQ29udGVudCA9IGBZb3UgYXJlIHByZXBhcmluZyB0byBjbG9zZSBTYWxlc2ZvcmNlIGNhc2UgJHtjYXNlTnVtYmVyfS4gQmFzZWQgb24gdGhlIGNvbnZlcnNhdGlvbiBjb250ZXh0LCBwcm92aWRlOlxcbi0gQSBicmllZiBpbmNpZGVudCBzdW1tYXJ5Llxcbi0gQWN0aW9ucyB0YWtlbiBhbmQgcmVzb2x1dGlvbnMgYXBwbGllZC5cXG4tIFZlcmlmaWNhdGlvbiBzdGVwcyBvciBmaW5hbCBjaGVja3MgY29tcGxldGVkL25lZWRlZC5cXG4tIEZpbmFsIGNsb3NpbmcgY29tbWVudHMgZm9yIHRoZSBjdXN0b21lci5cXG5SZXR1cm4gdGhlIHJlc3BvbnNlIHdpdGggaGVhZGluZ3M6IFN1bW1hcnksIEFjdGlvbnMgVGFrZW4sIFZlcmlmaWNhdGlvbiwgQ2xvc2luZyBDb21tZW50cy5gXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdXNlck1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgY29udGVudDogZGlzcGxheUNvbnRlbnQsXG4gICAgICB1cGxvYWRlZEZpbGU6IHVwbG9hZGVkRmlsZSB8fCB1bmRlZmluZWQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICB9XG5cbiAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCB1c2VyTWVzc2FnZV0pXG4gICAgY29uc3QgY3VycmVudElucHV0ID0gb3V0Ym91bmRDb250ZW50XG4gICAgc2V0SW5wdXQoJycpXG4gICAgc2V0SXNMb2FkaW5nKHRydWUpXG5cbiAgICB0cnkge1xuICAgICAgLy8gSWYgdGhlcmUncyBhbiB1cGxvYWRlZCBmaWxlLCBhbmFseXplIGl0IHVzaW5nIHRlbXAtYW5hbHl6ZSBlbmRwb2ludFxuICAgICAgaWYgKHVwbG9hZGVkRmlsZSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3RlbXAtYW5hbHl6ZScsIHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgLi4uKGFjY2Vzc1Rva2VuID8geyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCB9IDoge30pXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHVwbG9hZGVkRmlsZS5zZXNzaW9uSWQsXG4gICAgICAgICAgICBxdWVyeTogY3VycmVudElucHV0LFxuICAgICAgICAgICAgbWF4UmVzdWx0czogNVxuICAgICAgICAgIH0pLFxuICAgICAgICB9KVxuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuXG4gICAgICAgIGNvbnN0IGFzc2lzdGFudE1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICAgICAgaWQ6IChEYXRlLm5vdygpICsgMSkudG9TdHJpbmcoKSxcbiAgICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgICBjb250ZW50OiByZXN1bHQucmVzcG9uc2UsXG4gICAgICAgICAgY2l0YXRpb25zOiByZXN1bHQucmVzdWx0cz8ubWFwKChyOiBhbnksIGlkeDogbnVtYmVyKSA9PiAoe1xuICAgICAgICAgICAgaWQ6IGB0ZW1wLSR7aWR4fWAsXG4gICAgICAgICAgICB0aXRsZTogYFNlY3Rpb24gJHtyLnJhbmt9YCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHIuY29udGVudCxcbiAgICAgICAgICAgIHNvdXJjZTogdXBsb2FkZWRGaWxlLmZpbGVOYW1lLFxuICAgICAgICAgICAgc2NvcmU6IHIuc2ltaWxhcml0eVxuICAgICAgICAgIH0pKSxcbiAgICAgICAgICBzZWFyY2hUeXBlOiAndGVtcC1kb2MnLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgICAgICB9XG5cbiAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgYXNzaXN0YW50TWVzc2FnZV0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBSZWd1bGFyIGNoYXQgd2l0aG91dCB1cGxvYWRlZCBmaWxlXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2NoYXQnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgbWVzc2FnZTogY3VycmVudElucHV0LFxuICAgICAgICAgIGRpc3BsYXlNZXNzYWdlOiB1c2VyTWVzc2FnZS5jb250ZW50LFxuICAgICAgICB9KSxcbiAgICAgIH0pXG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIGVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlYWRlciA9IHJlc3BvbnNlLmJvZHk/LmdldFJlYWRlcigpXG4gICAgICBpZiAoIXJlYWRlcikgdGhyb3cgbmV3IEVycm9yKCdObyByZXNwb25zZSBib2R5JylcblxuICAgICAgbGV0IGFzc2lzdGFudE1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICAgIGlkOiAoRGF0ZS5ub3coKSArIDEpLnRvU3RyaW5nKCksXG4gICAgICAgIHJvbGU6ICdhc3Npc3RhbnQnLFxuICAgICAgICBjb250ZW50OiAnJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICB9XG4gICAgICBsZXQgcmVzb2x2ZWRDb252ZXJzYXRpb25JZDogbnVtYmVyIHwgdW5kZWZpbmVkID0gY29udmVyc2F0aW9uSWRcblxuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgYXNzaXN0YW50TWVzc2FnZV0pXG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKClcbiAgICAgICAgaWYgKGRvbmUpIGJyZWFrXG5cbiAgICAgICAgY29uc3QgY2h1bmsgPSBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUodmFsdWUpXG4gICAgICAgIGNvbnN0IGxpbmVzID0gY2h1bmsuc3BsaXQoJ1xcbicpXG5cbiAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnZGF0YTogJykpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGxpbmUuc2xpY2UoNikpXG5cbiAgICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ3Rva2VuJykge1xuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBzdHJlYW1pbmcgdG9rZW5zIGZyb20gdGhlIGJhY2tlbmRcbiAgICAgICAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHByZXYubWFwKG0gPT5cbiAgICAgICAgICAgICAgICAgIG0uaWQgPT09IGFzc2lzdGFudE1lc3NhZ2UuaWRcbiAgICAgICAgICAgICAgICAgICAgPyB7IC4uLm0sIGNvbnRlbnQ6IG0uY29udGVudCArIGRhdGEudG9rZW4gfVxuICAgICAgICAgICAgICAgICAgICA6IG1cbiAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3NvdXJjZXMnKSB7XG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIHNvdXJjZXMvY2l0YXRpb25zXG4gICAgICAgICAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBwcmV2Lm1hcChtID0+XG4gICAgICAgICAgICAgICAgICBtLmlkID09PSBhc3Npc3RhbnRNZXNzYWdlLmlkXG4gICAgICAgICAgICAgICAgICAgID8geyAuLi5tLCBjaXRhdGlvbnM6IGRhdGEuc291cmNlcywgc2VhcmNoVHlwZTogZGF0YS5tZXRob2QgfVxuICAgICAgICAgICAgICAgICAgICA6IG1cbiAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbl9pZCcpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRhdGEuY29udmVyc2F0aW9uSWQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICByZXNvbHZlZENvbnZlcnNhdGlvbklkID0gZGF0YS5jb252ZXJzYXRpb25JZFxuICAgICAgICAgICAgICAgICAgaWYgKGNvbnZlcnNhdGlvbklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgb25Db252ZXJzYXRpb25DcmVhdGVkPy4oZGF0YS5jb252ZXJzYXRpb25JZClcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnZG9uZScpIHtcbiAgICAgICAgICAgICAgICAvLyBTdHJlYW1pbmcgY29tcGxldGVkXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N0cmVhbWluZyBjb21wbGV0ZWQnKVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N0cmVhbWluZyBlcnJvcjonLCBkYXRhLmVycm9yKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIC8vIElnbm9yZSBtYWxmb3JtZWQgSlNPTlxuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBwYXJzZSBzdHJlYW1pbmcgZGF0YTonLCBsaW5lKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocmVzb2x2ZWRDb252ZXJzYXRpb25JZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9uQ29udmVyc2F0aW9uQWN0aXZpdHk/LihyZXNvbHZlZENvbnZlcnNhdGlvbklkKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdDaGF0IGVycm9yOicsIGVycm9yKVxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlOiBNZXNzYWdlID0ge1xuICAgICAgICBpZDogKERhdGUubm93KCkgKyAxKS50b1N0cmluZygpLFxuICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgY29udGVudDogJ1NvcnJ5LCBJIGVuY291bnRlcmVkIGFuIGVycm9yLiBQbGVhc2UgdHJ5IGFnYWluLicsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxuICAgICAgfVxuICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgZXJyb3JNZXNzYWdlXSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGdldFNlYXJjaEljb24gPSAoc2VhcmNoVHlwZT86IHN0cmluZykgPT4ge1xuICAgIHN3aXRjaCAoc2VhcmNoVHlwZSkge1xuICAgICAgY2FzZSAnZG9jdW1lbnRzJzogcmV0dXJuIDxGaWxlVGV4dCBjbGFzc05hbWU9XCJoLTMgdy0zXCIgLz5cbiAgICAgIGNhc2UgJ3dlYic6IHJldHVybiA8R2xvYmUgY2xhc3NOYW1lPVwiaC0zIHctM1wiIC8+XG4gICAgICBjYXNlICdoeWJyaWQnOiByZXR1cm4gPFNlYXJjaCBjbGFzc05hbWU9XCJoLTMgdy0zXCIgLz5cbiAgICAgIGNhc2UgJ3RlbXAtZG9jJzogcmV0dXJuIDxVcGxvYWQgY2xhc3NOYW1lPVwiaC0zIHctM1wiIC8+XG4gICAgICBkZWZhdWx0OiByZXR1cm4gPFNlYXJjaCBjbGFzc05hbWU9XCJoLTMgdy0zXCIgLz5cbiAgICB9XG4gIH1cblxuICBjb25zdCBnZXRTZWFyY2hMYWJlbCA9IChzZWFyY2hUeXBlPzogc3RyaW5nKSA9PiB7XG4gICAgc3dpdGNoIChzZWFyY2hUeXBlKSB7XG4gICAgICBjYXNlICdkb2N1bWVudHMnOiByZXR1cm4gJ0RvY3VtZW50IFNlYXJjaCdcbiAgICAgIGNhc2UgJ3dlYic6IHJldHVybiAnV2ViIFNlYXJjaCdcbiAgICAgIGNhc2UgJ2h5YnJpZCc6IHJldHVybiAnSHlicmlkIFNlYXJjaCdcbiAgICAgIGNhc2UgJ3RlbXAtZG9jJzogcmV0dXJuICdVcGxvYWRlZCBEb2N1bWVudCdcbiAgICAgIGRlZmF1bHQ6IHJldHVybiAnU2VhcmNoJ1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgcmVmPXtjaGF0Q29udGFpbmVyUmVmfVxuICAgICAgY2xhc3NOYW1lPVwiZmxleCBoLWZ1bGwgbWluLWgtMCBmbGV4LWNvbCByZWxhdGl2ZVwiXG4gICAgICBvbkRyYWdFbnRlcj17aGFuZGxlRHJhZ0VudGVyfVxuICAgICAgb25EcmFnTGVhdmU9e2hhbmRsZURyYWdMZWF2ZX1cbiAgICAgIG9uRHJhZ092ZXI9e2hhbmRsZURyYWdPdmVyfVxuICAgICAgb25Ecm9wPXtoYW5kbGVEcm9wfVxuICAgID5cbiAgICAgIHsvKiBEcmFnIE92ZXJsYXkgKi99XG4gICAgICB7aXNEcmFnT3ZlciAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCB6LTUwIGJnLWJsdWUtNTAwLzEwIGJhY2tkcm9wLWJsdXItc20gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYm9yZGVyLTIgYm9yZGVyLWRhc2hlZCBib3JkZXItYmx1ZS01MDBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHAtOCBiZy13aGl0ZS85MCByb3VuZGVkLWxnIHNoYWRvdy1sZ1wiPlxuICAgICAgICAgICAgPFVwbG9hZCBjbGFzc05hbWU9XCJoLTEyIHctMTIgbXgtYXV0byB0ZXh0LWJsdWUtNTAwIG1iLTRcIiAvPlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1zZW1pYm9sZCB0ZXh0LWJsdWUtOTAwIG1iLTJcIj5Ecm9wIGZpbGUgdG8gYW5hbHl6ZTwvaDM+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWJsdWUtNzAwXCI+XG4gICAgICAgICAgICAgIFN1cHBvcnRzIGxvZ3MsIGNvbmZpZ3MsIFBERnMsIGltYWdlcywgYW5kIG1vcmVcbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ibHVlLTYwMCBtdC0yXCI+XG4gICAgICAgICAgICAgIEFJIHdpbGwgYW5hbHl6ZSB5b3VyIGRvY3VtZW50IHdpdGggVGVjaG5pY2FsIFNlcnZpY2UgQXNzaXN0YW50IGV4cGVydGlzZVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBNZXNzYWdlcyAqL31cbiAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0NvbnRhaW5lclJlZn0gY2xhc3NOYW1lPVwiZmxleC0xIG1pbi1oLTAgb3ZlcmZsb3cteS1hdXRvIHAtNCBzcGFjZS15LTRcIj5cbiAgICAgICAge2hpc3RvcnlMb2FkaW5nICYmIG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCBweS04XCI+XG4gICAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJoLTEwIHctMTAgbXgtYXV0byBtYi00IGFuaW1hdGUtc3BpblwiIC8+XG4gICAgICAgICAgICA8cD5Mb2FkaW5nIGNvbnZlcnNhdGlvbi4uLjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IGhpc3RvcnlFcnJvciAmJiBtZXNzYWdlcy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciB0ZXh0LXJlZC01MDAgcHktOFwiPlxuICAgICAgICAgICAgPEFsZXJ0Q2lyY2xlIGNsYXNzTmFtZT1cImgtMTAgdy0xMCBteC1hdXRvIG1iLTRcIiAvPlxuICAgICAgICAgICAgPHA+e2hpc3RvcnlFcnJvcn08L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiBtZXNzYWdlcy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciB0ZXh0LW11dGVkLWZvcmVncm91bmQgcHktOFwiPlxuICAgICAgICAgICAgPFNlYXJjaCBjbGFzc05hbWU9XCJoLTEyIHctMTIgbXgtYXV0byBtYi00IG9wYWNpdHktNTBcIiAvPlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1tZWRpdW0gbWItMlwiPlN0YXJ0IGEgY29udmVyc2F0aW9uPC9oMz5cbiAgICAgICAgICAgIDxwPkFzayBxdWVzdGlvbnMgYWJvdXQgeW91ciBkb2N1bWVudHMgb3IgYW55IHRvcGljLjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IG51bGx9XG5cbiAgICAgICAge21lc3NhZ2VzLm1hcCgobWVzc2FnZSkgPT4gKFxuICAgICAgICAgIDxkaXYga2V5PXttZXNzYWdlLmlkfSBjbGFzc05hbWU9e2BmbGV4ICR7bWVzc2FnZS5yb2xlID09PSAndXNlcicgPyAnanVzdGlmeS1lbmQnIDogJ2p1c3RpZnktc3RhcnQnfWB9PlxuICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgbWF4LXctWzgwJV0gJHttZXNzYWdlLnJvbGUgPT09ICd1c2VyJyA/ICdiZy1wcmltYXJ5IHRleHQtcHJpbWFyeS1mb3JlZ3JvdW5kJyA6ICdiZy1tdXRlZCd9IHJvdW5kZWQtbGcgcC00IHJlbGF0aXZlYH0+XG4gICAgICAgICAgICAgICA8TWVzc2FnZVJlbmRlcmVyIGNvbnRlbnQ9e21lc3NhZ2UuY29udGVudH0gLz5cbiAgICAgICAgICAgICAgey8qIENvcHkgYnV0dG9uIGZvciBhc3Npc3RhbnQgbWVzc2FnZXMgKi99XG4gICAgICAgICAgICAgIHttZXNzYWdlLnJvbGUgPT09ICdhc3Npc3RhbnQnICYmIChcbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMiByaWdodC0yIHAtMSByb3VuZGVkIGhvdmVyOmJnLWFjY2VudCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZ1wiXG4gICAgICAgICAgICAgICAgICB0aXRsZT1cIkNvcHkgcmVzcG9uc2VcIlxuICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkNvcHkgcmVzcG9uc2VcIlxuICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJjb3B5LWJ0blwiXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29weVRvQ2xpcGJvYXJkKGZvcm1hdE1lc3NhZ2VGb3JDb3B5KG1lc3NhZ2UpKVxuICAgICAgICAgICAgICAgICAgICAgIHNldFRvYXN0TXNnKCdDb3BpZWQgdG8gY2xpcGJvYXJkIScpXG4gICAgICAgICAgICAgICAgICAgICAgc2V0VG9hc3RPcGVuKHRydWUpXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRUb2FzdE1zZygnQ29weSBmYWlsZWQnKVxuICAgICAgICAgICAgICAgICAgICAgIHNldFRvYXN0T3Blbih0cnVlKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxDb3B5IGNsYXNzTmFtZT1cImgtNCB3LTQgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCIgLz5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAge21lc3NhZ2UuY2l0YXRpb25zICYmIG1lc3NhZ2UuY2l0YXRpb25zLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMyBwdC0zIGJvcmRlci10IGJvcmRlci1ib3JkZXIvMjBcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICB7Z2V0U2VhcmNoSWNvbihtZXNzYWdlLnNlYXJjaFR5cGUpfVxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtbWVkaXVtXCI+e2dldFNlYXJjaExhYmVsKG1lc3NhZ2Uuc2VhcmNoVHlwZSl9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8QmFkZ2UgdmFyaWFudD1cInNlY29uZGFyeVwiIGNsYXNzTmFtZT1cInRleHQteHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5jaXRhdGlvbnMubGVuZ3RofSBzb3VyY2V7bWVzc2FnZS5jaXRhdGlvbnMubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9XG4gICAgICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxDb2xsYXBzaWJsZT5cbiAgICAgICAgICAgICAgICAgICAgPENvbGxhcHNpYmxlVHJpZ2dlciBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCBob3Zlcjp0ZXh0LWZvcmVncm91bmQgdHJhbnNpdGlvbi1jb2xvcnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICBTaG93IHNvdXJjZXMg4oaTXG4gICAgICAgICAgICAgICAgICAgIDwvQ29sbGFwc2libGVUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICA8Q29sbGFwc2libGVDb250ZW50IGNsYXNzTmFtZT1cIm10LTIgc3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAge21lc3NhZ2UuY2l0YXRpb25zLm1hcCgoY2l0YXRpb24sIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPENhcmQga2V5PXtpZHh9IGNsYXNzTmFtZT1cInRleHQteHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT1cInAtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gbWItMVwiPntjaXRhdGlvbi50aXRsZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtbXV0ZWQtZm9yZWdyb3VuZCBtYi0yIGxpbmUtY2xhbXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NpdGF0aW9uLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPntjaXRhdGlvbi5zb3VyY2V9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NpdGF0aW9uLnNjb3JlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhZGdlIHZhcmlhbnQ9XCJvdXRsaW5lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyhjaXRhdGlvbi5zY29yZSAqIDEwMCkudG9GaXhlZCgwKX0lIG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvQmFkZ2U+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICA8L0NvbGxhcHNpYmxlQ29udGVudD5cbiAgICAgICAgICAgICAgICAgIDwvQ29sbGFwc2libGU+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSl9XG4gICAgICAgIHtoaXN0b3J5TG9hZGluZyAmJiBtZXNzYWdlcy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+VXBkYXRpbmcgY29udmVyc2F0aW9u4oCmPC9kaXY+XG4gICAgICAgICl9XG5cbiAgICAgICAge2lzTG9hZGluZyAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktc3RhcnRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctbXV0ZWQgcm91bmRlZC1sZyBwLTRcIj5cbiAgICAgICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwiaC00IHctNCBhbmltYXRlLXNwaW5cIiAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIElucHV0ICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItdCBiZy1iYWNrZ3JvdW5kIHAtNFwiPlxuICAgICAgICB7LyogRmlsZSBVcGxvYWQgQXJlYSAqL31cbiAgICAgICAge3VwbG9hZGVkRmlsZSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi0zIHAtMyBiZy1ncmVlbi01MCBib3JkZXIgYm9yZGVyLWdyZWVuLTIwMCByb3VuZGVkLWxnIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8Q2hlY2tDaXJjbGUgY2xhc3NOYW1lPVwiaC00IHctNCB0ZXh0LWdyZWVuLTUwMFwiIC8+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1ncmVlbi05MDBcIj57dXBsb2FkZWRGaWxlLmZpbGVOYW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JlZW4tNjAwIG1sLTJcIj4oe2Zvcm1hdEZpbGVTaXplKHVwbG9hZGVkRmlsZS5maWxlU2l6ZSl9KTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgb25DbGljaz17Y2xlYXJVcGxvYWRlZEZpbGV9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtZ3JlZW4tNzAwIGhvdmVyOnRleHQtZ3JlZW4tODAwXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFggY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7dXBsb2FkRXJyb3IgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItMyBwLTMgYmctcmVkLTUwIGJvcmRlciBib3JkZXItcmVkLTIwMCByb3VuZGVkLWxnIGZsZXggaXRlbXMtc3RhcnQgZ2FwLTJcIj5cbiAgICAgICAgICAgIDxBbGVydENpcmNsZSBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQtcmVkLTUwMCBtdC0wLjVcIiAvPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LXJlZC05MDBcIj5VcGxvYWQgRXJyb3I8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtcmVkLTYwMFwiPnt1cGxvYWRFcnJvcn08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRVcGxvYWRFcnJvcihudWxsKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1yZWQtNzAwIGhvdmVyOnRleHQtcmVkLTgwMCBtbC1hdXRvXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFggY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fSBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxuICAgICAgICAgICAgPHNwYW4+UHJlc3MgRW50ZXIgdG8gc2VuZCwgU2hpZnQrRW50ZXIgZm9yIGEgbmV3IGxpbmUuPC9zcGFuPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cImdob3N0XCJcbiAgICAgICAgICAgICAgICBzaXplPVwiaWNvblwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0SW5wdXRFeHBhbmRlZChwcmV2ID0+ICFwcmV2KX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWZvcmVncm91bmQgaG92ZXI6dGV4dC1mb3JlZ3JvdW5kXCJcbiAgICAgICAgICAgICAgICB0aXRsZT17aW5wdXRFeHBhbmRlZCA/ICdDb2xsYXBzZSBpbnB1dCcgOiAnRXhwYW5kIGlucHV0J31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtpbnB1dEV4cGFuZGVkID8gPE1pbmltaXplMiBjbGFzc05hbWU9XCJoLTQgdy00XCIgLz4gOiA8TWF4aW1pemUyIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPn1cbiAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgIDxUZXh0YXJlYVxuICAgICAgICAgICAgICB2YWx1ZT17aW5wdXR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFRleHRBcmVhRWxlbWVudD4pID0+IHNldElucHV0KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3VwbG9hZGVkRmlsZSA/XG4gICAgICAgICAgICAgICAgKHVwbG9hZGVkRmlsZS5maWxlTmFtZS5tYXRjaCgvXFwuKHBuZ3xqcGd8anBlZ3xnaWZ8Ym1wfHRpZmZ8d2VicCkkL2kpID9cbiAgICAgICAgICAgICAgICAgIFwiRGVzY3JpYmUgd2hhdCB5b3Ugc2VlIGluIHRoZSBpbWFnZSBvciBhc2sgcXVlc3Rpb25zIGFib3V0IGl0Li4uXCIgOlxuICAgICAgICAgICAgICAgICAgXCJBc2sgcXVlc3Rpb25zIGFib3V0IHRoZSB1cGxvYWRlZCBkb2N1bWVudC4uLlwiKSA6XG4gICAgICAgICAgICAgICAgXCJBc2sgYSBxdWVzdGlvbiBhYm91dCB5b3VyIGRvY3VtZW50cy4uLlwifVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LWZ1bGwgcHItMTIgcmVzaXplLXkgJHtpbnB1dEV4cGFuZGVkID8gJ21pbi1oLVsxODBweF0nIDogJ21pbi1oLVs4MHB4XSd9IG1heC1oLVszMjBweF1gfVxuICAgICAgICAgICAgICBvbktleURvd249eyhlOiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxUZXh0QXJlYUVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgIGhhbmRsZVN1Ym1pdChlIGFzIGFueSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSByaWdodC0zIGJvdHRvbS0zIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgICAgICAgICByZWY9e2ZpbGVJbnB1dFJlZn1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlRmlsZVNlbGVjdH1cbiAgICAgICAgICAgICAgICBhY2NlcHQ9e0FMTE9XRURfRVhURU5TSU9OUy5qb2luKCcsJyl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZGVuXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJnaG9zdFwiXG4gICAgICAgICAgICAgICAgc2l6ZT1cImljb25cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGZpbGVJbnB1dFJlZi5jdXJyZW50Py5jbGljaygpfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1VwbG9hZGluZ31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTcgdy03XCJcbiAgICAgICAgICAgICAgICB0aXRsZT1cIlVwbG9hZCBkb2N1bWVudCBmb3IgYW5hbHlzaXNcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2lzVXBsb2FkaW5nID8gKFxuICAgICAgICAgICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwiaC00IHctNCBhbmltYXRlLXNwaW5cIiAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8UGFwZXJjbGlwIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlxuICAgICAgICAgICAgICB7IXVwbG9hZGVkRmlsZSAmJiAn8J+SoSBUaXA6IENsaWNrIHRoZSBjbGlwIGljb24gb3IgZHJhZyAmIGRyb3AgZmlsZXMgdG8gdXBsb2FkIGxvZ3MsIGNvbmZpZ3MsIGltYWdlcywgb3Igb3RoZXIgZG9jdW1lbnRzLid9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cInN1Ym1pdFwiIGRpc2FibGVkPXshaW5wdXQudHJpbSgpIHx8IGlzTG9hZGluZ30+XG4gICAgICAgICAgICAgIHtpc0xvYWRpbmcgPyA8TG9hZGVyMiBjbGFzc05hbWU9XCJoLTQgdy00IGFuaW1hdGUtc3BpblwiIC8+IDogPD48U2VuZCBjbGFzc05hbWU9XCJoLTQgdy00IG1yLTFcIiAvPiBTZW5kPC8+fVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZm9ybT5cblxuICAgICAgICB7IXVwbG9hZGVkRmlsZSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHRleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+XG4gICAgICAgICAgICBOZWVkIHRvIGRlc2NyaWJlIGEgbG9uZ2VyIGlzc3VlPyBFeHBhbmQgdGhlIGlucHV0IG9yIGF0dGFjaCBmaWxlcyBmb3IgZGVlcGVyIGFuYWx5c2lzLlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICB7LyogVG9hc3Qgbm90aWZpY2F0aW9uIGZvciBjb3B5IGZlZWRiYWNrICovfVxuICAgICAgPFRvYXN0LlByb3ZpZGVyIHN3aXBlRGlyZWN0aW9uPVwicmlnaHRcIj5cbiAgICAgICAgPFRvYXN0LlJvb3Qgb3Blbj17dG9hc3RPcGVufSBvbk9wZW5DaGFuZ2U9e3NldFRvYXN0T3Blbn0gZHVyYXRpb249ezIwMDB9IGNsYXNzTmFtZT1cImJnLWJsYWNrIHRleHQtd2hpdGUgcHgtNCBweS0yIHJvdW5kZWQgc2hhZG93LWxnXCI+XG4gICAgICAgICAgPFRvYXN0LlRpdGxlPnt0b2FzdE1zZ308L1RvYXN0LlRpdGxlPlxuICAgICAgICA8L1RvYXN0LlJvb3Q+XG4gICAgICAgIDxUb2FzdC5WaWV3cG9ydCBjbGFzc05hbWU9XCJmaXhlZCBib3R0b20tNCByaWdodC00IHotNTBcIiAvPlxuICAgICAgPC9Ub2FzdC5Qcm92aWRlcj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJ1c2VBdXRoIiwiQ29weSIsIlRvYXN0IiwiTWVzc2FnZVJlbmRlcmVyIiwiZm9ybWF0TWVzc2FnZUZvckNvcHkiLCJtZXNzYWdlIiwidGV4dCIsImNvbnRlbnQiLCJjaXRhdGlvbnMiLCJsZW5ndGgiLCJjIiwidGl0bGUiLCJzb3VyY2UiLCJzY29yZSIsInRvRml4ZWQiLCJ0aW1lc3RhbXAiLCJ0b0xvY2FsZVN0cmluZyIsImNvcHlUb0NsaXBib2FyZCIsIm5hdmlnYXRvciIsImNsaXBib2FyZCIsIndyaXRlVGV4dCIsInRleHRhcmVhIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidmFsdWUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJzZWxlY3QiLCJleGVjQ29tbWFuZCIsInJlbW92ZUNoaWxkIiwiU2VuZCIsIkxvYWRlcjIiLCJGaWxlVGV4dCIsIlNlYXJjaCIsIkdsb2JlIiwiUGFwZXJjbGlwIiwiWCIsIlVwbG9hZCIsIkNoZWNrQ2lyY2xlIiwiQWxlcnRDaXJjbGUiLCJNYXhpbWl6ZTIiLCJNaW5pbWl6ZTIiLCJCdXR0b24iLCJUZXh0YXJlYSIsIkNhcmQiLCJDYXJkQ29udGVudCIsIkJhZGdlIiwiQ29sbGFwc2libGUiLCJDb2xsYXBzaWJsZUNvbnRlbnQiLCJDb2xsYXBzaWJsZVRyaWdnZXIiLCJBTExPV0VEX0VYVEVOU0lPTlMiLCJNQVhfRklMRV9TSVpFIiwiQ2hhdEludGVyZmFjZSIsImNvbnZlcnNhdGlvbklkIiwib25Db252ZXJzYXRpb25DcmVhdGVkIiwib25Db252ZXJzYXRpb25BY3Rpdml0eSIsImFjY2Vzc1Rva2VuIiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsImlucHV0Iiwic2V0SW5wdXQiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJ1cGxvYWRlZEZpbGUiLCJzZXRVcGxvYWRlZEZpbGUiLCJpc1VwbG9hZGluZyIsInNldElzVXBsb2FkaW5nIiwidXBsb2FkRXJyb3IiLCJzZXRVcGxvYWRFcnJvciIsImlzRHJhZ092ZXIiLCJzZXRJc0RyYWdPdmVyIiwiaW5wdXRFeHBhbmRlZCIsInNldElucHV0RXhwYW5kZWQiLCJmaWxlSW5wdXRSZWYiLCJjaGF0Q29udGFpbmVyUmVmIiwibWVzc2FnZXNDb250YWluZXJSZWYiLCJpc0luaXRpYWxTY3JvbGxSZWYiLCJzY3JvbGxUb0JvdHRvbSIsImJlaGF2aW9yIiwiZWwiLCJjdXJyZW50Iiwic2Nyb2xsVG8iLCJ0b3AiLCJzY3JvbGxIZWlnaHQiLCJoaXN0b3J5TG9hZGluZyIsInNldEhpc3RvcnlMb2FkaW5nIiwiaGlzdG9yeUVycm9yIiwic2V0SGlzdG9yeUVycm9yIiwiY2FuY2VsbGVkIiwibG9hZEhpc3RvcnkiLCJpZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImNhY2hlIiwib2siLCJzdGF0dXMiLCJkZXRhaWwiLCJjYXRjaCIsIkVycm9yIiwiZGF0YSIsImpzb24iLCJtYXBwZWQiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJtc2ciLCJTdHJpbmciLCJyb2xlIiwidW5kZWZpbmVkIiwic2VhcmNoVHlwZSIsIm1ldGhvZCIsIkRhdGUiLCJjcmVhdGVkQXQiLCJjcmVhdGVkX2F0IiwidG9JU09TdHJpbmciLCJlcnJvciIsImNvbnNvbGUiLCJ2YWxpZGF0ZUZpbGUiLCJmaWxlIiwic2l6ZSIsImV4dGVuc2lvbiIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsInN1YnN0cmluZyIsImxhc3RJbmRleE9mIiwiaW5jbHVkZXMiLCJqb2luIiwiaGFuZGxlRmlsZVVwbG9hZCIsInZhbGlkYXRpb25FcnJvciIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJyZXN1bHQiLCJzdWNjZXNzIiwic2Vzc2lvbklkIiwiZmlsZU5hbWUiLCJmaWxlU2l6ZSIsInVwbG9hZFRpbWUiLCJzeXN0ZW1NZXNzYWdlIiwibm93IiwidG9TdHJpbmciLCJmb3JtYXRGaWxlU2l6ZSIsInByZXYiLCJoYW5kbGVGaWxlU2VsZWN0IiwiZXZlbnQiLCJmaWxlcyIsInRhcmdldCIsImNsZWFyVXBsb2FkZWRGaWxlIiwiYnl0ZXMiLCJrIiwic2l6ZXMiLCJpIiwiTWF0aCIsImZsb29yIiwibG9nIiwicGFyc2VGbG9hdCIsInBvdyIsImhhbmRsZURyYWdFbnRlciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImhhbmRsZURyYWdMZWF2ZSIsImNvbnRhaW5zIiwicmVsYXRlZFRhcmdldCIsImhhbmRsZURyYWdPdmVyIiwiaGFuZGxlRHJvcCIsImRhdGFUcmFuc2ZlciIsInRvYXN0T3BlbiIsInNldFRvYXN0T3BlbiIsInRvYXN0TXNnIiwic2V0VG9hc3RNc2ciLCJoYW5kbGVHbG9iYWxEcmFnRW50ZXIiLCJ0eXBlcyIsImhhbmRsZUdsb2JhbERyYWdMZWF2ZSIsImNsaWVudFgiLCJjbGllbnRZIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVTdWJtaXQiLCJyYXdJbnB1dCIsInRyaW0iLCJjb21tYW5kTWF0Y2giLCJtYXRjaCIsImRpc3BsYXlDb250ZW50Iiwib3V0Ym91bmRDb250ZW50IiwiYWN0aW9uIiwiY2FzZU51bWJlciIsInVzZXJNZXNzYWdlIiwiY3VycmVudElucHV0IiwiSlNPTiIsInN0cmluZ2lmeSIsInF1ZXJ5IiwibWF4UmVzdWx0cyIsImFzc2lzdGFudE1lc3NhZ2UiLCJyZXN1bHRzIiwiciIsImlkeCIsInJhbmsiLCJzaW1pbGFyaXR5IiwiZGlzcGxheU1lc3NhZ2UiLCJyZWFkZXIiLCJnZXRSZWFkZXIiLCJyZXNvbHZlZENvbnZlcnNhdGlvbklkIiwiZG9uZSIsInJlYWQiLCJjaHVuayIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwibGluZXMiLCJzcGxpdCIsImxpbmUiLCJzdGFydHNXaXRoIiwicGFyc2UiLCJzbGljZSIsInR5cGUiLCJtIiwidG9rZW4iLCJzb3VyY2VzIiwid2FybiIsImVycm9yTWVzc2FnZSIsImdldFNlYXJjaEljb24iLCJjbGFzc05hbWUiLCJnZXRTZWFyY2hMYWJlbCIsImRpdiIsInJlZiIsIm9uRHJhZ0VudGVyIiwib25EcmFnTGVhdmUiLCJvbkRyYWdPdmVyIiwib25Ecm9wIiwiaDMiLCJwIiwiYnV0dG9uIiwiYXJpYS1sYWJlbCIsImRhdGEtdGVzdGlkIiwib25DbGljayIsInNwYW4iLCJ2YXJpYW50IiwiY2l0YXRpb24iLCJmb3JtIiwib25TdWJtaXQiLCJvbkNoYW5nZSIsInBsYWNlaG9sZGVyIiwib25LZXlEb3duIiwia2V5Iiwic2hpZnRLZXkiLCJhY2NlcHQiLCJjbGljayIsImRpc2FibGVkIiwiUHJvdmlkZXIiLCJzd2lwZURpcmVjdGlvbiIsIlJvb3QiLCJvcGVuIiwib25PcGVuQ2hhbmdlIiwiZHVyYXRpb24iLCJUaXRsZSIsIlZpZXdwb3J0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/chat/chat-interface.tsx\n"));

/***/ })

});