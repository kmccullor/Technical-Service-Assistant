(()=>{var e={};e.id=1817,e.ids=[1817],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7416:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(8020),s(9458),s(996);var r=s(170),a=s(5002),l=s(3876),n=s.n(l),i=s(6299),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["temp-analysis",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8020)),"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/app/temp-analysis/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9458)),"/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,996,23)),"next/dist/client/components/not-found-error"]}],d=["/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/app/temp-analysis/page.tsx"],u="/temp-analysis/page",h={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/temp-analysis/page",pathname:"/temp-analysis",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7719:(e,t,s)=>{Promise.resolve().then(s.bind(s,6833))},3649:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3642,23)),Promise.resolve().then(s.t.bind(s,7586,23)),Promise.resolve().then(s.t.bind(s,7838,23)),Promise.resolve().then(s.t.bind(s,8057,23)),Promise.resolve().then(s.t.bind(s,7741,23)),Promise.resolve().then(s.t.bind(s,3118,23))},7730:(e,t,s)=>{Promise.resolve().then(s.bind(s,9410))},6833:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(7247),a=s(8964),l=s(8749),n=s(9964),i=s(2752),o=s(7013);let c=(0,s(6323).Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var d=s(290);let u=[".txt",".log",".csv",".json",".sql",".pdf",".xml",".conf",".config",".ini",".properties",".out",".err",".trace",".dump"];function h({onFileUploaded:e,onAnalysisResult:t}){let[s,h]=(0,a.useState)(!1),[m,x]=(0,a.useState)(null),[p,g]=(0,a.useState)(!1),[f,y]=(0,a.useState)(!1),[j,b]=(0,a.useState)(null),[v,N]=(0,a.useState)(""),[k,w]=(0,a.useState)(null),A=(0,a.useRef)(null),T=e=>{if(e.size>10485760)return"File size exceeds 10MB limit";let t=e.name.toLowerCase().substring(e.name.lastIndexOf("."));return u.includes(t)?null:`File type not supported. Allowed: ${u.join(", ")}`},P=async t=>{let s=T(t);if(s){b(s);return}g(!0),b(null);try{let s=new FormData;s.append("file",t);let r=await fetch("/api/temp-upload",{method:"POST",body:s}),a=await r.json();if(!a.success)throw Error(a.error||"Upload failed");let l={sessionId:a.sessionId,fileName:a.fileName,fileSize:a.fileSize,uploadTime:new Date().toISOString()};x(l),e?.(l)}catch(e){console.error("Upload error:",e),b(e instanceof Error?e.message:"Upload failed")}finally{g(!1)}},S=e=>{e&&0!==e.length&&P(e[0])},_=(0,a.useCallback)(e=>{e.preventDefault(),h(!0)},[]),C=(0,a.useCallback)(e=>{e.preventDefault(),h(!1)},[]),M=(0,a.useCallback)(e=>{e.preventDefault(),h(!1),S(e.dataTransfer.files)},[]),Z=async()=>{if(m&&v.trim()){y(!0),b(null);try{let e=await fetch("/api/temp-analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:m.sessionId,query:v.trim(),maxResults:5})}),s=await e.json();if(e.ok)w(s),t?.(s);else throw Error(s.error||"Analysis failed")}catch(e){console.error("Analysis error:",e),b(e instanceof Error?e.message:"Analysis failed")}finally{y(!1)}}};return(0,r.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-6 space-y-6",children:[!m&&(0,r.jsxs)("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${s?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:_,onDragLeave:C,onDrop:M,children:[r.jsx("input",{ref:A,type:"file",className:"hidden",accept:u.join(","),onChange:e=>S(e.target.files)}),p?(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(l.Z,{className:"h-12 w-12 mx-auto text-blue-500 animate-spin"}),r.jsx("p",{className:"text-gray-600",children:"Uploading file..."})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(n.Z,{className:"h-12 w-12 mx-auto text-gray-400"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Upload Document for Analysis"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Drag and drop a file here, or"," ",r.jsx("button",{onClick:()=>A.current?.click(),className:"text-blue-500 hover:text-blue-600 font-medium",children:"browse to upload"})]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 space-y-1",children:[(0,r.jsxs)("p",{children:["Supported: ",u.slice(0,6).join(", "),"..."]}),r.jsx("p",{children:"Max size: 10MB"})]})]})]}),m&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(i.Z,{className:"h-5 w-5 text-green-500"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-green-900",children:m.fileName}),(0,r.jsxs)("p",{className:"text-sm text-green-600",children:[(e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["Bytes","KB","MB"][t]})(m.fileSize)," • Uploaded successfully"]})]})]}),r.jsx("button",{onClick:()=>{x(null),N(""),w(null),b(null),A.current&&(A.current.value="")},className:"text-gray-400 hover:text-gray-600",children:r.jsx(o.Z,{className:"h-5 w-5"})})]})}),m&&r.jsx("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ask a question about the document:"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:v,onChange:e=>N(e.target.value),placeholder:"e.g., What errors are reported in this log?",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyDown:e=>"Enter"===e.key&&Z()}),(0,r.jsxs)("button",{onClick:Z,disabled:!v.trim()||f,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[f?r.jsx(l.Z,{className:"h-4 w-4 animate-spin"}):r.jsx(c,{className:"h-4 w-4"}),r.jsx("span",{children:f?"Analyzing...":"Analyze"})]})]})]})}),j&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start space-x-3",children:[r.jsx(d.Z,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-red-900",children:"Error"}),r.jsx("p",{className:"text-sm text-red-600",children:j})]})]}),k&&(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"border-b pb-3",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Analysis Results"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Confidence: ",(100*k.confidence).toFixed(1),"%"]})]}),r.jsx("div",{className:"prose prose-sm max-w-none",children:(0,r.jsxs)("div",{className:"bg-gray-50 rounded p-4",children:[r.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Technical Analysis:"}),r.jsx("div",{className:"whitespace-pre-wrap text-gray-800",children:k.response})]})}),k.results&&k.results.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium text-gray-700",children:"Relevant Sections:"}),k.results.map((e,t)=>(0,r.jsxs)("div",{className:"bg-gray-50 rounded p-3 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,r.jsxs)("span",{className:"font-medium text-gray-600",children:["Section ",e.rank]}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[(100*e.similarity).toFixed(1),"% match"]})]}),r.jsx("p",{className:"text-gray-700",children:e.content})]},t))]})]})]})}function m(){return r.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Document Analysis Tool"}),r.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Upload logs, configuration files, query results, or technical documents for immediate AI-powered analysis"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8",children:r.jsx(h,{onFileUploaded:e=>{console.log("File uploaded:",e)},onAnalysisResult:e=>{console.log("Analysis result:",e)}})}),(0,r.jsxs)("div",{className:"mt-8 bg-blue-50 rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-medium text-blue-900 mb-3",children:"Perfect for Troubleshooting"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-blue-800",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium mb-2",children:"Supported File Types:"}),(0,r.jsxs)("ul",{className:"space-y-1",children:[r.jsx("li",{children:"• Log files (.log, .out, .err, .trace)"}),r.jsx("li",{children:"• Configuration files (.conf, .config, .ini)"}),r.jsx("li",{children:"• Query results (.csv, .json, .sql)"}),r.jsx("li",{children:"• Technical documents (.pdf, .txt)"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium mb-2",children:"Use Cases:"}),(0,r.jsxs)("ul",{className:"space-y-1",children:[r.jsx("li",{children:"• Analyze error logs for root causes"}),r.jsx("li",{children:"• Review configuration settings"}),r.jsx("li",{children:"• Examine database query results"}),r.jsx("li",{children:"• Extract insights from technical docs"})]})]})]}),(0,r.jsxs)("div",{className:"mt-4 p-3 bg-blue-100 rounded text-sm text-blue-800",children:[r.jsx("strong",{children:"Privacy Note:"})," Files are processed temporarily and automatically deleted after 2 hours. No data is permanently stored."]})]})]})})}},6323:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(8964);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:i="",children:o,iconNode:c,...d},u)=>(0,r.createElement)("svg",{ref:u,...n,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:l("lucide",i),...d},[...c.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(o)?o:[o]])),o=(e,t)=>{let s=(0,r.forwardRef)(({className:s,...n},o)=>(0,r.createElement)(i,{ref:o,iconNode:t,className:l(`lucide-${a(e)}`,s),...n}));return s.displayName=`${e}`,s}},290:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6323).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2752:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6323).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8749:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6323).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9964:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6323).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},7013:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6323).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9410:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>o,a:()=>c});var r=s(7247),a=s(8964);let l=(0,a.createContext)(void 0),n="tsa_auth_v1";function i(e){try{localStorage.setItem(n,JSON.stringify(e))}catch(e){}}let o=({children:e})=>{let[t,s]=(0,a.useState)({user:null,accessToken:null,refreshToken:null,expiresAt:null,loading:!0,error:null}),o=e=>s(t=>({...t,...e})),c=e=>e;(0,a.useEffect)(()=>{let e=!1;return(async()=>{let t=function(){try{let e=localStorage.getItem(n);if(!e)return null;return JSON.parse(e)}catch(e){return null}}();if(!t?.accessToken){e||o({loading:!1});return}o({...t,loading:!0});try{let t=await fetch(c("/api/auth/health")).catch(()=>null);if(!t||!t.ok&&404!==t.status){e||o({loading:!1,error:"Auth service unavailable"});return}}catch(t){e||o({loading:!1,error:"Auth service unavailable"});return}try{let s=await fetch(c("/api/auth/me"),{headers:{Authorization:`Bearer ${t.accessToken}`}});if(s.ok){let t=await s.json();e||o({user:t,loading:!1})}else e||(o({loading:!1,accessToken:null,refreshToken:null,user:null}),i({}))}catch(t){e||o({loading:!1})}})(),()=>{e=!0}},[]);let d=(0,a.useCallback)(async(e,t)=>{o({loading:!0,error:null});try{let s=await fetch(c("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok){let e="Login failed";try{let t=await s.json();t&&"string"==typeof t.detail&&(e=t.detail)}catch(e){}return o({loading:!1,error:e}),!1}let r=null;try{r=await s.json()}catch(e){return o({loading:!1,error:"Malformed server response"}),!1}if(!r||"object"!=typeof r||!r.access_token||!r.refresh_token||"number"!=typeof r.expires_in||!r.user)return o({loading:!1,error:"Unexpected auth response"}),!1;let a=Number.isFinite(r.expires_in)?r.expires_in:0,l=Date.now()+Math.max(0,1e3*a-5e3),n={accessToken:r.access_token,refreshToken:r.refresh_token,expiresAt:l,user:r.user};return o({...n,loading:!1}),i(n),!0}catch(e){return o({loading:!1,error:"Network error"}),!1}},[]),u=(0,a.useCallback)(async e=>{o({loading:!0,error:null});try{let t=await fetch(c("/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,role_id:e.role_id||2})});if(!t.ok){let e=(await t.json().catch(()=>({}))).detail||"Registration failed";return o({loading:!1,error:e}),!1}return o({loading:!1}),!0}catch(e){return o({loading:!1,error:"Network error"}),!1}},[]),h=(0,a.useCallback)(()=>{o({user:null,accessToken:null,refreshToken:null,expiresAt:null}),i({})},[]);(0,a.useEffect)(()=>{if(globalThis._tsaFetchWrapped)return;let e=fetch;globalThis._tsaFetchWrapped=!0,globalThis.fetch=async(...t)=>{let s=await e(...t);if(401===s.status){let e="string"==typeof t[0]?t[0]:t[0].url;e.includes("/api/auth/login")||e.includes("/api/auth/register")||h()}return s}},[h]);let m=(0,a.useCallback)(async()=>{if(t.refreshToken&&!m._inFlight){m._inFlight=!0;try{let e=await fetch(c("/api/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:t.refreshToken})});if(!e.ok)return h();let s=await e.json(),r=1e3*s.expires_in,a=Date.now()+r-Math.min(5e3,Math.max(1e3,.08*r)),l={accessToken:s.access_token,expiresAt:a,user:s.user};o(l),i({...l,refreshToken:t.refreshToken})}catch(e){h()}finally{m._inFlight=!1}}},[t.refreshToken,h]);(0,a.useEffect)(()=>{if(!t.expiresAt)return;let e=t.expiresAt-Date.now();if(e<=0){m();return}let s=e-.12*e;s<1500&&(s=Math.min(Math.max(e-500,0),1500));let r=setTimeout(()=>m(),s);return()=>clearTimeout(r)},[t.expiresAt,m]);let x={...t,login:d,register:u,logout:h,refresh:m};return r.jsx(l.Provider,{value:x,children:e})};function c(){let e=(0,a.useContext)(l);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},9458:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,metadata:()=>o});var r=s(2051),a=s(1312),l=s.n(a);s(7272);var n=s(5347);let i=(0,n.createProxy)(String.raw`/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/src/context/AuthContext.tsx#AuthProvider`);(0,n.createProxy)(String.raw`/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/src/context/AuthContext.tsx#useAuth`);let o={title:"Technical Services Assistant",description:"Intelligent document search and chat with RAG capabilities"};function c({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:l().className,children:r.jsx(i,{children:r.jsx("div",{className:"min-h-screen bg-background",children:e})})})})}},8020:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(5347).createProxy)(String.raw`/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/app/temp-analysis/page.tsx#default`)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9379,2704],()=>s(7416));module.exports=r})();