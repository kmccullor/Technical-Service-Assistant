exports.id=8800,exports.ids=[8800],exports.modules={3649:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3642,23)),Promise.resolve().then(r.t.bind(r,7586,23)),Promise.resolve().then(r.t.bind(r,7838,23)),Promise.resolve().then(r.t.bind(r,8057,23)),Promise.resolve().then(r.t.bind(r,7741,23)),Promise.resolve().then(r.t.bind(r,3118,23))},7730:(e,t,r)=>{Promise.resolve().then(r.bind(r,9410))},1365:(e,t,r)=>{"use strict";r.d(t,{C:()=>l});var a=r(7247);r(8964);var n=r(7972),s=r(5008);let i=(0,n.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...r}){return a.jsx("div",{className:(0,s.cn)(i({variant:t}),e),...r})}},8053:(e,t,r)=>{"use strict";r.d(t,{z:()=>c});var a=r(7247),n=r(8964),s=r(9008),i=r(7972),l=r(5008);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},c)=>{let d=n?s.g7:"button";return a.jsx(d,{className:(0,l.cn)(o({variant:t,size:r,className:e})),ref:c,...i})});c.displayName="Button"},7757:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>l,SZ:()=>c,Zb:()=>i,aY:()=>d,ll:()=>o});var a=r(7247),n=r(8964),s=r(5008);let i=n.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));i.displayName="Card";let l=n.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=n.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,s.cn)("font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let c=n.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let d=n.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",n.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},8969:(e,t,r)=>{"use strict";r.d(t,{$N:()=>g,Be:()=>m,Vq:()=>l,cZ:()=>h,fK:()=>f,hg:()=>u});var a=r(7247),n=r(8964),s=r(7013),i=r(8053);let l=({open:e,onOpenChange:t,children:r})=>{let[s,i]=n.useState(e||!1);return n.useEffect(()=>{void 0!==e&&i(e)},[e]),a.jsx(c,{value:{open:s,onOpenChange:e=>{i(e),t?.(e)}},children:r})},o=n.createContext(null),c=o.Provider,d=()=>{let e=n.useContext(o);if(!e)throw Error("useDialog must be used within Dialog");return e},u=({asChild:e,children:t})=>{let{open:r,onOpenChange:s}=d(),l=()=>{s(!r)};return e?n.cloneElement(t,{onClick:l}):a.jsx(i.z,{onClick:l,children:t})},h=({className:e="",children:t})=>{let{open:r,onOpenChange:n}=d();return r?(0,a.jsxs)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[a.jsx("div",{className:"fixed inset-0 bg-black/60",style:{zIndex:9998},onClick:()=>n(!1)}),(0,a.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-xl mx-4",style:{zIndex:9999},children:[a.jsx(i.z,{variant:"ghost",size:"sm",className:"absolute right-2 top-2 p-1 h-6 w-6",onClick:()=>n(!1),children:a.jsx(s.Z,{className:"h-4 w-4"})}),t]})]}):null},f=({children:e})=>a.jsx("div",{className:"mb-4",children:e}),g=({children:e})=>a.jsx("h2",{className:"text-lg font-semibold",children:e}),m=({children:e})=>a.jsx("p",{className:"text-sm text-muted-foreground",children:e})},5008:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(1929),n=r(5770);function s(...e){return(0,n.m6)((0,a.W)(e))}},6323:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(8964);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:l="",children:o,iconNode:c,...d},u)=>(0,a.createElement)("svg",{ref:u,...i,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:s("lucide",l),...d},[...c.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(o)?o:[o]])),o=(e,t)=>{let r=(0,a.forwardRef)(({className:r,...i},o)=>(0,a.createElement)(l,{ref:o,iconNode:t,className:s(`lucide-${n(e)}`,r),...i}));return r.displayName=`${e}`,r}},2752:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(6323).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9256:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(6323).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7316:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(6323).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9964:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(6323).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},7013:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(6323).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9410:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>o,a:()=>c});var a=r(7247),n=r(8964);let s=(0,n.createContext)(void 0),i="tsa_auth_v1";function l(e){try{localStorage.setItem(i,JSON.stringify(e))}catch(e){}}let o=({children:e})=>{let[t,r]=(0,n.useState)({user:null,accessToken:null,refreshToken:null,expiresAt:null,loading:!0,error:null}),o=e=>r(t=>({...t,...e})),c=e=>e;(0,n.useEffect)(()=>{let e=!1;return(async()=>{let t=function(){try{let e=localStorage.getItem(i);if(!e)return null;return JSON.parse(e)}catch(e){return null}}();if(!t?.accessToken){e||o({loading:!1});return}o({...t,loading:!0});try{let t=await fetch(c("/api/auth/health")).catch(()=>null);if(!t||!t.ok&&404!==t.status){e||o({loading:!1,error:"Auth service unavailable"});return}}catch(t){e||o({loading:!1,error:"Auth service unavailable"});return}try{let r=await fetch(c("/api/auth/me"),{headers:{Authorization:`Bearer ${t.accessToken}`}});if(r.ok){let t=await r.json();e||o({user:t,loading:!1})}else e||(o({loading:!1,accessToken:null,refreshToken:null,user:null}),l({}))}catch(t){e||o({loading:!1})}})(),()=>{e=!0}},[]);let d=(0,n.useCallback)(async(e,t)=>{o({loading:!0,error:null});try{let r=await fetch(c("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok){let e="Login failed";try{let t=await r.json();t&&"string"==typeof t.detail&&(e=t.detail)}catch(e){}return o({loading:!1,error:e}),!1}let a=null;try{a=await r.json()}catch(e){return o({loading:!1,error:"Malformed server response"}),!1}if(!a||"object"!=typeof a||!a.access_token||!a.refresh_token||"number"!=typeof a.expires_in||!a.user)return o({loading:!1,error:"Unexpected auth response"}),!1;let n=Number.isFinite(a.expires_in)?a.expires_in:0,s=Date.now()+Math.max(0,1e3*n-5e3),i={accessToken:a.access_token,refreshToken:a.refresh_token,expiresAt:s,user:a.user};return o({...i,loading:!1}),l(i),!0}catch(e){return o({loading:!1,error:"Network error"}),!1}},[]),u=(0,n.useCallback)(async e=>{o({loading:!0,error:null});try{let t=await fetch(c("/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,role_id:e.role_id||2})});if(!t.ok){let e=(await t.json().catch(()=>({}))).detail||"Registration failed";return o({loading:!1,error:e}),!1}return o({loading:!1}),!0}catch(e){return o({loading:!1,error:"Network error"}),!1}},[]),h=(0,n.useCallback)(()=>{o({user:null,accessToken:null,refreshToken:null,expiresAt:null}),l({})},[]);(0,n.useEffect)(()=>{if(globalThis._tsaFetchWrapped)return;let e=fetch;globalThis._tsaFetchWrapped=!0,globalThis.fetch=async(...t)=>{let r=await e(...t);if(401===r.status){let e="string"==typeof t[0]?t[0]:t[0].url;e.includes("/api/auth/login")||e.includes("/api/auth/register")||h()}return r}},[h]);let f=(0,n.useCallback)(async()=>{if(t.refreshToken&&!f._inFlight){f._inFlight=!0;try{let e=await fetch(c("/api/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:t.refreshToken})});if(!e.ok)return h();let r=await e.json(),a=1e3*r.expires_in,n=Date.now()+a-Math.min(5e3,Math.max(1e3,.08*a)),s={accessToken:r.access_token,expiresAt:n,user:r.user};o(s),l({...s,refreshToken:t.refreshToken})}catch(e){h()}finally{f._inFlight=!1}}},[t.refreshToken,h]);(0,n.useEffect)(()=>{if(!t.expiresAt)return;let e=t.expiresAt-Date.now();if(e<=0){f();return}let r=e-.12*e;r<1500&&(r=Math.min(Math.max(e-500,0),1500));let a=setTimeout(()=>f(),r);return()=>clearTimeout(a)},[t.expiresAt,f]);let g={...t,login:d,register:u,logout:h,refresh:f};return a.jsx(s.Provider,{value:g,children:e})};function c(){let e=(0,n.useContext)(s);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},9458:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>o});var a=r(2051),n=r(1312),s=r.n(n);r(7272);var i=r(5347);let l=(0,i.createProxy)(String.raw`/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/src/context/AuthContext.tsx#AuthProvider`);(0,i.createProxy)(String.raw`/home/kmccullor/Projects/Technical-Service-Assistant/next-rag-app/src/context/AuthContext.tsx#useAuth`);let o={title:"Technical Services Assistant",description:"Intelligent document search and chat with RAG capabilities"};function c({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:s().className,children:a.jsx(l,{children:a.jsx("div",{className:"min-h-screen bg-background",children:e})})})})}},7272:()=>{}};